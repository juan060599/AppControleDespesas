"use strict";(self.webpackChunk_N_E=self.webpackChunk_N_E||[]).push([[382],{24268:(e,t,r)=>{r.d(t,{Eo:()=>o,Il:()=>i,Tj:()=>n,Vq:()=>s,YK:()=>a,bm:()=>l});let n={primary:{50:"#f0f5ff",100:"#e0ebff",200:"#c1d7ff",300:"#a2c3ff",400:"#83afff",500:"#3b82f6",600:"#2563eb",700:"#1d4ed8",800:"#1e40af",900:"#1e3a8a"},secondary:{50:"#f9fafb",100:"#f3f4f6",200:"#e5e7eb",300:"#d1d5db",400:"#9ca3af",500:"#6b7280",600:"#4b5563",700:"#374151",800:"#1f2937",900:"#111827"},status:{success:"#10b981",warning:"#f59e0b",error:"#ef4444",info:"#0ea5e9"},background:{light:"#ffffff",lighter:"#f9fafb",gradient:"linear-gradient(135deg, #f0f5ff 0%, #ffffff 100%)"}},a={xs:"4px",sm:"8px",md:"16px",lg:"24px",xl:"32px",xxl:"48px"},i={h1:{fontSize:"36px",fontWeight:700,lineHeight:"1.2"},h2:{fontSize:"28px",fontWeight:700,lineHeight:"1.3"},h3:{fontSize:"24px",fontWeight:700,lineHeight:"1.4"},h4:{fontSize:"20px",fontWeight:600,lineHeight:"1.5"},body:{fontSize:"14px",fontWeight:400,lineHeight:"1.6"},small:{fontSize:"12px",fontWeight:400,lineHeight:"1.5"},label:{fontSize:"13px",fontWeight:600,lineHeight:"1.5"}},o={sm:"0 2px 8px rgba(0, 0, 0, 0.04)",md:"0 10px 24px rgba(0, 0, 0, 0.08)",lg:"0 20px 40px rgba(0, 0, 0, 0.12)",xl:"0 30px 60px rgba(0, 0, 0, 0.15)",blue:"0 8px 24px rgba(59, 130, 246, 0.3)"},s={sm:"6px",md:"8px",lg:"12px",xl:"16px",full:"50%"},l={fast:"all 0.2s ease",normal:"all 0.3s ease",slow:"all 0.5s ease"},c={background:n.background.light,borderRadius:s.xl,boxShadow:o.md,border:"1px solid ".concat(n.primary[100]),padding:a.xl,transition:l.normal};"linear-gradient(135deg, ".concat(n.primary[500]," 0%, ").concat(n.primary[600]," 100%)"),n.background.light,s.lg,l.normal,o.blue,"linear-gradient(135deg, ".concat(n.primary[600]," 0%, ").concat(n.primary[700]," 100%)"),o.lg,n.secondary[200],s.lg,n.background.light,l.normal,n.primary[500],n.primary[50],n.secondary[300],a.md},36382:(e,t,r)=>{r.d(t,{A:()=>m});var n=r(95155),a=r(24268),i=r(15870),o=r(84926),s=r(65229),l=r(9540),c=r(12115),d=r(52619),g=r.n(d),u=r(85998),p=r(75746);function y(e){let{userId:t}=e,[r,i]=(0,c.useState)(!1),[o,l]=(0,c.useState)([]),[d,g]=(0,c.useState)(!0);return(0,c.useEffect)(()=>{(async()=>{try{let[e,r,n]=await Promise.all([(0,p.fe)(t),(0,p.xz)(t),(0,p.f)(t)]),a=e.data||[],i=r.data||{},o=n.data||{},s=[];a.forEach(e=>{let t=i[e.category]||0,r=t/e.limit_amount*100,n=o[e.category]||0;t>e.limit_amount?s.push({id:"".concat(e.id,"-exceeded"),type:"limit_exceeded",category:e.category,icon:"\uD83D\uDEA8",message:"Limite excedido em ".concat(e.category),details:"Gastou R$ ".concat(t.toFixed(2)," de R$ ").concat(e.limit_amount.toFixed(2)),severity:"high"}):r>=80&&s.push({id:"".concat(e.id,"-approaching"),type:"approaching_limit",category:e.category,icon:"⚠️",message:"Pr\xf3ximo ao limite em ".concat(e.category),details:"".concat(r.toFixed(0),"% do seu limite"),severity:"medium"}),t>1.2*n&&n>0&&s.push({id:"".concat(e.id,"-overspend"),type:"overspending_vs_last_month",category:e.category,icon:"\uD83D\uDCC8",message:"Gastou mais em ".concat(e.category),details:"+".concat(((t/n-1)*100).toFixed(0),"% comparado ao m\xeas anterior"),severity:"low"})}),l(s)}catch(e){console.error("Error loading alerts:",e)}finally{g(!1)}})()},[t]),(0,n.jsxs)("div",{style:{position:"relative"},children:[(0,n.jsxs)("button",{onClick:()=>i(!r),style:{width:"44px",height:"44px",background:a.Tj.background.light,border:"1px solid ".concat(a.Tj.primary[200]),borderRadius:a.Vq.lg,display:"flex",alignItems:"center",justifyContent:"center",cursor:"pointer",transition:a.bm.normal,position:"relative"},onMouseEnter:e=>{e.currentTarget.style.background=a.Tj.primary[50]},onMouseLeave:e=>{e.currentTarget.style.background=a.Tj.background.light},children:[(0,n.jsx)(u.A,{size:20,color:a.Tj.primary[600]}),o.length>0&&(0,n.jsx)("div",{style:{position:"absolute",top:"-4px",right:"-4px",width:"24px",height:"24px",background:a.Tj.status.error,borderRadius:"50%",display:"flex",alignItems:"center",justifyContent:"center",color:"white",fontSize:"12px",fontWeight:700,border:"2px solid ".concat(a.Tj.background.light)},children:o.length})]}),r&&(0,n.jsxs)("div",{style:{position:"absolute",top:"calc(100% + 8px)",right:0,width:"400px",maxHeight:"600px",overflowY:"auto",backgroundColor:a.Tj.background.light,borderRadius:a.Vq.xl,boxShadow:a.Eo.lg,border:"1px solid ".concat(a.Tj.primary[100]),zIndex:1e3},onClick:e=>e.stopPropagation(),children:[(0,n.jsxs)("div",{style:{padding:a.YK.lg,borderBottom:"1px solid ".concat(a.Tj.primary[100]),display:"flex",justifyContent:"space-between",alignItems:"center"},children:[(0,n.jsx)("h3",{style:{fontSize:a.Il.body.fontSize,fontWeight:700,color:a.Tj.secondary[900],margin:0},children:"\uD83D\uDD14 Notifica\xe7\xf5es"}),(0,n.jsx)("button",{onClick:()=>i(!1),style:{background:"none",border:"none",cursor:"pointer",color:a.Tj.secondary[500],padding:0},children:(0,n.jsx)(s.A,{size:20})})]}),(0,n.jsx)("div",{style:{padding:a.YK.lg},children:0===o.length?(0,n.jsx)("p",{style:{fontSize:a.Il.small.fontSize,color:a.Tj.secondary[500],textAlign:"center",margin:0},children:"✨ Nenhuma notifica\xe7\xe3o no momento!"}):(0,n.jsx)("div",{style:{display:"flex",flexDirection:"column",gap:a.YK.md},children:o.map(e=>{let t="high"===e.severity?a.Tj.status.error+"15":"medium"===e.severity?a.Tj.status.warning+"15":a.Tj.primary[50],r="high"===e.severity?a.Tj.status.error+"30":"medium"===e.severity?a.Tj.status.warning+"30":a.Tj.primary[100];return(0,n.jsxs)("div",{style:{padding:a.YK.md,backgroundColor:t,border:"1px solid ".concat(r),borderRadius:a.Vq.lg,display:"flex",gap:a.YK.sm},children:[(0,n.jsx)("span",{style:{fontSize:"18px"},children:e.icon}),(0,n.jsxs)("div",{style:{flex:1},children:[(0,n.jsx)("p",{style:{fontSize:a.Il.small.fontSize,fontWeight:600,color:a.Tj.secondary[900],margin:0,marginBottom:a.YK.xs},children:e.message}),(0,n.jsx)("p",{style:{fontSize:a.Il.small.fontSize,color:a.Tj.secondary[600],margin:0},children:e.details})]})]},e.id)})})})]}),r&&(0,n.jsx)("div",{style:{position:"fixed",top:0,left:0,right:0,bottom:0,zIndex:999},onClick:()=>i(!1)})]})}function m(e){let{userName:t,onLogout:r}=e,[d,u]=(0,c.useState)(!1),[m,f]=(0,c.useState)(null);(0,c.useEffect)(()=>{(async()=>{let e=await (0,p.HW)();e&&f(e.id)})()},[]);let x=async()=>{confirm("Tem certeza que deseja sair?")&&r()};return(0,n.jsxs)("header",{style:{background:a.Tj.background.light,borderBottom:"1px solid ".concat(a.Tj.primary[100]),boxShadow:a.Eo.sm,position:"sticky",top:0,zIndex:100,transition:a.bm.normal},children:[(0,n.jsxs)("div",{style:{maxWidth:"1400px",margin:"0 auto",padding:"".concat(a.YK.lg," ").concat(a.YK.xl),display:"flex",justifyContent:"space-between",alignItems:"center"},children:[(0,n.jsxs)("div",{style:{display:"flex",alignItems:"center",gap:a.YK.md,textDecoration:"none",color:a.Tj.secondary[900],cursor:"pointer"},children:[(0,n.jsx)("div",{style:{width:"44px",height:"44px",background:"linear-gradient(135deg, ".concat(a.Tj.primary[500]," 0%, ").concat(a.Tj.primary[600]," 100%)"),borderRadius:a.Vq.lg,display:"flex",alignItems:"center",justifyContent:"center",boxShadow:a.Eo.blue},children:(0,n.jsxs)("svg",{width:"24",height:"24",viewBox:"0 0 24 24",fill:"none",stroke:"white",strokeWidth:"2",children:[(0,n.jsx)("circle",{cx:"12",cy:"12",r:"1"}),(0,n.jsx)("circle",{cx:"19",cy:"12",r:"1"}),(0,n.jsx)("circle",{cx:"5",cy:"12",r:"1"}),(0,n.jsx)("path",{d:"M12 5v14m-7-7h14"})]})}),(0,n.jsx)("h1",{style:{fontSize:"24px",fontWeight:700,color:a.Tj.secondary[900],margin:0,letterSpacing:"-0.5px"},children:"FinControl"})]}),(0,n.jsxs)("div",{style:{display:"flex",alignItems:"center",gap:a.YK.xl},children:[(0,n.jsxs)("div",{style:{display:"flex",alignItems:"center",gap:a.YK.md},children:[(0,n.jsxs)("div",{style:{textAlign:"right"},children:[(0,n.jsxs)("p",{style:{fontSize:"14px",fontWeight:600,color:a.Tj.secondary[900],margin:0},children:["Bem-vindo, ",t,"!"]}),(0,n.jsx)("p",{style:{fontSize:"12px",color:a.Tj.secondary[500],margin:0,marginTop:"2px"},children:"Seus dados est\xe3o seguros"})]}),(0,n.jsx)("div",{style:{width:"40px",height:"40px",background:"linear-gradient(135deg, ".concat(a.Tj.primary[400]," 0%, ").concat(a.Tj.primary[600]," 100%)"),borderRadius:a.Vq.full,display:"flex",alignItems:"center",justifyContent:"center",fontSize:"18px",fontWeight:700,color:a.Tj.background.light,boxShadow:a.Eo.md},children:t.charAt(0).toUpperCase()})]}),(0,n.jsx)(g(),{href:"/pricing",style:{textDecoration:"none"},children:(0,n.jsx)("button",{style:{display:"flex",alignItems:"center",gap:a.YK.sm,padding:"10px ".concat(a.YK.md),background:"linear-gradient(135deg, ".concat(a.Tj.primary[500]," 0%, ").concat(a.Tj.primary[600]," 100%)"),border:"none",borderRadius:a.Vq.lg,color:"white",fontSize:"14px",fontWeight:600,cursor:"pointer",transition:a.bm.normal},onMouseEnter:e=>{e.target.style.transform="translateY(-2px)",e.target.style.boxShadow=a.Eo.lg},onMouseLeave:e=>{e.target.style.transform="translateY(0)",e.target.style.boxShadow="none"},children:"\uD83D\uDCB3 Planos"})}),m&&(0,n.jsx)(y,{userId:m}),(0,n.jsx)(g(),{href:"/settings",style:{textDecoration:"none"},children:(0,n.jsxs)("button",{style:{display:"flex",alignItems:"center",gap:a.YK.sm,padding:"10px ".concat(a.YK.md),background:a.Tj.primary[50],border:"1px solid ".concat(a.Tj.primary[200]),borderRadius:a.Vq.lg,color:a.Tj.primary[600],fontSize:"14px",fontWeight:600,cursor:"pointer",transition:a.bm.normal},onMouseEnter:e=>{e.target.style.background=a.Tj.primary[100],e.target.style.borderColor=a.Tj.primary[300]},onMouseLeave:e=>{e.target.style.background=a.Tj.primary[50],e.target.style.borderColor=a.Tj.primary[200]},children:[(0,n.jsx)(i.A,{size:16}),(0,n.jsx)("span",{children:"Configura\xe7\xf5es"})]})}),(0,n.jsxs)("button",{onClick:x,style:{display:"flex",alignItems:"center",gap:a.YK.sm,padding:"10px ".concat(a.YK.md),background:a.Tj.primary[50],border:"1px solid ".concat(a.Tj.primary[200]),borderRadius:a.Vq.lg,color:a.Tj.primary[600],fontSize:"14px",fontWeight:600,cursor:"pointer",transition:a.bm.normal},onMouseEnter:e=>{e.currentTarget.style.background=a.Tj.primary[100],e.currentTarget.style.borderColor=a.Tj.primary[300]},onMouseLeave:e=>{e.currentTarget.style.background=a.Tj.primary[50],e.currentTarget.style.borderColor=a.Tj.primary[200]},children:[(0,n.jsx)(o.A,{size:16}),(0,n.jsx)("span",{children:"Sair"})]})]}),(0,n.jsx)("button",{onClick:()=>u(!d),style:{display:"none",background:"none",border:"none",cursor:"pointer",padding:a.YK.md,color:a.Tj.secondary[600]},onMouseEnter:e=>e.currentTarget.style.color=a.Tj.secondary[900],onMouseLeave:e=>e.currentTarget.style.color=a.Tj.secondary[600],children:d?(0,n.jsx)(s.A,{size:24}):(0,n.jsx)(l.A,{size:24})})]}),d&&(0,n.jsxs)("div",{style:{display:"none",padding:"".concat(a.YK.md," ").concat(a.YK.xl),borderTop:"1px solid ".concat(a.Tj.primary[100]),gap:a.YK.md,flexDirection:"column"},children:[(0,n.jsx)("p",{style:{fontSize:"14px",color:a.Tj.secondary[600],margin:"".concat(a.YK.sm," 0")},children:t}),(0,n.jsx)("button",{onClick:x,style:{width:"100%",padding:"".concat(a.YK.sm," ").concat(a.YK.md),background:a.Tj.status.error,color:a.Tj.background.light,border:"none",borderRadius:a.Vq.lg,fontWeight:600,cursor:"pointer"},children:"Sair"})]})]})}},75746:(e,t,r)=>{r.d(t,{EP:()=>I,tS:()=>z,yY:()=>g,m:()=>f,$L:()=>S,UI:()=>K,$S:()=>Y,Uw:()=>m,_F:()=>j,M1:()=>x,fe:()=>T,f:()=>v,xz:()=>k,HW:()=>d,W1:()=>D,F3:()=>p,jo:()=>q,I0:()=>u,uG:()=>b,fE:()=>h,ud:()=>_,Jv:()=>l,signOut:()=>c,Hh:()=>s,XW:()=>w,_y:()=>C,AF:()=>y});var n=r(92373);let a="https://rgxhxgigemncqkskaprj.supabase.co",i="sb_publishable_D9M6qWPxdZ_aZ52k0mKfCA_Sn9RJHZU";if(!a||!i)throw Error("Missing Supabase environment variables");let o=(0,n.UU)(a,i);async function s(e,t,r){let{data:n,error:a}=await o.auth.signUp({email:e,password:t,options:{data:{name:r}}});return{data:n,error:a}}async function l(e,t){let{data:r,error:n}=await o.auth.signInWithPassword({email:e,password:t});return{data:r,error:n}}async function c(){let{error:e}=await o.auth.signOut();return{error:e}}async function d(){var e;let{data:t}=await o.auth.getSession();return null==t||null==(e=t.session)?void 0:e.user}async function g(e){let{data:t,error:r}=await o.from("transactions").insert([e]).select();return{data:t,error:r}}async function u(e){let{data:t,error:r}=await o.from("transactions").select("*").eq("user_id",e).order("date",{ascending:!1});return{data:t,error:r}}function p(e){let t,r=new Date,n=r.getFullYear(),a=r.getMonth(),i=new Date;switch(e){case"current-month":default:t=new Date(n,a,1);break;case"last-month":t=new Date(n,a-1,1),i=new Date(n,a,0);break;case"last-3-months":t=new Date(n,a-3,1);break;case"last-6-months":t=new Date(n,a-6,1);break;case"last-year":t=new Date(n-1,a,1);break;case"all-time":t=new Date(2020,0,1)}return{startDate:t.toISOString().split("T")[0],endDate:i.toISOString().split("T")[0]}}async function y(e,t){let{data:r,error:n}=await o.from("transactions").update(t).eq("id",e).select();return{data:r,error:n}}async function m(e){let{error:t}=await o.from("transactions").delete().eq("id",e);return{error:t}}async function f(e){let{error:t}=await o.from("transactions").delete().eq("user_id",e);return{error:t}}async function x(e,t){let{data:r,error:n}=await o.from("analysis_usage").select("*").eq("user_id",e).eq("month",t).single();return{data:r,error:n}}async function h(e,t){let{data:r,error:n}=await o.from("analysis_usage").select("*").eq("user_id",e).eq("month",t).single();if(n&&"PGRST116"===n.code){let{data:r,error:n}=await o.from("analysis_usage").insert([{user_id:e,month:t,usage_count:1}]).select();return{data:r,error:n}}if(n)return{data:null,error:n};let{data:a,error:i}=await o.from("analysis_usage").update({usage_count:((null==r?void 0:r.usage_count)||0)+1}).eq("user_id",e).eq("month",t).select();return{data:a,error:i}}async function b(e){let{data:t,error:r}=await o.from("user_roles").select("role").eq("user_id",e).single();return{role:(null==t?void 0:t.role)||"cliente",error:r}}async function j(){let{data:e,error:t}=await o.from("api_keys").select("key_name, key_value, description");return{data:e,error:t}}async function w(e,t){let{data:r,error:n}=await o.from("api_keys").update({key_value:t,updated_at:new Date().toISOString()}).eq("key_name",e).select();return{data:r,error:n}}async function T(e){let{data:t,error:r}=await o.from("category_limits").select("*").eq("user_id",e).order("category",{ascending:!0});return{data:t,error:r}}async function _(e,t,r){let{data:n}=await o.from("category_limits").select("id").eq("user_id",e).eq("category",t).single();if(null==n?void 0:n.id){let{data:e,error:t}=await o.from("category_limits").update({limit_amount:r,updated_at:new Date().toISOString()}).eq("id",n.id).select();return{data:e,error:t}}{let{data:n,error:a}=await o.from("category_limits").insert([{user_id:e,category:t,limit_amount:r}]).select();return{data:n,error:a}}}async function S(e){let{error:t}=await o.from("category_limits").delete().eq("id",e);return{error:t}}async function k(e){let t=new Date,r=new Date(t.getFullYear(),t.getMonth(),1).toISOString().split("T")[0],{data:n,error:a}=await o.from("transactions").select("category, amount").eq("user_id",e).eq("type","expense").gte("date",r);if(a||!n)return{data:{},error:a};let i={};return n.forEach(e=>{i[e.category]=(i[e.category]||0)+e.amount}),{data:i,error:null}}async function v(e){let t=new Date,r=new Date(t.getFullYear(),t.getMonth(),1),n=new Date(r.getTime()-1),a=new Date(n.getFullYear(),n.getMonth(),1).toISOString().split("T")[0],i=r.toISOString().split("T")[0],{data:s,error:l}=await o.from("transactions").select("category, amount").eq("user_id",e).eq("type","expense").gte("date",a).lt("date",i);if(l||!s)return{data:{},error:l};let c={};return s.forEach(e=>{c[e.category]=(c[e.category]||0)+e.amount}),{data:c,error:null}}async function q(e){let{data:t,error:r}=await o.from("recurring_expenses").select("*").eq("user_id",e).eq("is_active",!0).order("next_charge_date",{ascending:!0});return{data:t,error:r}}async function z(e){let{data:t,error:r}=await o.from("recurring_expenses").insert([e]).select();return{data:t,error:r}}async function Y(e){let{error:t}=await o.from("recurring_expenses").delete().eq("id",e);return{error:t}}async function D(e){let{data:t,error:r}=await o.from("financial_goals").select("*").eq("user_id",e).eq("is_active",!0).order("target_date",{ascending:!0});return{data:t,error:r}}async function I(e){let{data:t,error:r}=await o.from("financial_goals").insert([e]).select();return{data:t,error:r}}async function C(e,t){let{data:r,error:n}=await o.from("financial_goals").update(t).eq("id",e).select();return{data:r,error:n}}async function K(e){let{error:t}=await o.from("financial_goals").delete().eq("id",e);return{error:t}}}}]);