"use strict";(self.webpackChunk_N_E=self.webpackChunk_N_E||[]).push([[382],{24268:(e,n,t)=>{t.d(n,{Eo:()=>o,Il:()=>r,Tj:()=>i,Vq:()=>s,YK:()=>a,bm:()=>l});let i={primary:{50:"#f0f5ff",100:"#e0ebff",200:"#c1d7ff",300:"#a2c3ff",400:"#83afff",500:"#3b82f6",600:"#2563eb",700:"#1d4ed8",800:"#1e40af",900:"#1e3a8a"},secondary:{50:"#f9fafb",100:"#f3f4f6",200:"#e5e7eb",300:"#d1d5db",400:"#9ca3af",500:"#6b7280",600:"#4b5563",700:"#374151",800:"#1f2937",900:"#111827"},status:{success:"#10b981",warning:"#f59e0b",error:"#ef4444",info:"#0ea5e9"},background:{light:"#ffffff",lighter:"#f9fafb",gradient:"linear-gradient(135deg, #f0f5ff 0%, #ffffff 100%)"}},a={xs:"clamp(2px, 1vw, 4px)",sm:"clamp(6px, 1.5vw, 8px)",md:"clamp(12px, 2vw, 16px)",lg:"clamp(18px, 3vw, 24px)",xl:"clamp(24px, 4vw, 32px)",xxl:"clamp(32px, 5vw, 48px)"},r={h1:{fontSize:"clamp(28px, 6vw, 36px)",fontWeight:700,lineHeight:"1.2"},h2:{fontSize:"clamp(24px, 5vw, 28px)",fontWeight:700,lineHeight:"1.3"},h3:{fontSize:"clamp(18px, 4vw, 24px)",fontWeight:700,lineHeight:"1.4"},h4:{fontSize:"clamp(16px, 3vw, 20px)",fontWeight:600,lineHeight:"1.5"},body:{fontSize:"clamp(13px, 2vw, 14px)",fontWeight:400,lineHeight:"1.6"},small:{fontSize:"clamp(11px, 1.5vw, 12px)",fontWeight:400,lineHeight:"1.5"},label:{fontSize:"clamp(12px, 1.5vw, 13px)",fontWeight:600,lineHeight:"1.5"}},o={sm:"0 2px 8px rgba(0, 0, 0, 0.04)",md:"0 10px 24px rgba(0, 0, 0, 0.08)",lg:"0 20px 40px rgba(0, 0, 0, 0.12)",xl:"0 30px 60px rgba(0, 0, 0, 0.15)",blue:"0 8px 24px rgba(59, 130, 246, 0.3)"},s={sm:"6px",md:"8px",lg:"12px",xl:"16px",full:"50%"},l={fast:"all 0.2s ease",normal:"all 0.3s ease",slow:"all 0.5s ease"},c={background:i.background.light,borderRadius:s.xl,boxShadow:o.md,border:"1px solid ".concat(i.primary[100]),padding:a.xl,transition:l.normal};"linear-gradient(135deg, ".concat(i.primary[500]," 0%, ").concat(i.primary[600]," 100%)"),i.background.light,s.lg,l.normal,o.blue,"linear-gradient(135deg, ".concat(i.primary[600]," 0%, ").concat(i.primary[700]," 100%)"),o.lg,i.secondary[200],s.lg,i.background.light,l.normal,i.primary[500],i.primary[50],i.secondary[300],a.md},36382:(e,n,t)=>{t.d(n,{A:()=>f});var i=t(95155),a=t(9540),r=t(15870),o=t(84926),s=t(12115),l=t(52619),c=t.n(l),d=t(85998),u=t(65229),g=t(24268),p=t(75746);function x(e){let{userId:n}=e,[t,a]=(0,s.useState)(!1),[r,o]=(0,s.useState)([]),[l,c]=(0,s.useState)(!0);return(0,s.useEffect)(()=>{(async()=>{try{let[e,t,i]=await Promise.all([(0,p.fe)(n),(0,p.xz)(n),(0,p.f)(n)]),a=e.data||[],r=t.data||{},s=i.data||{},l=[];a.forEach(e=>{let n=r[e.category]||0,t=n/e.limit_amount*100,i=s[e.category]||0;n>e.limit_amount?l.push({id:"".concat(e.id,"-exceeded"),type:"limit_exceeded",category:e.category,icon:"\uD83D\uDEA8",message:"Limite excedido em ".concat(e.category),details:"Gastou R$ ".concat(n.toFixed(2)," de R$ ").concat(e.limit_amount.toFixed(2)),severity:"high"}):t>=80&&l.push({id:"".concat(e.id,"-approaching"),type:"approaching_limit",category:e.category,icon:"⚠️",message:"Pr\xf3ximo ao limite em ".concat(e.category),details:"".concat(t.toFixed(0),"% do seu limite"),severity:"medium"}),n>1.2*i&&i>0&&l.push({id:"".concat(e.id,"-overspend"),type:"overspending_vs_last_month",category:e.category,icon:"\uD83D\uDCC8",message:"Gastou mais em ".concat(e.category),details:"+".concat(((n/i-1)*100).toFixed(0),"% comparado ao m\xeas anterior"),severity:"low"})}),o(l)}catch(e){console.error("Error loading alerts:",e)}finally{c(!1)}})()},[n]),(0,i.jsxs)("div",{style:{position:"relative"},children:[(0,i.jsxs)("button",{onClick:()=>a(!t),style:{width:"44px",height:"44px",background:g.Tj.background.light,border:"1px solid ".concat(g.Tj.primary[200]),borderRadius:g.Vq.lg,display:"flex",alignItems:"center",justifyContent:"center",cursor:"pointer",transition:g.bm.normal,position:"relative"},onMouseEnter:e=>{e.currentTarget.style.background=g.Tj.primary[50]},onMouseLeave:e=>{e.currentTarget.style.background=g.Tj.background.light},children:[(0,i.jsx)(d.A,{size:20,color:g.Tj.primary[600]}),r.length>0&&(0,i.jsx)("div",{style:{position:"absolute",top:"-4px",right:"-4px",width:"24px",height:"24px",background:g.Tj.status.error,borderRadius:"50%",display:"flex",alignItems:"center",justifyContent:"center",color:"white",fontSize:"12px",fontWeight:700,border:"2px solid ".concat(g.Tj.background.light)},children:r.length})]}),t&&(0,i.jsxs)("div",{style:{position:"absolute",top:"calc(100% + 8px)",right:0,width:"400px",maxHeight:"600px",overflowY:"auto",backgroundColor:g.Tj.background.light,borderRadius:g.Vq.xl,boxShadow:g.Eo.lg,border:"1px solid ".concat(g.Tj.primary[100]),zIndex:1e3},onClick:e=>e.stopPropagation(),children:[(0,i.jsxs)("div",{style:{padding:g.YK.lg,borderBottom:"1px solid ".concat(g.Tj.primary[100]),display:"flex",justifyContent:"space-between",alignItems:"center"},children:[(0,i.jsx)("h3",{style:{fontSize:g.Il.body.fontSize,fontWeight:700,color:g.Tj.secondary[900],margin:0},children:"\uD83D\uDD14 Notifica\xe7\xf5es"}),(0,i.jsx)("button",{onClick:()=>a(!1),style:{background:"none",border:"none",cursor:"pointer",color:g.Tj.secondary[500],padding:0},children:(0,i.jsx)(u.A,{size:20})})]}),(0,i.jsx)("div",{style:{padding:g.YK.lg},children:0===r.length?(0,i.jsx)("p",{style:{fontSize:g.Il.small.fontSize,color:g.Tj.secondary[500],textAlign:"center",margin:0},children:"✨ Nenhuma notifica\xe7\xe3o no momento!"}):(0,i.jsx)("div",{style:{display:"flex",flexDirection:"column",gap:g.YK.md},children:r.map(e=>{let n="high"===e.severity?g.Tj.status.error+"15":"medium"===e.severity?g.Tj.status.warning+"15":g.Tj.primary[50],t="high"===e.severity?g.Tj.status.error+"30":"medium"===e.severity?g.Tj.status.warning+"30":g.Tj.primary[100];return(0,i.jsxs)("div",{style:{padding:g.YK.md,backgroundColor:n,border:"1px solid ".concat(t),borderRadius:g.Vq.lg,display:"flex",gap:g.YK.sm},children:[(0,i.jsx)("span",{style:{fontSize:"18px"},children:e.icon}),(0,i.jsxs)("div",{style:{flex:1},children:[(0,i.jsx)("p",{style:{fontSize:g.Il.small.fontSize,fontWeight:600,color:g.Tj.secondary[900],margin:0,marginBottom:g.YK.xs},children:e.message}),(0,i.jsx)("p",{style:{fontSize:g.Il.small.fontSize,color:g.Tj.secondary[600],margin:0},children:e.details})]})]},e.id)})})})]}),t&&(0,i.jsx)("div",{style:{position:"fixed",top:0,left:0,right:0,bottom:0,zIndex:999},onClick:()=>a(!1)})]})}function f(e){let{userName:n,onLogout:t}=e,[l,d]=(0,s.useState)(!1),[u,f]=(0,s.useState)("");(0,s.useEffect)(()=>{(async()=>{let e=await (0,p.HW)();e&&f(e.id)})()},[]);let m=async()=>{confirm("Tem certeza que deseja sair?")&&t()};return(0,i.jsxs)("header",{style:{background:g.Tj.background.light,borderBottom:"1px solid ".concat(g.Tj.primary[100]),boxShadow:g.Eo.sm,position:"sticky",top:0,zIndex:100,width:"100%"},children:[(0,i.jsx)("style",{children:"\n        * {\n          box-sizing: border-box;\n        }\n\n        .header-wrapper {\n          width: 100%;\n          padding: 12px;\n          display: flex;\n          justify-content: space-between;\n          align-items: center;\n          gap: 12px;\n        }\n\n        @media (min-width: 480px) {\n          .header-wrapper {\n            padding: 14px 16px;\n          }\n        }\n\n        @media (min-width: 768px) {\n          .header-wrapper {\n            padding: 16px 24px;\n          }\n        }\n\n        /* Logo */\n        .logo-section {\n          display: flex;\n          align-items: center;\n          gap: 8px;\n          flex-shrink: 0;\n        }\n\n        .logo-icon {\n          width: 32px;\n          height: 32px;\n          background: linear-gradient(135deg, #3b82f6 0%, #2563eb 100%);\n          border-radius: 8px;\n          display: flex;\n          align-items: center;\n          justify-content: center;\n          flex-shrink: 0;\n        }\n\n        .logo-text {\n          font-size: 16px;\n          font-weight: 700;\n          color: #111827;\n          white-space: nowrap;\n        }\n\n        @media (min-width: 480px) {\n          .logo-text {\n            font-size: 18px;\n          }\n        }\n\n        /* Center - User Info */\n        .user-section {\n          flex: 1;\n          display: flex;\n          align-items: center;\n          justify-content: center;\n          text-align: center;\n          min-width: 0;\n        }\n\n        .user-text {\n          font-size: 12px;\n          color: #374151;\n          margin: 0;\n          line-height: 1.3;\n        }\n\n        .user-text strong {\n          display: block;\n          font-size: 13px;\n          font-weight: 600;\n          color: #111827;\n        }\n\n        @media (min-width: 480px) {\n          .user-text {\n            font-size: 13px;\n          }\n          .user-text strong {\n            font-size: 14px;\n          }\n        }\n\n        /* Right - Actions */\n        .actions-section {\n          display: flex;\n          gap: 6px;\n          align-items: center;\n          flex-shrink: 0;\n        }\n\n        @media (min-width: 480px) {\n          .actions-section {\n            gap: 8px;\n          }\n        }\n\n        .action-button {\n          width: 36px;\n          height: 36px;\n          border-radius: 8px;\n          background: none;\n          border: 1px solid #e5e7eb;\n          display: flex;\n          align-items: center;\n          justify-content: center;\n          cursor: pointer;\n          transition: all 0.2s;\n          color: #374151;\n          flex-shrink: 0;\n        }\n\n        .action-button:hover {\n          background: #f9fafb;\n          border-color: #d1d5db;\n        }\n\n        .action-button svg {\n          width: 18px;\n          height: 18px;\n        }\n\n        @media (min-width: 480px) {\n          .action-button {\n            width: 40px;\n            height: 40px;\n          }\n          .action-button svg {\n            width: 20px;\n            height: 20px;\n          }\n        }\n\n        /* Mobile Menu */\n        .mobile-menu {\n          position: absolute;\n          top: 100%;\n          right: 0;\n          background: white;\n          border-bottom: 1px solid #e5e7eb;\n          width: 100%;\n          display: none;\n          flex-direction: column;\n          z-index: 50;\n        }\n\n        .mobile-menu.open {\n          display: flex;\n        }\n\n        .menu-item {\n          padding: 12px 16px;\n          border-bottom: 1px solid #f3f4f6;\n          display: flex;\n          align-items: center;\n          gap: 12px;\n          font-size: 13px;\n          color: #374151;\n          cursor: pointer;\n          transition: background 0.2s;\n          text-decoration: none;\n        }\n\n        .menu-item:hover {\n          background: #f9fafb;\n        }\n\n        .menu-item svg {\n          width: 18px;\n          height: 18px;\n          flex-shrink: 0;\n        }\n\n        .menu-item.danger {\n          color: #ef4444;\n        }\n      "}),(0,i.jsxs)("div",{className:"header-wrapper",children:[(0,i.jsxs)("div",{className:"logo-section",children:[(0,i.jsx)("div",{className:"logo-icon",children:(0,i.jsxs)("svg",{width:"18",height:"18",viewBox:"0 0 24 24",fill:"none",stroke:"white",strokeWidth:"2",children:[(0,i.jsx)("circle",{cx:"12",cy:"12",r:"1"}),(0,i.jsx)("circle",{cx:"19",cy:"12",r:"1"}),(0,i.jsx)("circle",{cx:"5",cy:"12",r:"1"}),(0,i.jsx)("path",{d:"M12 5v14m-7-7h14"})]})}),(0,i.jsx)("div",{className:"logo-text",children:"FinControl"})]}),(0,i.jsx)("div",{className:"user-section",children:(0,i.jsxs)("p",{className:"user-text",children:[(0,i.jsxs)("strong",{children:["Bem-vindo, ",n.split(" ")[0],"!"]}),"Seus dados est\xe3o seguros"]})}),(0,i.jsxs)("div",{className:"actions-section",children:[u&&(0,i.jsx)(x,{userId:u}),(0,i.jsx)("button",{onClick:()=>d(!l),className:"action-button",title:"Menu",children:(0,i.jsx)(a.A,{size:20})})]})]}),(0,i.jsxs)("div",{className:"mobile-menu ".concat(l?"open":""),children:[(0,i.jsxs)(c(),{href:"/settings",className:"menu-item",children:[(0,i.jsx)(r.A,{size:18}),"Configura\xe7\xf5es"]}),(0,i.jsxs)("button",{onClick:m,className:"menu-item danger",style:{border:"none",background:"none",width:"100%",textAlign:"left"},children:[(0,i.jsx)(o.A,{size:18}),"Sair"]})]})]})}},75746:(e,n,t)=>{t.d(n,{EP:()=>C,tS:()=>T,yY:()=>u,m:()=>m,$L:()=>k,UI:()=>E,$S:()=>D,Uw:()=>f,_F:()=>w,M1:()=>h,fe:()=>_,f:()=>z,xz:()=>S,HW:()=>d,W1:()=>I,F3:()=>p,jo:()=>q,I0:()=>g,uG:()=>b,fE:()=>y,ud:()=>v,Jv:()=>l,signOut:()=>c,Hh:()=>s,XW:()=>j,_y:()=>W,AF:()=>x});var i=t(92373);let a="https://rgxhxgigemncqkskaprj.supabase.co",r="sb_publishable_D9M6qWPxdZ_aZ52k0mKfCA_Sn9RJHZU";if(!a||!r)throw Error("Missing Supabase environment variables");let o=(0,i.UU)(a,r);async function s(e,n,t){let{data:i,error:a}=await o.auth.signUp({email:e,password:n,options:{data:{name:t}}});return{data:i,error:a}}async function l(e,n){let{data:t,error:i}=await o.auth.signInWithPassword({email:e,password:n});return{data:t,error:i}}async function c(){let{error:e}=await o.auth.signOut();return{error:e}}async function d(){var e;let{data:n}=await o.auth.getSession();return null==n||null==(e=n.session)?void 0:e.user}async function u(e){let{data:n,error:t}=await o.from("transactions").insert([e]).select();return{data:n,error:t}}async function g(e){let{data:n,error:t}=await o.from("transactions").select("*").eq("user_id",e).order("date",{ascending:!1});return{data:n,error:t}}function p(e){let n,t=new Date,i=t.getFullYear(),a=t.getMonth(),r=new Date;switch(e){case"current-month":default:n=new Date(i,a,1);break;case"last-month":n=new Date(i,a-1,1),r=new Date(i,a,0);break;case"last-3-months":n=new Date(i,a-3,1);break;case"last-6-months":n=new Date(i,a-6,1);break;case"last-year":n=new Date(i-1,a,1);break;case"all-time":n=new Date(2020,0,1)}return{startDate:n.toISOString().split("T")[0],endDate:r.toISOString().split("T")[0]}}async function x(e,n){let{data:t,error:i}=await o.from("transactions").update(n).eq("id",e).select();return{data:t,error:i}}async function f(e){let{error:n}=await o.from("transactions").delete().eq("id",e);return{error:n}}async function m(e){let{error:n}=await o.from("transactions").delete().eq("user_id",e);return{error:n}}async function h(e,n){let{data:t,error:i}=await o.from("analysis_usage").select("*").eq("user_id",e).eq("month",n).single();return{data:t,error:i}}async function y(e,n){let{data:t,error:i}=await o.from("analysis_usage").select("*").eq("user_id",e).eq("month",n).single();if(i&&"PGRST116"===i.code){let{data:t,error:i}=await o.from("analysis_usage").insert([{user_id:e,month:n,usage_count:1}]).select();return{data:t,error:i}}if(i)return{data:null,error:i};let{data:a,error:r}=await o.from("analysis_usage").update({usage_count:((null==t?void 0:t.usage_count)||0)+1}).eq("user_id",e).eq("month",n).select();return{data:a,error:r}}async function b(e){let{data:n,error:t}=await o.from("user_roles").select("role").eq("user_id",e).single();return{role:(null==n?void 0:n.role)||"cliente",error:t}}async function w(){let{data:e,error:n}=await o.from("api_keys").select("key_name, key_value, description");return{data:e,error:n}}async function j(e,n){let{data:t,error:i}=await o.from("api_keys").update({key_value:n,updated_at:new Date().toISOString()}).eq("key_name",e).select();return{data:t,error:i}}async function _(e){let{data:n,error:t}=await o.from("category_limits").select("*").eq("user_id",e).order("category",{ascending:!0});return{data:n,error:t}}async function v(e,n,t){let{data:i}=await o.from("category_limits").select("id").eq("user_id",e).eq("category",n).single();if(null==i?void 0:i.id){let{data:e,error:n}=await o.from("category_limits").update({limit_amount:t,updated_at:new Date().toISOString()}).eq("id",i.id).select();return{data:e,error:n}}{let{data:i,error:a}=await o.from("category_limits").insert([{user_id:e,category:n,limit_amount:t}]).select();return{data:i,error:a}}}async function k(e){let{error:n}=await o.from("category_limits").delete().eq("id",e);return{error:n}}async function S(e){let n=new Date,t=new Date(n.getFullYear(),n.getMonth(),1).toISOString().split("T")[0],{data:i,error:a}=await o.from("transactions").select("category, amount").eq("user_id",e).eq("type","expense").gte("date",t);if(a||!i)return{data:{},error:a};let r={};return i.forEach(e=>{r[e.category]=(r[e.category]||0)+e.amount}),{data:r,error:null}}async function z(e){let n=new Date,t=new Date(n.getFullYear(),n.getMonth(),1),i=new Date(t.getTime()-1),a=new Date(i.getFullYear(),i.getMonth(),1).toISOString().split("T")[0],r=t.toISOString().split("T")[0],{data:s,error:l}=await o.from("transactions").select("category, amount").eq("user_id",e).eq("type","expense").gte("date",a).lt("date",r);if(l||!s)return{data:{},error:l};let c={};return s.forEach(e=>{c[e.category]=(c[e.category]||0)+e.amount}),{data:c,error:null}}async function q(e){let{data:n,error:t}=await o.from("recurring_expenses").select("*").eq("user_id",e).eq("is_active",!0).order("next_charge_date",{ascending:!0});return{data:n,error:t}}async function T(e){let{data:n,error:t}=await o.from("recurring_expenses").insert([e]).select();return{data:n,error:t}}async function D(e){let{error:n}=await o.from("recurring_expenses").delete().eq("id",e);return{error:n}}async function I(e){let{data:n,error:t}=await o.from("financial_goals").select("*").eq("user_id",e).eq("is_active",!0).order("target_date",{ascending:!0});return{data:n,error:t}}async function C(e){let{data:n,error:t}=await o.from("financial_goals").insert([e]).select();return{data:n,error:t}}async function W(e,n){let{data:t,error:i}=await o.from("financial_goals").update(n).eq("id",e).select();return{data:t,error:i}}async function E(e){let{error:n}=await o.from("financial_goals").delete().eq("id",e);return{error:n}}}}]);