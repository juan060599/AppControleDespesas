(self.webpackChunk_N_E=self.webpackChunk_N_E||[]).push([[105],{36430:(e,t,r)=>{Promise.resolve().then(r.bind(r,78623))},78623:(e,t,r)=>{"use strict";r.r(t),r.d(t,{default:()=>ee});var o=r(95155),n=r(12115),a=r(20063),s=r(75746),i=r(26991),l=r(94632),d=r(68425),c=r(47734),g=r(73697),u=r(23508),m=r(26736),y=r(24268);function p(e){let{title:t,value:r,icon:n,trend:a,subtitle:s,backgroundColor:i=y.Tj.primary[50]}=e;return(0,o.jsxs)("div",{style:{background:y.Tj.background.light,borderRadius:y.Vq.xl,boxShadow:y.Eo.md,border:"1px solid ".concat(y.Tj.primary[100]),padding:y.YK.xl,minHeight:"140px",display:"flex",flexDirection:"column",justifyContent:"space-between",position:"relative",overflow:"hidden",transition:y.bm.normal,cursor:"pointer",":hover":{boxShadow:y.Eo.lg,transform:"translateY(-2px)"}},onMouseEnter:e=>{e.currentTarget.style.boxShadow=y.Eo.lg,e.currentTarget.style.transform="translateY(-2px)"},onMouseLeave:e=>{e.currentTarget.style.boxShadow=y.Eo.md,e.currentTarget.style.transform="translateY(0)"},children:[(0,o.jsx)("div",{style:{position:"absolute",top:"-40px",right:"-40px",width:"120px",height:"120px",background:"radial-gradient(circle, ".concat(i,"60 0%, transparent 70%)"),borderRadius:"50%",pointerEvents:"none"}}),(0,o.jsxs)("div",{style:{display:"flex",justifyContent:"space-between",alignItems:"flex-start",marginBottom:y.YK.sm,position:"relative",zIndex:1},children:[(0,o.jsxs)("div",{children:[(0,o.jsx)("p",{style:{fontSize:y.Il.small.fontSize,color:y.Tj.secondary[500],fontWeight:600,margin:0,marginBottom:y.YK.xs},children:t}),s&&(0,o.jsx)("p",{style:{fontSize:"11px",color:y.Tj.secondary[400],margin:0},children:s})]}),(0,o.jsx)("div",{style:{width:"48px",height:"48px",background:i,borderRadius:y.Vq.lg,display:"flex",alignItems:"center",justifyContent:"center",flexShrink:0},children:n})]}),(0,o.jsxs)("div",{style:{display:"flex",alignItems:"flex-end",justifyContent:"space-between",position:"relative",zIndex:1},children:[(0,o.jsx)("div",{children:(0,o.jsx)("p",{style:{fontSize:"28px",fontWeight:700,color:y.Tj.secondary[900],margin:0,lineHeight:"1.2"},children:r})}),void 0!==a&&(0,o.jsxs)("div",{style:{display:"flex",alignItems:"center",gap:y.YK.xs,padding:"".concat(y.YK.xs," ").concat(y.YK.md),background:a>0?y.Tj.status.success+"15":y.Tj.status.error+"15",borderRadius:y.Vq.md},children:[a>0?(0,o.jsxs)("svg",{width:"14",height:"14",viewBox:"0 0 24 24",fill:"none",stroke:y.Tj.status.success,strokeWidth:"2",children:[(0,o.jsx)("polyline",{points:"23 6 13.46 15.54 8 10.09 1 17"}),(0,o.jsx)("polyline",{points:"23 6 23 16 13 16"})]}):(0,o.jsxs)("svg",{width:"14",height:"14",viewBox:"0 0 24 24",fill:"none",stroke:y.Tj.status.error,strokeWidth:"2",children:[(0,o.jsx)("polyline",{points:"23 18 13.46 8.46 8 13.91 1 7"}),(0,o.jsx)("polyline",{points:"23 18 23 8 13 8"})]}),(0,o.jsxs)("span",{style:{fontSize:"12px",fontWeight:600,color:a>0?y.Tj.status.success:y.Tj.status.error},children:[Math.abs(a),"%"]})]})]})]})}var x=r(6191),h=r(71360);let j={daily:"Di\xe1ria",weekly:"Semanal",monthly:"Mensal",quarterly:"Trimestral",yearly:"Anual"},b={daily:30,weekly:4.33,monthly:1,quarterly:.25,yearly:1/12};function f(e){let{userId:t}=e,[r,a]=(0,n.useState)([]),[i,l]=(0,n.useState)(!0),[d,c]=(0,n.useState)(!1),[g,u]=(0,n.useState)({description:"",amount:"",category:"",frequency:"monthly",next_charge_date:"",notes:""});(0,n.useEffect)(()=>{m()},[t]);let m=async()=>{try{let{data:e}=await (0,s.jo)(t);a(e||[])}catch(e){console.error("Error loading recurring expenses:",e)}finally{l(!1)}},p=async()=>{if(!g.description||!g.amount||!g.category||!g.next_charge_date)return void alert("Preencha todos os campos obrigat\xf3rios");try{await (0,s.tS)({user_id:t,description:g.description,amount:parseFloat(g.amount),category:g.category,frequency:g.frequency,next_charge_date:g.next_charge_date,notes:g.notes||void 0,is_active:!0}),u({description:"",amount:"",category:"",frequency:"monthly",next_charge_date:"",notes:""}),c(!1),m()}catch(e){console.error("Error adding recurring expense:",e),alert("Erro ao adicionar despesa")}},f=async e=>{if(confirm("Deseja remover esta assinatura?"))try{await (0,s.$S)(e),m()}catch(e){console.error("Error deleting expense:",e)}};return(0,o.jsxs)("div",{style:{background:y.Tj.background.light,borderRadius:y.Vq.xl,boxShadow:y.Eo.md,border:"1px solid ".concat(y.Tj.primary[100]),overflow:"hidden"},children:[(0,o.jsxs)("div",{style:{padding:y.YK.lg,background:"linear-gradient(135deg, ".concat(y.Tj.primary[50]," 0%, ").concat(y.Tj.primary[100]," 100%)"),borderBottom:"1px solid ".concat(y.Tj.primary[100]),display:"flex",justifyContent:"space-between",alignItems:"center"},children:[(0,o.jsxs)("div",{children:[(0,o.jsx)("h3",{style:{fontSize:y.Il.h3.fontSize,fontWeight:700,color:y.Tj.secondary[900],margin:0,marginBottom:y.YK.xs},children:"\uD83D\uDCB3 Assinaturas & Gastos Recorrentes"}),(0,o.jsx)("p",{style:{fontSize:y.Il.small.fontSize,color:y.Tj.secondary[600],margin:0},children:"Rastreie suas despesas peri\xf3dicas"})]}),(0,o.jsxs)("button",{onClick:()=>c(!d),style:{background:y.Tj.primary[600],border:"none",color:"white",padding:"".concat(y.YK.md," ").concat(y.YK.lg),borderRadius:y.Vq.lg,cursor:"pointer",display:"flex",alignItems:"center",gap:y.YK.sm,fontSize:y.Il.body.fontSize,fontWeight:600,transition:y.bm.normal,boxShadow:y.Eo.sm},onMouseOver:e=>{e.target.style.background=y.Tj.primary[700],e.target.style.boxShadow=y.Eo.md},onMouseOut:e=>{e.target.style.background=y.Tj.primary[600],e.target.style.boxShadow=y.Eo.sm},children:[(0,o.jsx)(x.A,{size:18}),d?"Cancelar":"Adicionar"]})]}),d&&(0,o.jsxs)("div",{style:{padding:y.YK.lg,borderBottom:"1px solid ".concat(y.Tj.primary[100]),backgroundColor:y.Tj.primary[50]},children:[(0,o.jsxs)("div",{style:{display:"grid",gridTemplateColumns:"1fr 1fr",gap:y.YK.md,marginBottom:y.YK.md},children:[(0,o.jsxs)("div",{children:[(0,o.jsx)("label",{style:{display:"block",fontSize:y.Il.small.fontSize,fontWeight:600,color:y.Tj.secondary[700],marginBottom:y.YK.xs},children:"Descri\xe7\xe3o"}),(0,o.jsx)("input",{type:"text",placeholder:"Netflix, Spotify, etc",value:g.description,onChange:e=>u({...g,description:e.target.value}),style:{width:"100%",padding:y.YK.md,border:"1px solid ".concat(y.Tj.primary[200]),borderRadius:y.Vq.lg,fontSize:y.Il.body.fontSize,boxSizing:"border-box",transition:y.bm.normal,outline:"none"},onFocus:e=>{e.currentTarget.style.borderColor=y.Tj.primary[400],e.currentTarget.style.boxShadow="0 0 0 3px ".concat(y.Tj.primary[100])},onBlur:e=>{e.currentTarget.style.borderColor=y.Tj.primary[200],e.currentTarget.style.boxShadow="none"}})]}),(0,o.jsxs)("div",{children:[(0,o.jsx)("label",{style:{display:"block",fontSize:y.Il.small.fontSize,fontWeight:600,color:y.Tj.secondary[700],marginBottom:y.YK.xs},children:"Valor (R$)"}),(0,o.jsx)("input",{type:"number",placeholder:"0.00",step:"0.01",value:g.amount,onChange:e=>u({...g,amount:e.target.value}),style:{width:"100%",padding:y.YK.md,border:"1px solid ".concat(y.Tj.primary[200]),borderRadius:y.Vq.lg,fontSize:y.Il.body.fontSize,boxSizing:"border-box",transition:y.bm.normal,outline:"none"},onFocus:e=>{e.currentTarget.style.borderColor=y.Tj.primary[400],e.currentTarget.style.boxShadow="0 0 0 3px ".concat(y.Tj.primary[100])},onBlur:e=>{e.currentTarget.style.borderColor=y.Tj.primary[200],e.currentTarget.style.boxShadow="none"}})]})]}),(0,o.jsxs)("div",{style:{display:"grid",gridTemplateColumns:"1fr 1fr",gap:y.YK.md,marginBottom:y.YK.md},children:[(0,o.jsxs)("div",{children:[(0,o.jsx)("label",{style:{display:"block",fontSize:y.Il.small.fontSize,fontWeight:600,color:y.Tj.secondary[700],marginBottom:y.YK.xs},children:"Categoria"}),(0,o.jsx)("input",{type:"text",placeholder:"Streaming, Sa\xfade, etc",value:g.category,onChange:e=>u({...g,category:e.target.value}),style:{width:"100%",padding:y.YK.md,border:"1px solid ".concat(y.Tj.primary[200]),borderRadius:y.Vq.lg,fontSize:y.Il.body.fontSize,boxSizing:"border-box",transition:y.bm.normal,outline:"none"},onFocus:e=>{e.currentTarget.style.borderColor=y.Tj.primary[400],e.currentTarget.style.boxShadow="0 0 0 3px ".concat(y.Tj.primary[100])},onBlur:e=>{e.currentTarget.style.borderColor=y.Tj.primary[200],e.currentTarget.style.boxShadow="none"}})]}),(0,o.jsxs)("div",{children:[(0,o.jsx)("label",{style:{display:"block",fontSize:y.Il.small.fontSize,fontWeight:600,color:y.Tj.secondary[700],marginBottom:y.YK.xs},children:"Frequ\xeancia"}),(0,o.jsx)("select",{value:g.frequency,onChange:e=>u({...g,frequency:e.target.value}),style:{width:"100%",padding:y.YK.md,border:"1px solid ".concat(y.Tj.primary[200]),borderRadius:y.Vq.lg,fontSize:y.Il.body.fontSize,boxSizing:"border-box",background:"white",cursor:"pointer",transition:y.bm.normal,outline:"none"},onFocus:e=>{e.currentTarget.style.borderColor=y.Tj.primary[400],e.currentTarget.style.boxShadow="0 0 0 3px ".concat(y.Tj.primary[100])},onBlur:e=>{e.currentTarget.style.borderColor=y.Tj.primary[200],e.currentTarget.style.boxShadow="none"},children:Object.entries(j).map(e=>{let[t,r]=e;return(0,o.jsx)("option",{value:t,children:r},t)})})]})]}),(0,o.jsxs)("div",{style:{marginBottom:y.YK.md},children:[(0,o.jsx)("label",{style:{display:"block",fontSize:y.Il.small.fontSize,fontWeight:600,color:y.Tj.secondary[700],marginBottom:y.YK.xs},children:"Pr\xf3xima Cobran\xe7a"}),(0,o.jsx)("input",{type:"date",value:g.next_charge_date,onChange:e=>u({...g,next_charge_date:e.target.value}),style:{width:"100%",padding:y.YK.md,border:"1px solid ".concat(y.Tj.primary[200]),borderRadius:y.Vq.lg,fontSize:y.Il.body.fontSize,boxSizing:"border-box",transition:y.bm.normal,outline:"none"},onFocus:e=>{e.currentTarget.style.borderColor=y.Tj.primary[400],e.currentTarget.style.boxShadow="0 0 0 3px ".concat(y.Tj.primary[100])},onBlur:e=>{e.currentTarget.style.borderColor=y.Tj.primary[200],e.currentTarget.style.boxShadow="none"}})]}),(0,o.jsxs)("div",{style:{display:"flex",gap:y.YK.md},children:[(0,o.jsx)("button",{onClick:p,style:{background:y.Tj.status.success,color:"white",border:"none",padding:"".concat(y.YK.md," ").concat(y.YK.xl),borderRadius:y.Vq.lg,cursor:"pointer",fontWeight:600,fontSize:y.Il.body.fontSize,transition:y.bm.normal,boxShadow:y.Eo.sm,flex:1},onMouseOver:e=>{e.target.style.background=y.Tj.status.success+"dd",e.target.style.boxShadow=y.Eo.md},onMouseOut:e=>{e.target.style.background=y.Tj.status.success,e.target.style.boxShadow=y.Eo.sm},children:"Salvar"}),(0,o.jsx)("button",{onClick:()=>c(!1),style:{background:y.Tj.secondary[100],color:y.Tj.secondary[900],border:"none",padding:"".concat(y.YK.md," ").concat(y.YK.xl),borderRadius:y.Vq.lg,cursor:"pointer",fontWeight:600,fontSize:y.Il.body.fontSize,transition:y.bm.normal,flex:1},onMouseOver:e=>{e.target.style.background=y.Tj.secondary[200]},onMouseOut:e=>{e.target.style.background=y.Tj.secondary[100]},children:"Cancelar"})]})]}),(0,o.jsx)("div",{style:{padding:y.YK.lg},children:i?(0,o.jsx)("p",{style:{textAlign:"center",color:y.Tj.secondary[500]},children:"Carregando..."}):0===r.length?(0,o.jsxs)("div",{style:{textAlign:"center",padding:"".concat(y.YK.lg," 0")},children:[(0,o.jsx)("p",{style:{color:y.Tj.secondary[500],margin:0,marginBottom:y.YK.md,fontSize:"16px"},children:"Nenhuma assinatura registrada"}),(0,o.jsx)("p",{style:{color:y.Tj.secondary[400],fontSize:y.Il.small.fontSize,margin:0},children:'Clique em "Adicionar" para come\xe7ar a rastrear'})]}):(0,o.jsxs)(o.Fragment,{children:[(0,o.jsx)("div",{style:{marginBottom:y.YK.lg},children:r.map(e=>(0,o.jsxs)("div",{style:{display:"flex",justifyContent:"space-between",alignItems:"center",padding:y.YK.md,marginBottom:y.YK.sm,border:"1px solid ".concat(y.Tj.primary[100]),borderRadius:y.Vq.lg,background:y.Tj.background.light,transition:y.bm.normal},onMouseOver:e=>{e.currentTarget.style.background=y.Tj.primary[50],e.currentTarget.style.boxShadow=y.Eo.sm},onMouseOut:e=>{e.currentTarget.style.background=y.Tj.background.light,e.currentTarget.style.boxShadow="none"},children:[(0,o.jsxs)("div",{style:{flex:1},children:[(0,o.jsx)("p",{style:{fontSize:y.Il.body.fontSize,fontWeight:600,color:y.Tj.secondary[900],margin:0,marginBottom:y.YK.xs},children:e.description}),(0,o.jsxs)("div",{style:{display:"flex",gap:y.YK.md,fontSize:y.Il.small.fontSize,color:y.Tj.secondary[500],flexWrap:"wrap"},children:[(0,o.jsxs)("span",{style:{fontWeight:600,color:y.Tj.primary[600]},children:["R$ ",e.amount.toFixed(2)]}),(0,o.jsx)("span",{children:"•"}),(0,o.jsx)("span",{children:j[e.frequency]}),(0,o.jsx)("span",{children:"•"}),(0,o.jsx)("span",{style:{background:y.Tj.primary[50],padding:"2px 8px",borderRadius:y.Vq.md},children:e.category})]})]}),(0,o.jsx)("button",{onClick:()=>f(e.id),style:{background:y.Tj.status.error+"15",border:"none",color:y.Tj.status.error,padding:"".concat(y.YK.sm," ").concat(y.YK.md),borderRadius:y.Vq.lg,cursor:"pointer",transition:y.bm.normal,marginLeft:y.YK.md},onMouseOver:e=>{e.target.style.background=y.Tj.status.error+"25"},onMouseOut:e=>{e.target.style.background=y.Tj.status.error+"15"},children:(0,o.jsx)(h.A,{size:16})})]},e.id))}),(0,o.jsxs)("div",{style:{padding:y.YK.lg,background:y.Tj.primary[50],borderRadius:y.Vq.lg,border:"2px solid ".concat(y.Tj.primary[200]),textAlign:"center"},children:[(0,o.jsx)("p",{style:{fontSize:y.Il.small.fontSize,color:y.Tj.secondary[600],margin:0,marginBottom:y.YK.xs,textTransform:"uppercase",letterSpacing:"0.5px",fontWeight:600},children:"Total Mensal Estimado"}),(0,o.jsxs)("p",{style:{fontSize:"28px",fontWeight:700,color:y.Tj.primary[600],margin:0},children:["R$ ",r.reduce((e,t)=>{let r=b[t.frequency]||1;return e+t.amount*r},0).toFixed(2)]})]})]})})]})}let T={vacation:"✈️ F\xe9rias",emergency_fund:"\uD83D\uDEA8 Fundo de Emerg\xeancia",debt_payoff:"\uD83D\uDCB3 Pagar D\xedvida",investment:"\uD83D\uDCC8 Investimento",purchase:"\uD83D\uDECD️ Compra",other:"\uD83D\uDCCC Outro"},S={vacation:"✈️",emergency_fund:"\uD83D\uDEA8",debt_payoff:"\uD83D\uDCB3",investment:"\uD83D\uDCC8",purchase:"\uD83D\uDECD️",other:"\uD83D\uDCCC"},v={vacation:y.Tj.status.success,emergency_fund:y.Tj.status.warning,debt_payoff:y.Tj.status.error,investment:y.Tj.primary[500],purchase:y.Tj.secondary[500],other:y.Tj.secondary[400]};function z(e){let{userId:t}=e,[r,a]=(0,n.useState)([]),[i,l]=(0,n.useState)(!0),[d,c]=(0,n.useState)(!1),[g,u]=(0,n.useState)({name:"",description:"",target_amount:"",goal_type:"investment",target_date:""});(0,n.useEffect)(()=>{m()},[t]);let m=async()=>{try{let{data:e}=await (0,s.W1)(t);a(e||[])}catch(e){console.error("Error loading financial goals:",e)}finally{l(!1)}},p=async()=>{if(!g.name||!g.target_amount||!g.target_date)return void alert("Preencha todos os campos obrigat\xf3rios");try{await (0,s.EP)({user_id:t,name:g.name,description:g.description||void 0,target_amount:parseFloat(g.target_amount),current_amount:0,goal_type:g.goal_type,target_date:g.target_date,icon:S[g.goal_type]||"\uD83D\uDCCC",color:v[g.goal_type]||y.Tj.secondary[400],is_active:!0}),u({name:"",description:"",target_amount:"",goal_type:"investment",target_date:""}),c(!1),m()}catch(e){console.error("Error adding goal:",e),alert("Erro ao criar objetivo")}},j=async e=>{if(confirm("Deseja remover este objetivo?"))try{await (0,s.UI)(e),m()}catch(e){console.error("Error deleting goal:",e)}},b=async(e,t)=>{if(t<0||t>e.target_amount)return void alert("Valor deve estar entre 0 e o valor alvo");try{await (0,s._y)(e.id,{current_amount:t}),m()}catch(e){console.error("Error updating goal:",e)}};return(0,o.jsxs)("div",{style:{background:y.Tj.background.light,borderRadius:y.Vq.xl,boxShadow:y.Eo.md,border:"1px solid ".concat(y.Tj.secondary[100]),overflow:"hidden"},children:[(0,o.jsxs)("div",{style:{padding:y.YK.lg,background:"linear-gradient(135deg, ".concat(y.Tj.secondary[50]," 0%, ").concat(y.Tj.secondary[100]," 100%)"),borderBottom:"1px solid ".concat(y.Tj.secondary[100]),display:"flex",justifyContent:"space-between",alignItems:"center"},children:[(0,o.jsxs)("div",{children:[(0,o.jsx)("h3",{style:{fontSize:y.Il.h3.fontSize,fontWeight:700,color:y.Tj.secondary[900],margin:0,marginBottom:y.YK.xs},children:"\uD83C\uDFAF Objetivos Financeiros"}),(0,o.jsx)("p",{style:{fontSize:y.Il.small.fontSize,color:y.Tj.secondary[600],margin:0},children:"Defina metas e acompanhe seu progresso"})]}),(0,o.jsxs)("button",{onClick:()=>c(!d),style:{background:y.Tj.secondary[600],border:"none",color:"white",padding:"".concat(y.YK.md," ").concat(y.YK.lg),borderRadius:y.Vq.lg,cursor:"pointer",display:"flex",alignItems:"center",gap:y.YK.sm,fontSize:y.Il.body.fontSize,fontWeight:600,transition:y.bm.normal,boxShadow:y.Eo.sm},onMouseOver:e=>{e.target.style.background=y.Tj.secondary[700],e.target.style.boxShadow=y.Eo.md},onMouseOut:e=>{e.target.style.background=y.Tj.secondary[600],e.target.style.boxShadow=y.Eo.sm},children:[(0,o.jsx)(x.A,{size:18}),d?"Cancelar":"Adicionar"]})]}),d&&(0,o.jsxs)("div",{style:{padding:y.YK.lg,borderBottom:"1px solid ".concat(y.Tj.secondary[100]),backgroundColor:y.Tj.secondary[50]},children:[(0,o.jsxs)("div",{style:{display:"grid",gridTemplateColumns:"1fr 1fr",gap:y.YK.md,marginBottom:y.YK.md},children:[(0,o.jsxs)("div",{children:[(0,o.jsx)("label",{style:{display:"block",fontSize:y.Il.small.fontSize,fontWeight:600,color:y.Tj.secondary[700],marginBottom:y.YK.xs},children:"Nome do Objetivo"}),(0,o.jsx)("input",{type:"text",placeholder:"Ex: Viagem para Paris",value:g.name,onChange:e=>u({...g,name:e.target.value}),style:{width:"100%",padding:y.YK.md,border:"1px solid ".concat(y.Tj.secondary[200]),borderRadius:y.Vq.lg,fontSize:y.Il.body.fontSize,boxSizing:"border-box",transition:y.bm.normal,outline:"none"},onFocus:e=>{e.currentTarget.style.borderColor=y.Tj.secondary[400],e.currentTarget.style.boxShadow="0 0 0 3px ".concat(y.Tj.secondary[100])},onBlur:e=>{e.currentTarget.style.borderColor=y.Tj.secondary[200],e.currentTarget.style.boxShadow="none"}})]}),(0,o.jsxs)("div",{children:[(0,o.jsx)("label",{style:{display:"block",fontSize:y.Il.small.fontSize,fontWeight:600,color:y.Tj.secondary[700],marginBottom:y.YK.xs},children:"Tipo de Objetivo"}),(0,o.jsx)("select",{value:g.goal_type,onChange:e=>u({...g,goal_type:e.target.value}),style:{width:"100%",padding:y.YK.md,border:"1px solid ".concat(y.Tj.secondary[200]),borderRadius:y.Vq.lg,fontSize:y.Il.body.fontSize,boxSizing:"border-box",background:"white",cursor:"pointer",transition:y.bm.normal,outline:"none"},onFocus:e=>{e.currentTarget.style.borderColor=y.Tj.secondary[400],e.currentTarget.style.boxShadow="0 0 0 3px ".concat(y.Tj.secondary[100])},onBlur:e=>{e.currentTarget.style.borderColor=y.Tj.secondary[200],e.currentTarget.style.boxShadow="none"},children:Object.entries(T).map(e=>{let[t,r]=e;return(0,o.jsx)("option",{value:t,children:r},t)})})]})]}),(0,o.jsxs)("div",{style:{display:"grid",gridTemplateColumns:"1fr 1fr",gap:y.YK.md,marginBottom:y.YK.md},children:[(0,o.jsxs)("div",{children:[(0,o.jsx)("label",{style:{display:"block",fontSize:y.Il.small.fontSize,fontWeight:600,color:y.Tj.secondary[700],marginBottom:y.YK.xs},children:"Valor Alvo (R$)"}),(0,o.jsx)("input",{type:"number",placeholder:"0.00",step:"0.01",value:g.target_amount,onChange:e=>u({...g,target_amount:e.target.value}),style:{width:"100%",padding:y.YK.md,border:"1px solid ".concat(y.Tj.secondary[200]),borderRadius:y.Vq.lg,fontSize:y.Il.body.fontSize,boxSizing:"border-box",transition:y.bm.normal,outline:"none"},onFocus:e=>{e.currentTarget.style.borderColor=y.Tj.secondary[400],e.currentTarget.style.boxShadow="0 0 0 3px ".concat(y.Tj.secondary[100])},onBlur:e=>{e.currentTarget.style.borderColor=y.Tj.secondary[200],e.currentTarget.style.boxShadow="none"}})]}),(0,o.jsxs)("div",{children:[(0,o.jsx)("label",{style:{display:"block",fontSize:y.Il.small.fontSize,fontWeight:600,color:y.Tj.secondary[700],marginBottom:y.YK.xs},children:"Data Alvo"}),(0,o.jsx)("input",{type:"date",value:g.target_date,onChange:e=>u({...g,target_date:e.target.value}),style:{width:"100%",padding:y.YK.md,border:"1px solid ".concat(y.Tj.secondary[200]),borderRadius:y.Vq.lg,fontSize:y.Il.body.fontSize,boxSizing:"border-box",transition:y.bm.normal,outline:"none"},onFocus:e=>{e.currentTarget.style.borderColor=y.Tj.secondary[400],e.currentTarget.style.boxShadow="0 0 0 3px ".concat(y.Tj.secondary[100])},onBlur:e=>{e.currentTarget.style.borderColor=y.Tj.secondary[200],e.currentTarget.style.boxShadow="none"}})]})]}),(0,o.jsxs)("div",{style:{marginBottom:y.YK.md},children:[(0,o.jsx)("label",{style:{display:"block",fontSize:y.Il.small.fontSize,fontWeight:600,color:y.Tj.secondary[700],marginBottom:y.YK.xs},children:"Descri\xe7\xe3o (opcional)"}),(0,o.jsx)("textarea",{placeholder:"Adicione detalhes sobre seu objetivo...",value:g.description,onChange:e=>u({...g,description:e.target.value}),style:{width:"100%",padding:y.YK.md,border:"1px solid ".concat(y.Tj.secondary[200]),borderRadius:y.Vq.lg,fontSize:y.Il.body.fontSize,boxSizing:"border-box",minHeight:"80px",fontFamily:"inherit",transition:y.bm.normal,outline:"none"},onFocus:e=>{e.currentTarget.style.borderColor=y.Tj.secondary[400],e.currentTarget.style.boxShadow="0 0 0 3px ".concat(y.Tj.secondary[100])},onBlur:e=>{e.currentTarget.style.borderColor=y.Tj.secondary[200],e.currentTarget.style.boxShadow="none"}})]}),(0,o.jsxs)("div",{style:{display:"flex",gap:y.YK.md},children:[(0,o.jsx)("button",{onClick:p,style:{background:y.Tj.status.success,color:"white",border:"none",padding:"".concat(y.YK.md," ").concat(y.YK.xl),borderRadius:y.Vq.lg,cursor:"pointer",fontWeight:600,fontSize:y.Il.body.fontSize,transition:y.bm.normal,boxShadow:y.Eo.sm,flex:1},onMouseOver:e=>{e.target.style.background=y.Tj.status.success+"dd",e.target.style.boxShadow=y.Eo.md},onMouseOut:e=>{e.target.style.background=y.Tj.status.success,e.target.style.boxShadow=y.Eo.sm},children:"Criar Objetivo"}),(0,o.jsx)("button",{onClick:()=>c(!1),style:{background:y.Tj.secondary[100],color:y.Tj.secondary[900],border:"none",padding:"".concat(y.YK.md," ").concat(y.YK.xl),borderRadius:y.Vq.lg,cursor:"pointer",fontWeight:600,fontSize:y.Il.body.fontSize,transition:y.bm.normal,flex:1},onMouseOver:e=>{e.target.style.background=y.Tj.secondary[200]},onMouseOut:e=>{e.target.style.background=y.Tj.secondary[100]},children:"Cancelar"})]})]}),(0,o.jsx)("div",{style:{padding:y.YK.lg},children:i?(0,o.jsx)("p",{style:{textAlign:"center",color:y.Tj.secondary[500]},children:"Carregando..."}):0===r.length?(0,o.jsxs)("div",{style:{textAlign:"center",padding:"".concat(y.YK.lg," 0")},children:[(0,o.jsx)("p",{style:{color:y.Tj.secondary[500],margin:0,marginBottom:y.YK.md,fontSize:"16px"},children:"Nenhum objetivo definido"}),(0,o.jsx)("p",{style:{color:y.Tj.secondary[400],fontSize:y.Il.small.fontSize,margin:0},children:'Clique em "Adicionar" para criar seu primeiro objetivo'})]}):(0,o.jsxs)(o.Fragment,{children:[(0,o.jsx)("div",{style:{display:"grid",gap:y.YK.md,marginBottom:y.YK.lg},children:r.map(e=>{let t=e.current_amount/e.target_amount*100,r=t<33?y.Tj.status.error:t<66?y.Tj.status.warning:y.Tj.status.success;return(0,o.jsxs)("div",{style:{padding:y.YK.lg,border:"2px solid ".concat(v[e.goal_type]||y.Tj.secondary[100]),borderRadius:y.Vq.lg,background:y.Tj.background.light,transition:y.bm.normal},onMouseOver:e=>{e.currentTarget.style.boxShadow=y.Eo.md,e.currentTarget.style.background=y.Tj.secondary[50]},onMouseOut:e=>{e.currentTarget.style.boxShadow="none",e.currentTarget.style.background=y.Tj.background.light},children:[(0,o.jsxs)("div",{style:{display:"flex",justifyContent:"space-between",alignItems:"flex-start",marginBottom:y.YK.md},children:[(0,o.jsxs)("div",{children:[(0,o.jsxs)("div",{style:{display:"flex",alignItems:"center",gap:y.YK.sm,marginBottom:y.YK.xs},children:[(0,o.jsx)("span",{style:{fontSize:"24px"},children:e.icon}),(0,o.jsx)("h4",{style:{fontSize:y.Il.h4.fontSize,fontWeight:700,color:y.Tj.secondary[900],margin:0},children:e.name})]}),e.description&&(0,o.jsx)("p",{style:{fontSize:y.Il.small.fontSize,color:y.Tj.secondary[500],margin:0,marginLeft:"32px"},children:e.description})]}),(0,o.jsx)("button",{onClick:()=>j(e.id),style:{background:y.Tj.status.error+"15",border:"none",color:y.Tj.status.error,padding:"".concat(y.YK.sm," ").concat(y.YK.md),borderRadius:y.Vq.lg,cursor:"pointer",transition:y.bm.normal},onMouseOver:e=>{e.target.style.background=y.Tj.status.error+"25"},onMouseOut:e=>{e.target.style.background=y.Tj.status.error+"15"},children:(0,o.jsx)(h.A,{size:16})})]}),(0,o.jsxs)("div",{style:{marginBottom:y.YK.md},children:[(0,o.jsxs)("div",{style:{display:"flex",justifyContent:"space-between",alignItems:"center",marginBottom:y.YK.xs},children:[(0,o.jsxs)("span",{style:{fontSize:y.Il.small.fontSize,fontWeight:600,color:y.Tj.secondary[700]},children:["R$ ",e.current_amount.toFixed(2)," / R$ ",e.target_amount.toFixed(2)]}),(0,o.jsxs)("span",{style:{fontSize:y.Il.small.fontSize,fontWeight:700,color:r},children:[Math.round(t),"%"]})]}),(0,o.jsx)("div",{style:{width:"100%",height:"8px",background:y.Tj.secondary[100],borderRadius:y.Vq.full,overflow:"hidden"},children:(0,o.jsx)("div",{style:{height:"100%",width:"".concat(Math.min(t,100),"%"),background:r,borderRadius:y.Vq.full,transition:"width ".concat(y.bm.normal)}})})]}),(0,o.jsxs)("div",{children:[(0,o.jsx)("label",{style:{display:"block",fontSize:y.Il.small.fontSize,fontWeight:600,color:y.Tj.secondary[700],marginBottom:y.YK.xs},children:"Atualizar Progresso"}),(0,o.jsx)("input",{type:"range",min:"0",max:e.target_amount,step:"100",value:e.current_amount,onChange:t=>b(e,parseFloat(t.target.value)),style:{width:"100%",cursor:"pointer",accentColor:v[e.goal_type]||y.Tj.secondary[400]}})]})]},e.id)})}),(0,o.jsxs)("div",{style:{display:"grid",gridTemplateColumns:"1fr 1fr",gap:y.YK.md},children:[(0,o.jsxs)("div",{style:{padding:y.YK.lg,background:y.Tj.secondary[50],borderRadius:y.Vq.lg,border:"2px solid ".concat(y.Tj.secondary[200]),textAlign:"center"},children:[(0,o.jsx)("p",{style:{fontSize:y.Il.small.fontSize,color:y.Tj.secondary[600],margin:0,marginBottom:y.YK.xs,textTransform:"uppercase",letterSpacing:"0.5px",fontWeight:600},children:"J\xe1 Acumulado"}),(0,o.jsxs)("p",{style:{fontSize:"24px",fontWeight:700,color:y.Tj.secondary[600],margin:0},children:["R$ ",r.reduce((e,t)=>e+t.current_amount,0).toFixed(2)]})]}),(0,o.jsxs)("div",{style:{padding:y.YK.lg,background:y.Tj.primary[50],borderRadius:y.Vq.lg,border:"2px solid ".concat(y.Tj.primary[200]),textAlign:"center"},children:[(0,o.jsx)("p",{style:{fontSize:y.Il.small.fontSize,color:y.Tj.primary[600],margin:0,marginBottom:y.YK.xs,textTransform:"uppercase",letterSpacing:"0.5px",fontWeight:600},children:"Total em Metas"}),(0,o.jsxs)("p",{style:{fontSize:"24px",fontWeight:700,color:y.Tj.primary[600],margin:0},children:["R$ ",r.reduce((e,t)=>e+t.target_amount,0).toFixed(2)]})]})]})]})})]})}var Y=r(26921),K=r(1524),w=r(6132),k=r(17666);function I(e){let{userId:t,allTransactions:r}=e,[a,i]=(0,n.useState)("last-6-months"),[l,d]=(0,n.useState)([]),[c,g]=(0,n.useState)([]),[u,m]=(0,n.useState)([]),[p,x]=(0,n.useState)([]),[h,j]=(0,n.useState)(!1);(0,n.useEffect)(()=>{b()},[a,r]);let b=()=>{j(!0);let{startDate:e,endDate:t}=(0,s.F3)(a),o=r.filter(r=>r.date>=e&&r.date<=t),n=new Map;o.forEach(e=>{let t=e.date.substring(0,7);n.has(t)||n.set(t,{month:t,income:0,expense:0,balance:0});let r=n.get(t);"income"===e.type?r.income+=e.amount:r.expense+=e.amount,r.balance=r.income-r.expense}),d(Array.from(n.values()).sort((e,t)=>e.month.localeCompare(t.month)));let i=o.filter(e=>"expense"===e.type),l=new Map;i.forEach(e=>{l.has(e.category)||l.set(e.category,{total:0,count:0,values:[]});let t=l.get(e.category);t.total+=e.amount,t.count+=1,t.values.push(e.amount)});let c=Array.from(l.entries()).map(e=>{let[t,r]=e,o=r.total/r.count,n=Math.floor(r.values.length/2),a=r.values.slice(0,n).reduce((e,t)=>e+t,0)/n||0,s=r.values.slice(n).reduce((e,t)=>e+t,0)/(r.values.length-n)||0;return{category:t,amount:r.total,count:r.count,average:o,trend:(s-a)/a*100||0}});g(c.sort((e,t)=>t.amount-e.amount));let u=[];l.forEach((e,t)=>{let r=e.total/e.count,n=Math.sqrt(e.values.reduce((e,t)=>e+Math.pow(t-r,2),0)/e.count);o.forEach(e=>{"expense"===e.type&&e.category===t&&e.amount>r+1.5*n&&u.push(e)})}),m(u.sort((e,t)=>t.amount-e.amount).slice(0,10)),x(c.filter(e=>e.average>100).map(e=>({category:e.category,amount:e.amount,savings:Math.round(.2*e.amount*12)})).sort((e,t)=>t.savings-e.savings)),j(!1)};return(0,o.jsxs)("div",{style:{padding:"".concat(y.YK.lg," 0")},children:[(0,o.jsx)("div",{style:{marginBottom:y.YK.xl,display:"flex",gap:y.YK.md,flexWrap:"wrap"},children:Object.entries({"current-month":"Este M\xeas","last-month":"M\xeas Passado","last-3-months":"\xdaltimos 3 Meses","last-6-months":"\xdaltimos 6 Meses","last-year":"\xdaltimo Ano","all-time":"Desde o In\xedcio"}).map(e=>{let[t,r]=e;return(0,o.jsx)("button",{onClick:()=>i(t),style:{padding:"".concat(y.YK.sm," ").concat(y.YK.lg),borderRadius:y.Vq.lg,border:a===t?"2px solid ".concat(y.Tj.primary[600]):"1px solid ".concat(y.Tj.secondary[200]),background:a===t?y.Tj.primary[50]:"white",color:a===t?y.Tj.primary[600]:y.Tj.secondary[700],fontWeight:a===t?600:400,cursor:"pointer",transition:y.bm.normal,fontSize:y.Il.body.fontSize},onMouseOver:e=>{a!==t&&(e.target.style.background=y.Tj.secondary[50],e.target.style.borderColor=y.Tj.secondary[300])},onMouseOut:e=>{a!==t&&(e.target.style.background="white",e.target.style.borderColor=y.Tj.secondary[200])},children:r},t)})}),h?(0,o.jsx)("p",{style:{textAlign:"center",color:y.Tj.secondary[500]},children:"Analisando dados..."}):(0,o.jsxs)(o.Fragment,{children:[l.length>1&&(0,o.jsxs)("div",{style:{background:y.Tj.background.light,borderRadius:y.Vq.xl,boxShadow:y.Eo.md,border:"1px solid ".concat(y.Tj.primary[100]),padding:y.YK.lg,marginBottom:y.YK.lg},children:[(0,o.jsx)("h3",{style:{fontSize:y.Il.h3.fontSize,fontWeight:700,color:y.Tj.secondary[900],margin:0,marginBottom:y.YK.lg},children:"\uD83D\uDCCA Compara\xe7\xe3o M\xeas a M\xeas"}),(0,o.jsx)("div",{style:{display:"grid",gap:y.YK.md},children:l.slice(-6).reverse().map((e,t)=>{var r,n;let a=l[l.length-2-t],s=a?(r=e.expense,0===(n=a.expense)?100*(r>0):(r-n)/n*100):0,i=s>0;return(0,o.jsxs)("div",{style:{display:"flex",justifyContent:"space-between",alignItems:"center",padding:y.YK.md,background:y.Tj.secondary[50],borderRadius:y.Vq.lg,border:"1px solid ".concat(y.Tj.secondary[100]),transition:y.bm.normal},onMouseOver:e=>{e.currentTarget.style.background=y.Tj.primary[50],e.currentTarget.style.boxShadow=y.Eo.sm},onMouseOut:e=>{e.currentTarget.style.background=y.Tj.secondary[50],e.currentTarget.style.boxShadow="none"},children:[(0,o.jsxs)("div",{children:[(0,o.jsx)("p",{style:{fontSize:y.Il.body.fontSize,fontWeight:600,color:y.Tj.secondary[900],margin:0,marginBottom:y.YK.xs},children:new Date(e.month+"-01").toLocaleDateString("pt-BR",{month:"long",year:"numeric"})}),(0,o.jsxs)("div",{style:{display:"flex",gap:y.YK.lg,fontSize:y.Il.small.fontSize,color:y.Tj.secondary[600]},children:[(0,o.jsxs)("span",{children:["\uD83D\uDCB0 ",e.income.toLocaleString("pt-BR",{style:"currency",currency:"BRL"})]}),(0,o.jsxs)("span",{children:["\uD83D\uDCB8 ",e.expense.toLocaleString("pt-BR",{style:"currency",currency:"BRL"})]})]})]}),(0,o.jsxs)("div",{style:{textAlign:"right"},children:[(0,o.jsx)("p",{style:{fontSize:y.Il.h4.fontSize,fontWeight:700,color:e.balance>=0?y.Tj.status.success:y.Tj.status.error,margin:0,marginBottom:y.YK.xs},children:e.balance.toLocaleString("pt-BR",{style:"currency",currency:"BRL"})}),a&&(0,o.jsxs)("div",{style:{display:"flex",alignItems:"center",gap:y.YK.xs,justifyContent:"flex-end"},children:[i?(0,o.jsx)(Y.A,{size:16,color:y.Tj.status.error}):(0,o.jsx)(K.A,{size:16,color:y.Tj.status.success}),(0,o.jsxs)("span",{style:{fontSize:y.Il.small.fontSize,color:i?y.Tj.status.error:y.Tj.status.success,fontWeight:600},children:[Math.abs(s).toFixed(1),"%"]})]})]})]},e.month)})})]}),c.length>0&&(0,o.jsxs)("div",{style:{background:y.Tj.background.light,borderRadius:y.Vq.xl,boxShadow:y.Eo.md,border:"1px solid ".concat(y.Tj.secondary[100]),padding:y.YK.lg,marginBottom:y.YK.lg},children:[(0,o.jsx)("h3",{style:{fontSize:y.Il.h3.fontSize,fontWeight:700,color:y.Tj.secondary[900],margin:0,marginBottom:y.YK.lg},children:"\uD83D\uDCC8 An\xe1lise por Categoria"}),(0,o.jsx)("div",{style:{display:"grid",gap:y.YK.md},children:c.map(e=>{let t=Math.max(...c.map(e=>e.amount)),r=e.amount/t*100;return(0,o.jsxs)("div",{style:{marginBottom:y.YK.md},children:[(0,o.jsxs)("div",{style:{display:"flex",justifyContent:"space-between",alignItems:"center",marginBottom:y.YK.xs},children:[(0,o.jsxs)("div",{children:[(0,o.jsx)("p",{style:{fontSize:y.Il.body.fontSize,fontWeight:600,color:y.Tj.secondary[900],margin:0},children:e.category}),(0,o.jsxs)("p",{style:{fontSize:y.Il.small.fontSize,color:y.Tj.secondary[500],margin:0},children:[e.count," transa\xe7\xf5es • M\xe9dia: ",e.average.toLocaleString("pt-BR",{style:"currency",currency:"BRL"})]})]}),(0,o.jsxs)("div",{style:{textAlign:"right"},children:[(0,o.jsx)("p",{style:{fontSize:y.Il.h4.fontSize,fontWeight:700,color:y.Tj.primary[600],margin:0},children:e.amount.toLocaleString("pt-BR",{style:"currency",currency:"BRL"})}),0!==e.trend&&(0,o.jsxs)("div",{style:{display:"flex",alignItems:"center",gap:y.YK.xs,justifyContent:"flex-end",marginTop:y.YK.xs},children:[e.trend>0?(0,o.jsx)(Y.A,{size:14,color:y.Tj.status.error}):(0,o.jsx)(K.A,{size:14,color:y.Tj.status.success}),(0,o.jsxs)("span",{style:{fontSize:y.Il.small.fontSize,color:e.trend>0?y.Tj.status.error:y.Tj.status.success,fontWeight:600},children:[Math.abs(e.trend).toFixed(0),"%"]})]})]})]}),(0,o.jsx)("div",{style:{width:"100%",height:"8px",background:y.Tj.secondary[100],borderRadius:y.Vq.full,overflow:"hidden"},children:(0,o.jsx)("div",{style:{height:"100%",width:"".concat(r,"%"),background:y.Tj.primary[500],borderRadius:y.Vq.full,transition:"width ".concat(y.bm.normal)}})})]},e.category)})})]}),u.length>0&&(0,o.jsxs)("div",{style:{background:y.Tj.background.light,borderRadius:y.Vq.xl,boxShadow:y.Eo.md,border:"2px solid ".concat(y.Tj.status.warning,"30"),padding:y.YK.lg,marginBottom:y.YK.lg},children:[(0,o.jsxs)("div",{style:{display:"flex",alignItems:"center",gap:y.YK.md,marginBottom:y.YK.lg},children:[(0,o.jsx)(w.A,{size:24,color:y.Tj.status.warning}),(0,o.jsx)("h3",{style:{fontSize:y.Il.h3.fontSize,fontWeight:700,color:y.Tj.secondary[900],margin:0},children:"⚠️ Gastos Fora do Padr\xe3o"})]}),(0,o.jsx)("div",{style:{display:"grid",gap:y.YK.sm},children:u.map(e=>(0,o.jsxs)("div",{style:{padding:y.YK.md,background:y.Tj.status.warning+"10",borderRadius:y.Vq.lg,border:"1px solid ".concat(y.Tj.status.warning,"40"),display:"flex",justifyContent:"space-between",alignItems:"center"},children:[(0,o.jsxs)("div",{children:[(0,o.jsx)("p",{style:{fontSize:y.Il.body.fontSize,fontWeight:600,color:y.Tj.secondary[900],margin:0,marginBottom:y.YK.xs},children:e.description}),(0,o.jsxs)("p",{style:{fontSize:y.Il.small.fontSize,color:y.Tj.secondary[500],margin:0},children:[e.category," • ",new Date(e.date).toLocaleDateString("pt-BR")]})]}),(0,o.jsx)("p",{style:{fontSize:y.Il.h4.fontSize,fontWeight:700,color:y.Tj.status.warning,margin:0},children:e.amount.toLocaleString("pt-BR",{style:"currency",currency:"BRL"})})]},e.id))})]}),p.length>0&&(0,o.jsxs)("div",{style:{background:y.Tj.background.light,borderRadius:y.Vq.xl,boxShadow:y.Eo.md,border:"2px solid ".concat(y.Tj.status.success,"30"),padding:y.YK.lg},children:[(0,o.jsxs)("div",{style:{display:"flex",alignItems:"center",gap:y.YK.md,marginBottom:y.YK.lg},children:[(0,o.jsx)(k.A,{size:24,color:y.Tj.status.success}),(0,o.jsx)("h3",{style:{fontSize:y.Il.h3.fontSize,fontWeight:700,color:y.Tj.secondary[900],margin:0},children:"\uD83D\uDCA1 Oportunidades de Economia"})]}),(0,o.jsx)("div",{style:{display:"grid",gap:y.YK.md},children:p.map((e,t)=>(0,o.jsxs)("div",{style:{padding:y.YK.lg,background:y.Tj.status.success+"10",borderRadius:y.Vq.lg,border:"1px solid ".concat(y.Tj.status.success,"40"),transition:y.bm.normal},onMouseOver:e=>{e.currentTarget.style.boxShadow=y.Eo.sm},onMouseOut:e=>{e.currentTarget.style.boxShadow="none"},children:[(0,o.jsxs)("div",{style:{display:"flex",justifyContent:"space-between",alignItems:"flex-start",marginBottom:y.YK.md},children:[(0,o.jsxs)("div",{children:[(0,o.jsxs)("p",{style:{fontSize:y.Il.h4.fontSize,fontWeight:700,color:y.Tj.secondary[900],margin:0,marginBottom:y.YK.xs},children:["#",t+1," - ",e.category]}),(0,o.jsxs)("p",{style:{fontSize:y.Il.body.fontSize,color:y.Tj.secondary[600],margin:0},children:["Gasto atual: ",(0,o.jsx)("strong",{children:e.amount.toLocaleString("pt-BR",{style:"currency",currency:"BRL"})})]})]}),(0,o.jsxs)("div",{style:{textAlign:"right"},children:[(0,o.jsx)("p",{style:{fontSize:y.Il.small.fontSize,color:y.Tj.secondary[500],margin:0,marginBottom:y.YK.xs},children:"Economia anual com"}),(0,o.jsx)("p",{style:{fontSize:y.Il.h3.fontSize,fontWeight:700,color:y.Tj.status.success,margin:0},children:"20% de redu\xe7\xe3o"})]})]}),(0,o.jsxs)("div",{style:{padding:y.YK.md,background:"white",borderRadius:y.Vq.lg,textAlign:"center",border:"1px solid ".concat(y.Tj.status.success,"40")},children:[(0,o.jsx)("p",{style:{fontSize:y.Il.small.fontSize,color:y.Tj.secondary[500],margin:0,marginBottom:y.YK.xs},children:"Voc\xea economizaria por ano:"}),(0,o.jsx)("p",{style:{fontSize:"28px",fontWeight:700,color:y.Tj.status.success,margin:0},children:e.savings.toLocaleString("pt-BR",{style:"currency",currency:"BRL"})})]})]},e.category))})]})]})]})}var C=r(80534);let R={"current-month":"Este M\xeas","last-month":"M\xeas Passado","last-3-months":"\xdaltimos 3 Meses","last-6-months":"\xdaltimos 6 Meses","last-year":"\xdaltimo Ano","all-time":"Desde o In\xedcio"};function B(e){let{transactions:t,userId:r}=e,[a,x]=(0,n.useState)("overview"),[h,j]=(0,n.useState)("current-month"),[b,T]=(0,n.useState)([]),[S,v]=(0,n.useState)([]),[w,k]=(0,n.useState)(0),[B,E]=(0,n.useState)(0),[A,W]=(0,n.useState)(0);return(0,n.useEffect)(()=>{let{startDate:e,endDate:r}=(0,s.F3)(h),o=t.filter(t=>t.date>=e&&t.date<=r);T(o);let n=0,a=0;o.forEach(e=>{"income"===e.type?n+=e.amount:a+=e.amount}),k(n),E(a),W(n-a),v([{name:"Receitas",value:n},{name:"Despesas",value:a}])},[t,h]),(0,o.jsxs)("div",{style:{padding:"".concat(y.YK.lg," 0")},children:["overview"===a&&(0,o.jsxs)("div",{style:{marginBottom:y.YK.xl,display:"flex",gap:y.YK.md,flexWrap:"wrap",alignItems:"center"},children:[(0,o.jsx)("span",{style:{fontSize:y.Il.body.fontSize,fontWeight:600,color:y.Tj.secondary[700]},children:"\uD83D\uDCC5 Per\xedodo:"}),Object.entries(R).map(e=>{let[t,r]=e;return(0,o.jsx)("button",{onClick:()=>j(t),style:{padding:"".concat(y.YK.sm," ").concat(y.YK.lg),borderRadius:y.Vq.lg,border:h===t?"2px solid ".concat(y.Tj.primary[600]):"1px solid ".concat(y.Tj.secondary[200]),background:h===t?y.Tj.primary[50]:"white",color:h===t?y.Tj.primary[600]:y.Tj.secondary[700],fontWeight:h===t?600:400,cursor:"pointer",transition:y.bm.normal,fontSize:y.Il.body.fontSize},onMouseOver:e=>{h!==t&&(e.target.style.background=y.Tj.secondary[50],e.target.style.borderColor=y.Tj.secondary[300])},onMouseOut:e=>{h!==t&&(e.target.style.background="white",e.target.style.borderColor=y.Tj.secondary[200])},children:r},t)})]}),(0,o.jsxs)("div",{style:{display:"grid",gridTemplateColumns:"repeat(auto-fit, minmax(280px, 1fr))",gap:y.YK.lg,marginBottom:y.YK.xxl},children:[(0,o.jsx)(p,{title:"Receitas",value:"R$ ".concat(w.toFixed(2)),icon:(0,o.jsx)(K.A,{size:24,color:y.Tj.status.success}),backgroundColor:y.Tj.status.success+"20",trend:5,subtitle:"\xdaltima semana"}),(0,o.jsx)(p,{title:"Despesas",value:"R$ ".concat(B.toFixed(2)),icon:(0,o.jsx)(Y.A,{size:24,color:y.Tj.status.error}),backgroundColor:y.Tj.status.error+"20",trend:-3,subtitle:"\xdaltima semana"}),(0,o.jsx)(p,{title:"Saldo",value:"R$ ".concat(A.toFixed(2)),icon:(0,o.jsx)(C.A,{size:24,color:y.Tj.primary[600]}),backgroundColor:y.Tj.primary[100],subtitle:"Dispon\xedvel",trend:A>0?8:-2})]}),(0,o.jsx)("div",{style:{display:"grid",gridTemplateColumns:"repeat(auto-fit, minmax(500px, 1fr))",gap:y.YK.lg,marginBottom:y.YK.xxl},children:(0,o.jsxs)("div",{style:{...{background:y.Tj.background.light,borderRadius:y.Vq.xl,boxShadow:y.Eo.md,border:"1px solid ".concat(y.Tj.primary[100]),padding:y.YK.xl}},children:[(0,o.jsxs)("div",{style:{display:"flex",alignItems:"center",gap:y.YK.md,marginBottom:y.YK.lg},children:[(0,o.jsx)("div",{style:{width:"44px",height:"44px",background:y.Tj.primary[100],borderRadius:y.Vq.lg,display:"flex",alignItems:"center",justifyContent:"center"},children:(0,o.jsx)(C.A,{size:24,color:y.Tj.primary[600]})}),(0,o.jsx)("h2",{style:{fontSize:y.Il.h3.fontSize,fontWeight:700,color:y.Tj.secondary[900],margin:0},children:"Receitas vs Despesas"})]}),S.length>0&&(S[0].value>0||S[1].value>0)?(0,o.jsx)(i.u,{width:"100%",height:300,children:(0,o.jsxs)(l.E,{data:S,children:[(0,o.jsx)(d.d,{strokeDasharray:"3 3",stroke:y.Tj.secondary[200]}),(0,o.jsx)(c.W,{dataKey:"name",stroke:y.Tj.secondary[500]}),(0,o.jsx)(g.h,{stroke:y.Tj.secondary[500]}),(0,o.jsx)(u.m,{formatter:e=>"R$ ".concat(e.toFixed(2)),contentStyle:{background:y.Tj.background.light,border:"1px solid ".concat(y.Tj.secondary[200]),borderRadius:y.Vq.lg}}),(0,o.jsx)(m.y,{dataKey:"value",fill:y.Tj.primary[500],radius:[8,8,0,0]})]})}):(0,o.jsx)("p",{style:{color:y.Tj.secondary[400],textAlign:"center",padding:"".concat(y.YK.xl," 0"),margin:0},children:"Sem dados"})]})}),(0,o.jsxs)("div",{style:{borderBottom:"2px solid ".concat(y.Tj.secondary[200]),display:"flex",gap:y.YK.lg,marginBottom:y.YK.xl},children:[(0,o.jsx)("button",{onClick:()=>x("overview"),style:{padding:"".concat(y.YK.md," ").concat(y.YK.lg),background:"none",border:"none",fontSize:y.Il.h4.fontSize,fontWeight:"overview"===a?700:500,color:"overview"===a?y.Tj.primary[600]:y.Tj.secondary[500],cursor:"pointer",borderBottom:"overview"===a?"3px solid ".concat(y.Tj.primary[600]):"none",marginBottom:"-2px",transition:"all ".concat(y.bm.normal)},children:"\uD83D\uDCCA Vis\xe3o Geral"}),(0,o.jsx)("button",{onClick:()=>x("insights"),style:{padding:"".concat(y.YK.md," ").concat(y.YK.lg),background:"none",border:"none",fontSize:y.Il.h4.fontSize,fontWeight:"insights"===a?700:500,color:"insights"===a?y.Tj.primary[600]:y.Tj.secondary[500],cursor:"pointer",borderBottom:"insights"===a?"3px solid ".concat(y.Tj.primary[600]):"none",marginBottom:"-2px",transition:"all ".concat(y.bm.normal)},children:"\uD83D\uDCA1 Insights"})]}),"overview"===a&&(0,o.jsx)(o.Fragment,{children:(0,o.jsxs)("div",{style:{display:"grid",gridTemplateColumns:"repeat(auto-fit, minmax(450px, 1fr))",gap:y.YK.lg,marginBottom:y.YK.xxl},children:[(0,o.jsx)(f,{userId:r}),(0,o.jsx)(z,{userId:r})]})}),"insights"===a&&(0,o.jsx)(I,{userId:r,allTransactions:t})]})}var E=r(36382),A=r(17215),W=r(7013);let q=["Alimenta\xe7\xe3o","Transporte","Habita\xe7\xe3o","Sa\xfade","Educa\xe7\xe3o","Lazer","Outros"],V=["Sal\xe1rio","Freelance","Investimentos","Outros"];function D(e){let{onTransactionAdded:t}=e,[r,a]=(0,n.useState)("expense"),[i,l]=(0,n.useState)(""),[d,c]=(0,n.useState)(""),[g,u]=(0,n.useState)(q[0]),[m,p]=(0,n.useState)(new Date().toISOString().split("T")[0]),[h,j]=(0,n.useState)(""),[b,f]=(0,n.useState)(!1),[T,S]=(0,n.useState)("");(0,n.useEffect)(()=>{(async()=>{let e=await (0,s.HW)();e&&S(e.id)})()},[]);let v="expense"===r?q:V,z=async e=>{if(e.preventDefault(),j(""),!i||!d||!T)return void j("Preencha todos os campos");f(!0);let{error:o}=await (0,s.yY)({user_id:T,description:i,amount:parseFloat(d),type:r,category:"income"===r?"Receita":g,date:m});o?j(o.message):(l(""),c(""),u("expense"===r?q[0]:V[0]),p(new Date().toISOString().split("T")[0]),null==t||t()),f(!1)};return(0,o.jsxs)("div",{style:{background:y.Tj.background.light,borderRadius:y.Vq.xl,boxShadow:y.Eo.md,border:"1px solid ".concat(y.Tj.primary[100]),padding:y.YK.xl,height:"fit-content"},children:[(0,o.jsxs)("div",{style:{display:"flex",alignItems:"center",gap:y.YK.md,marginBottom:y.YK.lg},children:[(0,o.jsx)("div",{style:{width:"44px",height:"44px",background:y.Tj.primary[100],borderRadius:y.Vq.lg,display:"flex",alignItems:"center",justifyContent:"center"},children:(0,o.jsx)(x.A,{size:24,color:y.Tj.primary[600]})}),(0,o.jsx)("h2",{style:{fontSize:y.Il.h4.fontSize,fontWeight:700,color:y.Tj.secondary[900],margin:0},children:"Adicionar Transa\xe7\xe3o"})]}),(0,o.jsxs)("form",{onSubmit:z,children:[(0,o.jsx)("div",{style:{marginBottom:y.YK.lg},children:(0,o.jsxs)("div",{style:{display:"grid",gridTemplateColumns:"1fr 1fr",gap:y.YK.md},children:[(0,o.jsxs)("button",{type:"button",onClick:()=>{a("expense"),u(q[0])},style:{padding:"".concat(y.YK.md," ").concat(y.YK.md),background:"expense"===r?y.Tj.status.error+"20":y.Tj.secondary[100],border:"expense"===r?"2px solid ".concat(y.Tj.status.error):"1px solid ".concat(y.Tj.secondary[200]),borderRadius:y.Vq.lg,color:"expense"===r?y.Tj.status.error:y.Tj.secondary[600],fontWeight:600,fontSize:y.Il.body.fontSize,cursor:"pointer",transition:y.bm.normal,display:"flex",alignItems:"center",justifyContent:"center",gap:y.YK.sm},onMouseEnter:e=>{"expense"!==r&&(e.currentTarget.style.background=y.Tj.secondary[200])},onMouseLeave:e=>{"expense"!==r&&(e.currentTarget.style.background=y.Tj.secondary[100])},children:[(0,o.jsx)(A.A,{size:18}),"Despesa"]}),(0,o.jsxs)("button",{type:"button",onClick:()=>{a("income"),u(V[0])},style:{padding:"".concat(y.YK.md," ").concat(y.YK.md),background:"income"===r?y.Tj.status.success+"20":y.Tj.secondary[100],border:"income"===r?"2px solid ".concat(y.Tj.status.success):"1px solid ".concat(y.Tj.secondary[200]),borderRadius:y.Vq.lg,color:"income"===r?y.Tj.status.success:y.Tj.secondary[600],fontWeight:600,fontSize:y.Il.body.fontSize,cursor:"pointer",transition:y.bm.normal,display:"flex",alignItems:"center",justifyContent:"center",gap:y.YK.sm},onMouseEnter:e=>{"income"!==r&&(e.currentTarget.style.background=y.Tj.secondary[200])},onMouseLeave:e=>{"income"!==r&&(e.currentTarget.style.background=y.Tj.secondary[100])},children:[(0,o.jsx)(W.A,{size:18}),"Receita"]})]})}),(0,o.jsxs)("div",{style:{marginBottom:y.YK.lg},children:[(0,o.jsx)("label",{style:{display:"block",fontSize:y.Il.label.fontSize,fontWeight:600,color:y.Tj.secondary[900],marginBottom:y.YK.sm},children:"Descri\xe7\xe3o"}),(0,o.jsx)("div",{style:{position:"relative"},children:(0,o.jsx)("input",{type:"text",value:i,onChange:e=>l(e.target.value),placeholder:"expense"===r?"Ex: Caf\xe9 da manh\xe3":"Ex: Sal\xe1rio mensal",style:{width:"100%",padding:"".concat(y.YK.md," ").concat(y.YK.md),fontSize:y.Il.body.fontSize,border:"1px solid ".concat(y.Tj.secondary[200]),borderRadius:y.Vq.lg,backgroundColor:y.Tj.background.light,fontFamily:"inherit",transition:y.bm.normal,boxSizing:"border-box"},onFocus:e=>{e.currentTarget.style.borderColor=y.Tj.primary[500],e.currentTarget.style.boxShadow="0 0 0 3px ".concat(y.Tj.primary[50])},onBlur:e=>{e.currentTarget.style.borderColor=y.Tj.secondary[200],e.currentTarget.style.boxShadow="none"}})})]}),(0,o.jsxs)("div",{style:{marginBottom:y.YK.lg},children:[(0,o.jsx)("label",{style:{display:"block",fontSize:y.Il.label.fontSize,fontWeight:600,color:y.Tj.secondary[900],marginBottom:y.YK.sm},children:"Valor (R$)"}),(0,o.jsx)("input",{type:"number",value:d,onChange:e=>c(e.target.value),placeholder:"0.00",step:"0.01",min:"0",style:{width:"100%",padding:"".concat(y.YK.md," ").concat(y.YK.md),fontSize:y.Il.body.fontSize,border:"1px solid ".concat(y.Tj.secondary[200]),borderRadius:y.Vq.lg,backgroundColor:y.Tj.background.light,fontFamily:"inherit",transition:y.bm.normal,boxSizing:"border-box"},onFocus:e=>{e.currentTarget.style.borderColor=y.Tj.primary[500],e.currentTarget.style.boxShadow="0 0 0 3px ".concat(y.Tj.primary[50])},onBlur:e=>{e.currentTarget.style.borderColor=y.Tj.secondary[200],e.currentTarget.style.boxShadow="none"}})]}),(0,o.jsxs)("div",{style:{marginBottom:y.YK.lg},children:[(0,o.jsx)("label",{style:{display:"block",fontSize:y.Il.label.fontSize,fontWeight:600,color:y.Tj.secondary[900],marginBottom:y.YK.sm},children:"Categoria"}),(0,o.jsx)("select",{value:g,onChange:e=>u(e.target.value),style:{width:"100%",padding:"".concat(y.YK.md," ").concat(y.YK.md),fontSize:y.Il.body.fontSize,border:"1px solid ".concat(y.Tj.secondary[200]),borderRadius:y.Vq.lg,backgroundColor:y.Tj.background.light,color:y.Tj.secondary[900],fontFamily:"inherit",transition:y.bm.normal,cursor:"pointer",boxSizing:"border-box"},onFocus:e=>{e.currentTarget.style.borderColor=y.Tj.primary[500],e.currentTarget.style.boxShadow="0 0 0 3px ".concat(y.Tj.primary[50])},onBlur:e=>{e.currentTarget.style.borderColor=y.Tj.secondary[200],e.currentTarget.style.boxShadow="none"},children:v.map(e=>(0,o.jsx)("option",{value:e,children:e},e))})]}),(0,o.jsxs)("div",{style:{marginBottom:y.YK.lg},children:[(0,o.jsx)("label",{style:{display:"block",fontSize:y.Il.label.fontSize,fontWeight:600,color:y.Tj.secondary[900],marginBottom:y.YK.sm},children:"Data"}),(0,o.jsx)("input",{type:"date",value:m,onChange:e=>p(e.target.value),style:{width:"100%",padding:"".concat(y.YK.md," ").concat(y.YK.md),fontSize:y.Il.body.fontSize,border:"1px solid ".concat(y.Tj.secondary[200]),borderRadius:y.Vq.lg,backgroundColor:y.Tj.background.light,color:y.Tj.secondary[900],fontFamily:"inherit",transition:y.bm.normal,cursor:"pointer",boxSizing:"border-box"},onFocus:e=>{e.currentTarget.style.borderColor=y.Tj.primary[500],e.currentTarget.style.boxShadow="0 0 0 3px ".concat(y.Tj.primary[50])},onBlur:e=>{e.currentTarget.style.borderColor=y.Tj.secondary[200],e.currentTarget.style.boxShadow="none"}})]}),h&&(0,o.jsx)("div",{style:{background:y.Tj.status.error+"15",border:"1px solid ".concat(y.Tj.status.error),borderRadius:y.Vq.lg,padding:y.YK.md,marginBottom:y.YK.lg,color:y.Tj.status.error,fontSize:y.Il.small.fontSize,fontWeight:500},children:h}),(0,o.jsx)("button",{type:"submit",disabled:b,style:{width:"100%",padding:"".concat(y.YK.md," ").concat(y.YK.lg),background:b?y.Tj.secondary[300]:"linear-gradient(135deg, ".concat(y.Tj.primary[500]," 0%, ").concat(y.Tj.primary[600]," 100%)"),color:y.Tj.background.light,border:"none",borderRadius:y.Vq.lg,fontSize:y.Il.label.fontSize,fontWeight:600,cursor:b?"not-allowed":"pointer",transition:y.bm.normal,boxShadow:b?"none":y.Eo.blue,opacity:b?.6:1},onMouseEnter:e=>{b||(e.currentTarget.style.boxShadow=y.Eo.lg,e.currentTarget.style.transform="translateY(-2px)")},onMouseLeave:e=>{b||(e.currentTarget.style.boxShadow=y.Eo.blue,e.currentTarget.style.transform="translateY(0)")},children:b?"Adicionando...":"Adicionar Transa\xe7\xe3o"})]})]})}var M=r(16485),F=r(45345),_=r(21190);function O(e){let{transactions:t}=e,[r,a]=(0,n.useState)(null),[i,l]=(0,n.useState)(null),[d,c]=(0,n.useState)({}),[g,u]=(0,n.useState)(!1),m=async e=>{confirm("Tem certeza que deseja deletar esta transa\xe7\xe3o?")&&(a(e),await (0,s.Uw)(e),a(null),window.location.reload())},p=async()=>{i&&(u(!0),await (0,s.AF)(i,d),l(null),c({}),u(!1),window.location.reload())};return(0,o.jsxs)("div",{style:{background:y.Tj.background.light,borderRadius:y.Vq.xl,boxShadow:y.Eo.md,border:"1px solid ".concat(y.Tj.primary[100]),overflow:"hidden"},children:[(0,o.jsxs)("div",{style:{padding:"".concat(y.YK.lg," ").concat(y.YK.xl),borderBottom:"1px solid ".concat(y.Tj.primary[100]),display:"flex",alignItems:"center",gap:y.YK.md},children:[(0,o.jsx)("div",{style:{width:"44px",height:"44px",background:y.Tj.primary[100],borderRadius:y.Vq.lg,display:"flex",alignItems:"center",justifyContent:"center"},children:(0,o.jsx)(M.A,{size:24,color:y.Tj.primary[600]})}),(0,o.jsx)("h2",{style:{fontSize:y.Il.h3.fontSize,fontWeight:700,color:y.Tj.secondary[900],margin:0},children:"Transa\xe7\xf5es Recentes"})]}),(0,o.jsx)("div",{children:0===t.length?(0,o.jsx)("div",{style:{padding:y.YK.xxl,textAlign:"center",color:y.Tj.secondary[400]},children:(0,o.jsx)("p",{style:{fontSize:y.Il.body.fontSize,margin:0},children:"Nenhuma transa\xe7\xe3o registrada"})}):(0,o.jsx)("div",{children:t.map((e,n)=>{let a;return(0,o.jsxs)("div",{style:{display:"flex",alignItems:"center",justifyContent:"space-between",padding:y.YK.lg,borderBottom:n<t.length-1?"1px solid ".concat(y.Tj.secondary[100]):"none",transition:y.bm.normal},onMouseEnter:e=>{e.currentTarget.style.background=y.Tj.secondary[50]},onMouseLeave:e=>{e.currentTarget.style.background=y.Tj.background.light},children:[(0,o.jsxs)("div",{style:{display:"flex",alignItems:"center",gap:y.YK.lg,flex:1},children:[(0,o.jsx)("div",{style:{width:"48px",height:"48px",background:"income"===e.type?y.Tj.status.success+"20":y.Tj.status.error+"20",borderRadius:y.Vq.lg,display:"flex",alignItems:"center",justifyContent:"center",flexShrink:0},children:"income"===e.type?(0,o.jsx)(W.A,{size:24,color:y.Tj.status.success}):(0,o.jsx)(A.A,{size:24,color:y.Tj.status.error})}),(0,o.jsxs)("div",{style:{flex:1},children:[(0,o.jsx)("p",{style:{fontSize:y.Il.body.fontSize,fontWeight:600,color:y.Tj.secondary[900],margin:0,marginBottom:y.YK.xs},children:e.description}),(0,o.jsxs)("div",{style:{display:"flex",gap:y.YK.md,alignItems:"center"},children:[(0,o.jsxs)("span",{style:{fontSize:y.Il.small.fontSize,color:y.Tj.secondary[500],display:"flex",alignItems:"center",gap:y.YK.xs},children:[(0,o.jsx)(F.A,{size:14}),e.category]}),(0,o.jsxs)("span",{style:{fontSize:y.Il.small.fontSize,color:y.Tj.secondary[500],display:"flex",alignItems:"center",gap:y.YK.xs},children:[(0,o.jsx)(M.A,{size:14}),new Date(e.date).toLocaleDateString("pt-BR")]})]})]})]}),(0,o.jsxs)("div",{style:{display:"flex",alignItems:"center",gap:y.YK.lg,marginLeft:y.YK.lg},children:[(0,o.jsx)("div",{style:{textAlign:"right",minWidth:"120px"},children:(0,o.jsxs)("p",{style:{fontSize:"18px",fontWeight:700,color:"income"===e.type?y.Tj.status.success:y.Tj.status.error,margin:0},children:["income"===e.type?"+":"-"," ",(a=e.amount,new Intl.NumberFormat("pt-BR",{style:"currency",currency:"BRL"}).format(a))]})}),(0,o.jsx)("button",{onClick:()=>m(e.id),disabled:r===e.id,style:{width:"40px",height:"40px",background:y.Tj.status.error+"15",border:"1px solid ".concat(y.Tj.status.error,"20"),borderRadius:y.Vq.lg,color:y.Tj.status.error,cursor:r===e.id?"not-allowed":"pointer",transition:y.bm.normal,display:"flex",alignItems:"center",justifyContent:"center",flexShrink:0,opacity:r===e.id?.6:1},onMouseEnter:t=>{r!==e.id&&(t.currentTarget.style.background=y.Tj.status.error+"25",t.currentTarget.style.borderColor=y.Tj.status.error+"40")},onMouseLeave:t=>{r!==e.id&&(t.currentTarget.style.background=y.Tj.status.error+"15",t.currentTarget.style.borderColor=y.Tj.status.error+"20")},children:(0,o.jsx)(h.A,{size:18})}),(0,o.jsx)("button",{onClick:()=>{l(e.id),c({description:e.description,amount:e.amount,category:e.category,date:e.date,type:e.type})},style:{width:"40px",height:"40px",background:y.Tj.primary[100],border:"1px solid ".concat(y.Tj.primary[200]),borderRadius:y.Vq.lg,color:y.Tj.primary[600],cursor:"pointer",transition:y.bm.normal,display:"flex",alignItems:"center",justifyContent:"center",flexShrink:0},onMouseEnter:e=>{e.currentTarget.style.background=y.Tj.primary[200],e.currentTarget.style.borderColor=y.Tj.primary[300]},onMouseLeave:e=>{e.currentTarget.style.background=y.Tj.primary[100],e.currentTarget.style.borderColor=y.Tj.primary[200]},children:(0,o.jsx)(_.A,{size:18})})]})]},e.id)})})}),i&&(0,o.jsx)("div",{style:{position:"fixed",top:0,left:0,right:0,bottom:0,backgroundColor:"rgba(0,0,0,0.5)",display:"flex",alignItems:"center",justifyContent:"center",zIndex:1e3},onClick:()=>l(null),children:(0,o.jsxs)("div",{style:{backgroundColor:y.Tj.background.light,borderRadius:y.Vq.xl,boxShadow:y.Eo.lg,padding:y.YK.xl,maxWidth:"500px",width:"90%"},onClick:e=>e.stopPropagation(),children:[(0,o.jsx)("h3",{style:{fontSize:y.Il.h3.fontSize,fontWeight:700,color:y.Tj.secondary[900],margin:0,marginBottom:y.YK.lg},children:"✏️ Editar Transa\xe7\xe3o"}),(0,o.jsxs)("div",{style:{marginBottom:y.YK.lg},children:[(0,o.jsx)("label",{style:{display:"block",fontSize:y.Il.small.fontSize,fontWeight:600,color:y.Tj.secondary[900],marginBottom:y.YK.xs},children:"Descri\xe7\xe3o"}),(0,o.jsx)("input",{type:"text",value:d.description||"",onChange:e=>c({...d,description:e.target.value}),style:{width:"100%",padding:y.YK.md,border:"1px solid ".concat(y.Tj.primary[200]),borderRadius:y.Vq.lg,fontSize:y.Il.body.fontSize,fontFamily:"inherit",boxSizing:"border-box"}})]}),(0,o.jsxs)("div",{style:{marginBottom:y.YK.lg},children:[(0,o.jsx)("label",{style:{display:"block",fontSize:y.Il.small.fontSize,fontWeight:600,color:y.Tj.secondary[900],marginBottom:y.YK.xs},children:"Valor (R$)"}),(0,o.jsx)("input",{type:"number",step:"0.01",value:d.amount||"",onChange:e=>c({...d,amount:parseFloat(e.target.value)}),style:{width:"100%",padding:y.YK.md,border:"1px solid ".concat(y.Tj.primary[200]),borderRadius:y.Vq.lg,fontSize:y.Il.body.fontSize,fontFamily:"inherit",boxSizing:"border-box"}})]}),(0,o.jsxs)("div",{style:{marginBottom:y.YK.lg},children:[(0,o.jsx)("label",{style:{display:"block",fontSize:y.Il.small.fontSize,fontWeight:600,color:y.Tj.secondary[900],marginBottom:y.YK.xs},children:"Categoria"}),(0,o.jsxs)("select",{value:d.category||"",onChange:e=>c({...d,category:e.target.value}),style:{width:"100%",padding:y.YK.md,border:"1px solid ".concat(y.Tj.primary[200]),borderRadius:y.Vq.lg,fontSize:y.Il.body.fontSize,fontFamily:"inherit",boxSizing:"border-box",backgroundColor:y.Tj.background.light,color:y.Tj.secondary[900],cursor:"pointer"},children:[(0,o.jsx)("option",{value:"",children:"Selecione uma categoria"}),(()=>{let e=new Set;return t.forEach(t=>{t.category&&e.add(t.category)}),Array.from(e).sort()})().map(e=>(0,o.jsx)("option",{value:e,children:e},e))]})]}),(0,o.jsxs)("div",{style:{marginBottom:y.YK.lg},children:[(0,o.jsx)("label",{style:{display:"block",fontSize:y.Il.small.fontSize,fontWeight:600,color:y.Tj.secondary[900],marginBottom:y.YK.xs},children:"Data"}),(0,o.jsx)("input",{type:"date",value:d.date||"",onChange:e=>c({...d,date:e.target.value}),style:{width:"100%",padding:y.YK.md,border:"1px solid ".concat(y.Tj.primary[200]),borderRadius:y.Vq.lg,fontSize:y.Il.body.fontSize,fontFamily:"inherit",boxSizing:"border-box"}})]}),(0,o.jsxs)("div",{style:{display:"flex",gap:y.YK.md,justifyContent:"flex-end"},children:[(0,o.jsx)("button",{onClick:()=>l(null),disabled:g,style:{padding:"".concat(y.YK.md," ").concat(y.YK.lg),border:"1px solid ".concat(y.Tj.primary[200]),background:y.Tj.background.light,borderRadius:y.Vq.lg,fontSize:y.Il.body.fontSize,fontWeight:600,color:y.Tj.primary[600],cursor:g?"not-allowed":"pointer",transition:y.bm.normal,opacity:g?.6:1},onMouseEnter:e=>{g||(e.currentTarget.style.background=y.Tj.primary[50])},onMouseLeave:e=>{g||(e.currentTarget.style.background=y.Tj.background.light)},children:"Cancelar"}),(0,o.jsx)("button",{onClick:p,disabled:g,style:{padding:"".concat(y.YK.md," ").concat(y.YK.lg),background:y.Tj.primary[600],border:"none",borderRadius:y.Vq.lg,fontSize:y.Il.body.fontSize,fontWeight:600,color:"white",cursor:g?"not-allowed":"pointer",transition:y.bm.normal,opacity:g?.6:1},onMouseEnter:e=>{g||(e.currentTarget.style.background=y.Tj.primary[700])},onMouseLeave:e=>{g||(e.currentTarget.style.background=y.Tj.primary[600])},children:g?"Salvando...":"Salvar"})]})]})}),"    "]})}var L=r(21786),P=r(89715),$=r(42348),N=r(42529);function H(e){let{onTransactionsAdded:t}=e,[r,a]=(0,n.useState)(null),[i,l]=(0,n.useState)(!1),[d,c]=(0,n.useState)(!1),[g,u]=(0,n.useState)([]),[m,p]=(0,n.useState)(!1),[x,h]=(0,n.useState)(""),[j,b]=(0,n.useState)(""),[f,T]=(0,n.useState)(new Set),[S,v]=(0,n.useState)("all"),[z,Y]=(0,n.useState)(0),[K]=(0,n.useState)(2),[k,I]=(0,n.useState)(!1);(0,n.useEffect)(()=>{(async()=>{try{let e=await (0,s.HW)();if(!e)return;let{role:t}=await (0,s.uG)(e.id);I("admin"===t);let r=new Date,o="".concat(r.getFullYear(),"-").concat(String(r.getMonth()+1).padStart(2,"0")),{data:n}=await (0,s.M1)(e.id,o);Y((null==n?void 0:n.usage_count)||0)}catch(e){console.error("Error checking analysis usage:",e)}})()},[g]);let C=async()=>{if(!r)return void h("Selecione um arquivo primeiro");if(!k&&z>=K)return void h("❌ Voc\xea atingiu o limite de ".concat(K," an\xe1lises este m\xeas. Adquira o plano Pro para an\xe1lises ilimitadas!"));l(!0),c(!0),h("");try{let e=await r.text(),t=r.name.toLowerCase(),o=t.endsWith(".csv"),n=t.endsWith(".ofx")||t.endsWith(".txt"),a=t.endsWith(".pdf");if(!o&&!n&&!a){h("Arquivo deve ser CSV, OFX ou PDF"),l(!1),c(!1);return}let i=e;o?i=e.split("\n").map(e=>(e.match(/("([^"]*)"|[^,]+)/g)||[]).map(e=>e.replace(/^"|"$/g,"").trim())).map(e=>e.join(" | ")).join("\n"):n&&(i=function(e){let t=[];return(e.match(/<STMTTRN>[\s\S]*?<\/STMTTRN>/g)||[]).forEach(e=>{var r,o,n,a;let s=(null==(r=e.match(/<TRNTYPE>([^<]+)<\/TRNTYPE>/))?void 0:r[1])||"DEBIT",i=(null==(o=e.match(/<DTPOSTED>([^<]+)<\/DTPOSTED>/))?void 0:o[1])||"",l=(null==(n=e.match(/<TRNAMT>([^<]+)<\/TRNAMT>/))?void 0:n[1])||"0",d=(null==(a=e.match(/<MEMO>([^<]+)<\/MEMO>/))?void 0:a[1])||"Transaction";t.push("".concat(i," | ").concat(s," | ").concat(l," | ").concat(d))}),t.join("\n")}(e));let d=await fetch("/api/analyze-gemini",{method:"POST",headers:{"Content-Type":"application/json"},body:JSON.stringify({fileContent:i})});if(!d.ok){let e=await d.json();throw Error(e.error||"Erro ao analisar com IA")}let g=(await d.json()).transactions;if(0===g.length){h("Nenhuma transa\xe7\xe3o encontrada no arquivo"),l(!1),c(!1);return}try{let e=await (0,s.HW)();if(e){let t=new Date,r="".concat(t.getFullYear(),"-").concat(String(t.getMonth()+1).padStart(2,"0"));await (0,s.fE)(e.id,r),Y(e=>e+1)}}catch(e){console.error("Error incrementing analysis usage:",e)}u(g),T(new Set(Array.from({length:g.length},(e,t)=>t))),b("".concat(g.length," transa\xe7\xf5es encontradas!"))}catch(e){h(e instanceof Error?e.message:"Erro ao analisar arquivo"),console.error(e)}finally{l(!1),c(!1)}},R=async()=>{if(0===f.size)return void h("Selecione pelo menos uma transa\xe7\xe3o");p(!0),h("");try{let e=await (0,s.HW)();if(!e){h("Usu\xe1rio n\xe3o autenticado"),p(!1);return}let r=0,o=0,n=0;for(let t of Array.from(f)){let a=g[t];if("all"!==S&&a.type!==S){n++;continue}try{let{error:t}=await (0,s.yY)({user_id:e.id,description:a.description,amount:a.amount,type:a.type,category:a.category,date:a.date});t?(o++,console.error("Erro inserindo transa\xe7\xe3o: ".concat(a.description),t)):r++}catch(e){o++,console.error("Erro ao inserir: ".concat(a.description),e)}}b("✅ ".concat(r," transa\xe7\xf5es inseridas com sucesso!").concat(o>0?" (".concat(o," falharam)"):"").concat(n>0?" (".concat(n," ignoradas pelo filtro)"):"")),setTimeout(()=>{a(null),u([]),T(new Set),null==t||t()},2e3)}catch(e){h(e instanceof Error?e.message:"Erro ao inserir transa\xe7\xf5es")}finally{p(!1)}};return(0,o.jsxs)("div",{style:{background:y.Tj.background.light,borderRadius:y.Vq.xl,boxShadow:y.Eo.md,border:"1px solid ".concat(y.Tj.primary[100]),padding:y.YK.xl},children:[(0,o.jsxs)("div",{style:{display:"flex",alignItems:"center",gap:y.YK.md,marginBottom:y.YK.lg},children:[(0,o.jsx)("div",{style:{width:"44px",height:"44px",background:y.Tj.primary[100],borderRadius:y.Vq.lg,display:"flex",alignItems:"center",justifyContent:"center"},children:(0,o.jsx)(L.A,{size:24,color:y.Tj.primary[600]})}),(0,o.jsxs)("div",{style:{flex:1},children:[(0,o.jsx)("h2",{style:{fontSize:y.Il.h4.fontSize,fontWeight:700,color:y.Tj.secondary[900],margin:0},children:"Importar Extrato Banc\xe1rio"}),(0,o.jsx)("p",{style:{fontSize:y.Il.small.fontSize,color:y.Tj.secondary[500],margin:"4px 0 0 0"},children:"IA analisa e lan\xe7a automaticamente"})]}),(0,o.jsxs)("div",{style:{padding:"".concat(y.YK.sm," ").concat(y.YK.md),backgroundColor:z>=K&&999999!==K?y.Tj.status.error+"15":y.Tj.primary[50],borderRadius:y.Vq.md,border:"1px solid ".concat(z>=K&&999999!==K?y.Tj.status.error:y.Tj.primary[200]),textAlign:"center"},children:[(0,o.jsx)("p",{style:{...y.Il.label,margin:0,color:y.Tj.secondary[900]},children:k?"∞ Ilimitado":"".concat(z,"/").concat(K," an\xe1lises")}),(0,o.jsx)("p",{style:{...y.Il.small,margin:"".concat(y.YK.xs," 0 0 0"),color:k?y.Tj.status.success:z>=K?y.Tj.status.error:y.Tj.secondary[500]},children:k?"\uD83D\uDC51 Admin - An\xe1lises ilimitadas":z>=K?"❌ Limite atingido":"".concat(K-z," restantes")})]})]}),0===g.length&&(0,o.jsxs)("div",{style:{marginBottom:y.YK.lg},children:[(0,o.jsxs)("label",{style:{display:"block",padding:y.YK.xl,border:"2px dashed ".concat(y.Tj.primary[300]),borderRadius:y.Vq.lg,textAlign:"center",cursor:"pointer",transition:y.bm.normal,background:y.Tj.primary[50]},onDragOver:e=>{e.preventDefault(),e.currentTarget.style.background=y.Tj.primary[100],e.currentTarget.style.borderColor=y.Tj.primary[500]},onDragLeave:e=>{e.currentTarget.style.background=y.Tj.primary[50],e.currentTarget.style.borderColor=y.Tj.primary[300]},onDrop:e=>{var t;e.preventDefault(),e.currentTarget.style.background=y.Tj.primary[50],e.currentTarget.style.borderColor=y.Tj.primary[300];let r=null==(t=e.dataTransfer.files)?void 0:t[0];r&&(a(r),h(""))},children:[(0,o.jsx)(P.A,{size:32,color:y.Tj.primary[500],style:{margin:"0 auto 12px"}}),(0,o.jsx)("p",{style:{fontSize:y.Il.body.fontSize,fontWeight:600,color:y.Tj.secondary[900],margin:"0 0 4px 0"},children:r?r.name:"Arrastar ou clicar para selecionar"}),(0,o.jsx)("p",{style:{fontSize:y.Il.small.fontSize,color:y.Tj.secondary[500],margin:0},children:"CSV, OFX ou PDF do seu banco"}),(0,o.jsx)("input",{type:"file",accept:".csv,.ofx,.txt,.pdf",onChange:e=>{var t;let r=null==(t=e.target.files)?void 0:t[0];r&&(a(r),h(""),b(""),u([]))},style:{display:"none"}})]}),r&&(0,o.jsxs)("div",{style:{display:"flex",gap:y.YK.md,marginTop:y.YK.lg},children:[(0,o.jsxs)("button",{onClick:C,disabled:i||!r,style:{flex:1,padding:"".concat(y.YK.md," ").concat(y.YK.lg),background:i?y.Tj.secondary[300]:"linear-gradient(135deg, ".concat(y.Tj.primary[500]," 0%, ").concat(y.Tj.primary[600]," 100%)"),color:y.Tj.background.light,border:"none",borderRadius:y.Vq.lg,fontSize:y.Il.label.fontSize,fontWeight:600,cursor:i?"not-allowed":"pointer",transition:y.bm.normal,boxShadow:i?"none":y.Eo.blue,opacity:i?.6:1,display:"flex",alignItems:"center",justifyContent:"center",gap:y.YK.sm},children:[i&&(0,o.jsx)($.A,{size:18,style:{animation:"spin 1s linear infinite"}}),i?"Analisando...":"Analisar com IA"]}),(0,o.jsx)("button",{onClick:()=>{a(null),h(""),b("")},style:{padding:"".concat(y.YK.md," ").concat(y.YK.lg),background:y.Tj.secondary[100],color:y.Tj.secondary[600],border:"1px solid ".concat(y.Tj.secondary[200]),borderRadius:y.Vq.lg,fontSize:y.Il.label.fontSize,fontWeight:600,cursor:"pointer",transition:y.bm.normal},onMouseEnter:e=>{e.currentTarget.style.background=y.Tj.secondary[200]},onMouseLeave:e=>{e.currentTarget.style.background=y.Tj.secondary[100]},children:"Limpar"})]})]}),x&&(0,o.jsxs)("div",{style:{background:y.Tj.status.error+"15",border:"1px solid ".concat(y.Tj.status.error),borderRadius:y.Vq.lg,padding:y.YK.md,marginBottom:y.YK.lg,color:y.Tj.status.error,fontSize:y.Il.small.fontSize,fontWeight:500,display:"flex",alignItems:"center",gap:y.YK.sm},children:[(0,o.jsx)(w.A,{size:18}),x]}),j&&g.length>0&&(0,o.jsxs)("div",{style:{background:y.Tj.status.success+"15",border:"1px solid ".concat(y.Tj.status.success),borderRadius:y.Vq.lg,padding:y.YK.md,marginBottom:y.YK.lg,color:y.Tj.status.success,fontSize:y.Il.small.fontSize,fontWeight:500,display:"flex",alignItems:"center",gap:y.YK.sm},children:[(0,o.jsx)(N.A,{size:18}),j]}),g.length>0&&(0,o.jsxs)("div",{children:[(0,o.jsxs)("div",{style:{display:"flex",gap:y.YK.md,marginBottom:y.YK.lg,padding:y.YK.md,background:y.Tj.primary[50],borderRadius:y.Vq.lg,alignItems:"center"},children:[(0,o.jsx)("label",{style:{...y.Il.label,color:y.Tj.secondary[900],margin:0},children:"Importar:"}),(0,o.jsxs)("select",{value:S,onChange:e=>v(e.target.value),style:{padding:"".concat(y.YK.sm," ").concat(y.YK.md),border:"1px solid ".concat(y.Tj.primary[300]),borderRadius:y.Vq.md,backgroundColor:y.Tj.background.light,color:y.Tj.secondary[900],fontSize:y.Il.small.fontSize,fontWeight:500,cursor:"pointer"},children:[(0,o.jsx)("option",{value:"all",children:"Ambos (Despesas + Receitas)"}),(0,o.jsx)("option",{value:"expense",children:"Apenas Despesas"}),(0,o.jsx)("option",{value:"income",children:"Apenas Receitas"})]})]}),(0,o.jsxs)("div",{style:{display:"flex",alignItems:"center",gap:y.YK.md,padding:y.YK.md,background:y.Tj.secondary[50],borderRadius:y.Vq.lg,marginBottom:y.YK.lg,cursor:"pointer"},onClick:()=>void(f.size===g.length?T(new Set):T(new Set(Array.from({length:g.length},(e,t)=>t)))),children:[(0,o.jsx)("input",{type:"checkbox",checked:f.size===g.length,onChange:()=>{},style:{width:"18px",height:"18px",cursor:"pointer"}}),(0,o.jsx)("span",{style:{fontSize:y.Il.label.fontSize,fontWeight:600,color:y.Tj.secondary[900]},children:f.size===g.length?"Desselecionar Tudo":"Selecionar Tudo (".concat(g.length,")")})]}),(0,o.jsx)("div",{style:{maxHeight:"400px",overflowY:"auto",marginBottom:y.YK.lg,border:"1px solid ".concat(y.Tj.secondary[200]),borderRadius:y.Vq.lg},children:g.map((e,t)=>(0,o.jsxs)("div",{style:{display:"flex",alignItems:"center",padding:y.YK.md,borderBottom:t<g.length-1?"1px solid ".concat(y.Tj.secondary[100]):"none",background:f.has(t)?y.Tj.primary[50]:y.Tj.background.light,cursor:"pointer",transition:y.bm.normal},onClick:()=>(e=>{let t=new Set(f);t.has(e)?t.delete(e):t.add(e),T(t)})(t),children:[(0,o.jsx)("input",{type:"checkbox",checked:f.has(t),onChange:()=>{},style:{width:"18px",height:"18px",marginRight:y.YK.md,cursor:"pointer"}}),(0,o.jsxs)("div",{style:{flex:1},children:[(0,o.jsx)("p",{style:{fontSize:y.Il.small.fontSize,fontWeight:600,color:y.Tj.secondary[900],margin:"0 0 4px 0"},children:e.description}),(0,o.jsxs)("div",{style:{display:"flex",gap:y.YK.md,fontSize:y.Il.small.fontSize,color:y.Tj.secondary[500]},children:[(0,o.jsx)("span",{children:e.date}),(0,o.jsx)("span",{children:"•"}),(0,o.jsx)("span",{children:e.category})]})]}),(0,o.jsxs)("div",{style:{textAlign:"right",minWidth:"100px"},children:[(0,o.jsxs)("p",{style:{fontSize:"16px",fontWeight:700,color:"income"===e.type?y.Tj.status.success:y.Tj.status.error,margin:0},children:["income"===e.type?"+":"-"," R$ ",e.amount.toFixed(2)]}),(0,o.jsx)("p",{style:{fontSize:"11px",color:y.Tj.secondary[400],margin:"2px 0 0 0",textTransform:"capitalize"},children:"income"===e.type?"Receita":"Despesa"})]})]},t))}),(0,o.jsxs)("button",{onClick:R,disabled:m||0===f.size,style:{width:"100%",padding:"".concat(y.YK.md," ").concat(y.YK.lg),background:m?y.Tj.secondary[300]:"linear-gradient(135deg, ".concat(y.Tj.status.success," 0%, ").concat(y.Tj.status.success,"dd 100%)"),color:y.Tj.background.light,border:"none",borderRadius:y.Vq.lg,fontSize:y.Il.label.fontSize,fontWeight:600,cursor:m||0===f.size?"not-allowed":"pointer",transition:y.bm.normal,boxShadow:m?"none":y.Eo.blue,opacity:m||0===f.size?.6:1,display:"flex",alignItems:"center",justifyContent:"center",gap:y.YK.sm},children:[m&&(0,o.jsx)($.A,{size:18,style:{animation:"spin 1s linear infinite"}}),m?"Inserindo...":"Lan\xe7ar ".concat(f.size," Transa\xe7\xf5es")]})]}),(0,o.jsx)("style",{children:"\n        @keyframes spin {\n          to { transform: rotate(360deg); }\n        }\n      "})]})}function G(e){let{transactions:t}=e,[r,a]=(0,n.useState)([]),[s,i]=(0,n.useState)(!0);(0,n.useEffect)(()=>{if(!t.length)return void i(!1);let e=[],r=t.filter(e=>"expense"===e.type),o=new Map;r.forEach(e=>{let t="".concat(e.category,"-").concat(e.amount.toFixed(2));o.has(t)||o.set(t,[]),o.get(t).push(e)}),o.forEach((t,r)=>{if(t.length>1){let[o,n]=r.split("-"),a=t.map(e=>new Date(e.date).getTime()),s=[];for(let e=1;e<a.length;e++)s.push((a[e]-a[e-1])/864e5);s.some(e=>e<=3&&e>0)&&e.push({id:"duplicate-".concat(r),type:"duplicate",title:"⚠️ Poss\xedvel Despesa Duplicada",description:"".concat(t.length," transa\xe7\xf5es de ").concat(o," com ").concat(n," em dias pr\xf3ximos"),amount:parseFloat(n)*t.length,severity:"high",transactions:t.map(e=>e.id)})}});let n=new Map;r.forEach(e=>{n.has(e.category)||n.set(e.category,[]),n.get(e.category).push(e.amount)}),n.forEach((t,r)=>{if(t.length>=2){let o=t.reduce((e,t)=>e+t,0)/t.length,n=Math.max(...t);n>2*o&&e.push({id:"high-".concat(r),type:"high_spend",title:"\uD83D\uDCB8 Gasto Elevado em ".concat(r),description:"R$ ".concat(n.toFixed(2)," \xe9 ").concat(((n/o-1)*100).toFixed(0),"% acima da sua m\xe9dia de R$ ").concat(o.toFixed(2)),amount:n,severity:"medium"})}});let s=new Map;r.forEach(e=>{s.set(e.category,(s.get(e.category)||0)+e.amount)});let l=Array.from(s.values()).reduce((e,t)=>e+t,0);s.forEach((t,r)=>{let o=t/l*100;o>30&&"Sal\xe1rio"!==r&&e.push({id:"overage-".concat(r),type:"category_overage",title:"\uD83D\uDCCA ".concat(r," acima do esperado"),description:"".concat(o.toFixed(0),"% dos seus gastos em ").concat(r,". M\xe9dia esperada \xe9 20%"),amount:t,severity:"low"})}),a(e.sort((e,t)=>{let r={high:0,medium:1,low:2};return r[e.severity]-r[t.severity]})),i(!1)},[t]);let l={high:y.Tj.status.error,medium:y.Tj.primary[500],low:y.Tj.primary[400]},d={high:y.Tj.status.error+"15",medium:y.Tj.primary[100],low:y.Tj.primary[50]};return s?(0,o.jsx)("div",{style:{padding:y.YK.lg,backgroundColor:y.Tj.background.light,borderRadius:y.Vq.lg,textAlign:"center",color:y.Tj.secondary[500]},children:"Carregando alertas..."}):0===r.length?(0,o.jsx)("div",{style:{padding:y.YK.lg,backgroundColor:y.Tj.status.success+"15",borderRadius:y.Vq.lg,border:"1px solid ".concat(y.Tj.status.success),textAlign:"center"},children:(0,o.jsx)("p",{style:{color:y.Tj.status.success,fontWeight:"bold",margin:0},children:"✅ Nenhum alerta! Seus gastos est\xe3o dentro do esperado."})}):(0,o.jsx)("div",{style:{display:"flex",flexDirection:"column",gap:y.YK.md},children:r.map(e=>(0,o.jsxs)("div",{style:{padding:y.YK.md,backgroundColor:d[e.severity],border:"2px solid ".concat(l[e.severity]),borderRadius:y.Vq.md,display:"flex",gap:y.YK.md,alignItems:"flex-start",transition:y.bm.normal,cursor:"pointer"},onMouseEnter:e=>{let t=e.currentTarget;t.style.transform="translateY(-2px)",t.style.boxShadow=y.Eo.md},onMouseLeave:e=>{let t=e.currentTarget;t.style.transform="translateY(0)",t.style.boxShadow="none"},children:[(0,o.jsx)(w.A,{size:24,color:l[e.severity],style:{flexShrink:0,marginTop:2}}),(0,o.jsxs)("div",{style:{flex:1},children:[(0,o.jsx)("h4",{style:{...y.Il.label,margin:"0 0 ".concat(y.YK.xs," 0"),color:l[e.severity]},children:e.title}),(0,o.jsx)("p",{style:{...y.Il.small,margin:0,color:y.Tj.secondary[500]},children:e.description}),e.amount&&(0,o.jsxs)("p",{style:{...y.Il.label,margin:"".concat(y.YK.xs," 0 0 0"),color:y.Tj.secondary[900]},children:["Impacto: R$ ",e.amount.toFixed(2)]})]})]},e.id))})}r(95704).env.OPENAI_API_KEY;var U=r(30814),J=r(74474);function X(e){let{transactions:t}=e,[r,a]=(0,n.useState)([]),[s,i]=(0,n.useState)(!0);(0,n.useEffect)(()=>{if(!t.length)return void i(!1);let e=[],r=t.filter(e=>"expense"===e.type),n=new Map;r.forEach(e=>{n.set(e.category,(n.get(e.category)||0)+e.amount)});let s=Array.from(n.values()).reduce((e,t)=>e+t,0),l=n.get("Alimenta\xe7\xe3o")||0;l>.25*s&&e.push({id:"food-reduction",title:"\uD83C\uDF54 Reduzir Gastos com Alimenta\xe7\xe3o",description:"Voc\xea gasta ".concat((l/s*100).toFixed(0),"% com alimenta\xe7\xe3o. Tente preparar 2-3 refei\xe7\xf5es em casa por semana."),potentialSavings:.1*l,icon:(0,o.jsx)(Y.A,{size:24,color:y.Tj.primary[500]}),priority:"high"});let d=n.get("Lazer")||0;if(d>.15*s){let t=.15*d;e.push({id:"entertainment-reduction",title:"\uD83C\uDFAC Otimizar Gastos com Lazer",description:"Voc\xea gasta R$ ".concat(d.toFixed(2)," em Lazer. Considere subscri\xe7\xf5es compartilhadas e atividades gratuitas."),potentialSavings:t,icon:(0,o.jsx)(U.A,{size:24,color:y.Tj.primary[500]}),priority:"medium"})}let c=n.get("Transporte")||0;if(c>100){let t=.1*c;e.push({id:"transport-optimization",title:"\uD83D\uDE97 Otimizar Gastos com Transporte",description:"Voc\xea gasta R$ ".concat(c.toFixed(2)," em Transporte. Considere carpooling, bicicleta ou transporte p\xfablico em dias alternados."),potentialSavings:t,icon:(0,o.jsx)(Y.A,{size:24,color:y.Tj.primary[500]}),priority:"medium"})}let g=s/30;e.push({id:"emergency-fund",title:"\uD83C\uDFE6 Criar Fundo de Emerg\xeancia",description:"Reserve 10-15% da sua renda (m\xe9dia ".concat(g.toFixed(2),"/dia) em uma conta separada para imprevistos."),potentialSavings:.12*g*30,icon:(0,o.jsx)(J.A,{size:24,color:y.Tj.status.success}),priority:"high"}),e.push({id:"budget-planning",title:"\uD83D\uDCCA Definir Or\xe7amento por Categoria",description:"Crie limites para cada categoria. Recomendado: Alimenta\xe7\xe3o 25%, Transporte 15%, Habita\xe7\xe3o 30%, Outros 30%.",potentialSavings:.1*s,icon:(0,o.jsx)(k.A,{size:24,color:y.Tj.primary[500]}),priority:"high"}),a(e.sort((e,t)=>{let r={high:0,medium:1,low:2};return r[e.priority]-r[t.priority]})),i(!1)},[t]);let l={high:y.Tj.status.error,medium:y.Tj.primary[500],low:y.Tj.primary[400]},d={high:y.Tj.status.error+"10",medium:y.Tj.primary[50],low:y.Tj.primary[50]};return s?(0,o.jsx)("div",{style:{padding:y.YK.lg,backgroundColor:y.Tj.background.light,borderRadius:y.Vq.lg,textAlign:"center",color:y.Tj.secondary[500]},children:"Gerando sugest\xf5es..."}):(0,o.jsx)("div",{style:{display:"flex",flexDirection:"column",gap:y.YK.md},children:r.map(e=>(0,o.jsxs)("div",{style:{padding:y.YK.md,backgroundColor:d[e.priority],border:"1px solid ".concat(l[e.priority],"30"),borderRadius:y.Vq.md,display:"flex",gap:y.YK.md,alignItems:"flex-start",transition:y.bm.normal,cursor:"pointer"},onMouseEnter:t=>{let r=t.currentTarget;r.style.transform="translateY(-2px)",r.style.boxShadow=y.Eo.sm,r.style.backgroundColor=d[e.priority]},onMouseLeave:e=>{let t=e.currentTarget;t.style.transform="translateY(0)",t.style.boxShadow="none"},children:[(0,o.jsx)("div",{style:{flexShrink:0},children:e.icon}),(0,o.jsxs)("div",{style:{flex:1},children:[(0,o.jsx)("h4",{style:{...y.Il.label,margin:"0 0 ".concat(y.YK.xs," 0"),color:y.Tj.secondary[900]},children:e.title}),(0,o.jsx)("p",{style:{...y.Il.small,margin:0,color:y.Tj.secondary[500]},children:e.description}),(0,o.jsx)("div",{style:{marginTop:y.YK.xs,padding:"".concat(y.YK.xs," ").concat(y.YK.sm),backgroundColor:y.Tj.status.success+"20",borderRadius:y.Vq.sm,display:"inline-block"},children:(0,o.jsxs)("p",{style:{...y.Il.small,margin:0,color:y.Tj.status.success,fontWeight:"bold"},children:["\uD83D\uDCB0 Potencial de economia: R$ ",e.potentialSavings.toFixed(2),"/m\xeas"]})})]})]},e.id))})}function Q(e){let{limits:t,categorySpend:r}=e,n=t.reduce((e,t)=>e+t.limit_amount,0),a=t.reduce((e,t)=>e+(r[t.category]||0),0),s=t.filter(e=>(r[e.category]||0)>e.limit_amount),i=t.filter(e=>{let t=(r[e.category]||0)/e.limit_amount*100;return t>=80&&t<100}),l=[],d=a/n*100;return d>100?l.push({type:"error",icon:"\uD83D\uDEA8",text:"Voc\xea j\xe1 gastou R$ ".concat((a-n).toFixed(2)," al\xe9m de todos os seus limites!")}):d>=80?l.push({type:"warning",icon:"⚠️",text:"Voc\xea est\xe1 em ".concat(d.toFixed(0),"% de seus limites. Tome cuidado!")}):l.push({type:"success",icon:"✨",text:"\xd3timo! Voc\xea est\xe1 em ".concat(d.toFixed(0),"% dos seus limites.")}),(t.length,[]).length>0&&l.push({type:"info",icon:"ℹ️",text:"Defina limites para mais categorias para melhorar seu controle."}),s.length>0&&l.push({type:"error",icon:"\uD83D\uDCC8",text:"".concat(s.length," categoria(s) acima do limite: ").concat(s.map(e=>e.category).join(", "))}),i.length>0&&l.push({type:"warning",icon:"\uD83D\uDCCA",text:"".concat(i.length," categoria(s) pr\xf3xima(s) ao limite: ").concat(i.map(e=>e.category).join(", "))}),(0,o.jsx)("div",{style:{display:"flex",flexDirection:"column",gap:y.YK.sm},children:l.map((e,t)=>{let r="error"===e.type?y.Tj.status.error+"15":"warning"===e.type?y.Tj.status.warning+"15":"success"===e.type?y.Tj.status.success+"15":y.Tj.primary[50],n="error"===e.type?y.Tj.status.error:"warning"===e.type?y.Tj.status.warning:"success"===e.type?y.Tj.status.success:y.Tj.primary[300];return(0,o.jsxs)("div",{style:{padding:y.YK.md,backgroundColor:r,border:"1px solid ".concat(n,"30"),borderRadius:y.Vq.md,display:"flex",gap:y.YK.sm,alignItems:"flex-start"},children:[(0,o.jsx)("span",{style:{fontSize:"18px"},children:e.icon}),(0,o.jsx)("p",{style:{fontSize:y.Il.small.fontSize,color:y.Tj.secondary[700],margin:0},children:e.text})]},t)})})}function Z(e){let{userId:t,transactions:r}=e,[a,i]=(0,n.useState)([]),[l,d]=(0,n.useState)(!0),c=new Date,g="".concat(c.getFullYear(),"-").concat(String(c.getMonth()+1).padStart(2,"0")),u=(0,n.useMemo)(()=>{let e={};return r.filter(e=>e.date.substring(0,7)===g&&"expense"===e.type).forEach(t=>{e[t.category]=(e[t.category]||0)+t.amount}),e},[r]);return((0,n.useEffect)(()=>{(async()=>{try{let{data:e}=await (0,s.fe)(t);i(e||[])}catch(e){console.error("Error loading category limits:",e)}finally{d(!1)}})()},[t]),l||0===a.length)?null:(0,o.jsxs)("div",{style:{background:y.Tj.background.light,borderRadius:y.Vq.xl,boxShadow:y.Eo.md,border:"1px solid ".concat(y.Tj.primary[100]),overflow:"hidden",marginBottom:y.YK.lg},children:[(0,o.jsxs)("div",{style:{padding:y.YK.lg,borderBottom:"1px solid ".concat(y.Tj.primary[100]),display:"flex",alignItems:"center",gap:y.YK.md},children:[(0,o.jsx)("div",{style:{width:"44px",height:"44px",background:y.Tj.primary[100],borderRadius:y.Vq.lg,display:"flex",alignItems:"center",justifyContent:"center"},children:(0,o.jsx)(Y.A,{size:24,color:y.Tj.primary[600]})}),(0,o.jsxs)("div",{children:[(0,o.jsx)("h3",{style:{fontSize:y.Il.h3.fontSize,fontWeight:700,color:y.Tj.secondary[900],margin:0},children:"\uD83D\uDCC8 Limites vs Gastos por Categoria"}),(0,o.jsx)("p",{style:{fontSize:y.Il.small.fontSize,color:y.Tj.secondary[500],margin:"".concat(y.YK.xs," 0 0 0")},children:"Acompanhe seus gastos em rela\xe7\xe3o aos limites definidos neste m\xeas"})]})]}),(0,o.jsx)("div",{style:{padding:y.YK.lg},children:a.map((e,t)=>{let r=u[e.category]||0,n=Math.min(r/e.limit_amount*100,100),s=r>e.limit_amount;return e.limit_amount,(0,o.jsxs)("div",{style:{marginBottom:t<a.length-1?y.YK.md:0,display:"flex",justifyContent:"space-between",alignItems:"center",gap:y.YK.md},children:[(0,o.jsx)("div",{style:{flex:1},children:(0,o.jsx)("p",{style:{fontSize:y.Il.small.fontSize,fontWeight:500,color:y.Tj.secondary[900],margin:0},children:e.category})}),(0,o.jsx)("div",{style:{flex:3,height:"6px",backgroundColor:y.Tj.secondary[200],borderRadius:y.Vq.full,overflow:"hidden"},children:(0,o.jsx)("div",{style:{height:"100%",width:"".concat(n,"%"),backgroundColor:s?y.Tj.status.error:n>=80?y.Tj.status.warning:y.Tj.status.success,transition:y.bm.normal}})}),(0,o.jsx)("div",{style:{flex:1,textAlign:"right"},children:(0,o.jsxs)("p",{style:{fontSize:y.Il.small.fontSize,fontWeight:600,color:s?y.Tj.status.error:y.Tj.secondary[900],margin:0},children:["R$ ",r.toFixed(2)," / R$ ",e.limit_amount.toFixed(2)]})})]},e.id)})}),(0,o.jsxs)("div",{style:{padding:y.YK.lg,backgroundColor:y.Tj.primary[50],borderTop:"1px solid ".concat(y.Tj.primary[100])},children:[(0,o.jsx)("h4",{style:{fontSize:y.Il.body.fontSize,fontWeight:600,color:y.Tj.secondary[900],margin:0,marginBottom:y.YK.md},children:"\uD83D\uDCA1 Insights do Seu Or\xe7amento:"}),(0,o.jsx)(Q,{limits:a,categorySpend:u})]})]})}function ee(){var e;let[t,r]=(0,n.useState)(null),[i,l]=(0,n.useState)([]),[d,c]=(0,n.useState)(!0),g=(0,a.useRouter)();(0,n.useEffect)(()=>{(async()=>{try{let e=await (0,s.HW)();if(!e)return void g.push("/signin");r(e);let{data:t}=await (0,s.I0)(e.id);t&&l(t)}catch(e){console.error("Error loading data:",e)}finally{c(!1)}})()},[g]);let u=async()=>{await (0,s.signOut)(),g.push("/signin")},m=async()=>{if(t){let{data:e}=await (0,s.I0)(t.id);e&&l(e)}};return d?(0,o.jsxs)("div",{style:{minHeight:"100vh",display:"flex",alignItems:"center",justifyContent:"center",background:y.Tj.background.gradient},children:[(0,o.jsxs)("div",{style:{textAlign:"center"},children:[(0,o.jsx)("div",{style:{width:"50px",height:"50px",border:"3px solid ".concat(y.Tj.primary[200]),borderTop:"3px solid ".concat(y.Tj.primary[500]),borderRadius:"50%",animation:"spin 1s linear infinite",margin:"0 auto 16px"}}),(0,o.jsx)("p",{style:{fontSize:"16px",color:y.Tj.secondary[600],fontWeight:500},children:"Carregando seus dados..."})]}),(0,o.jsx)("style",{children:"\n          @keyframes spin {\n            to { transform: rotate(360deg); }\n          }\n        "})]}):t?(0,o.jsxs)("div",{style:{minHeight:"100vh",background:y.Tj.background.lighter},children:[(0,o.jsx)(E.A,{userName:(null==(e=t.user_metadata)?void 0:e.name)||t.email||"Usu\xe1rio",onLogout:u}),(0,o.jsx)("main",{style:{maxWidth:"1400px",margin:"0 auto",padding:y.YK.xl},children:(0,o.jsxs)("div",{style:{display:"grid",gridTemplateColumns:"1fr 380px",gap:y.YK.xl,alignItems:"start"},children:[(0,o.jsxs)("div",{style:{display:"flex",flexDirection:"column",gap:y.YK.xl},children:[(0,o.jsx)("section",{children:(0,o.jsx)(B,{transactions:i,userId:t.id})}),(0,o.jsx)("section",{children:(0,o.jsx)(H,{onTransactionsAdded:m})}),t&&(0,o.jsx)("section",{children:(0,o.jsx)(Z,{userId:t.id,transactions:i})}),(0,o.jsxs)("section",{children:[(0,o.jsx)("h2",{style:{fontSize:"20px",fontWeight:"bold",marginBottom:y.YK.md,color:y.Tj.secondary[900]},children:"⚠️ Avisos e Alertas"}),(0,o.jsx)(G,{transactions:i})]}),(0,o.jsxs)("section",{children:[(0,o.jsx)("h2",{style:{fontSize:"20px",fontWeight:"bold",marginBottom:y.YK.md,color:y.Tj.secondary[900]},children:"\uD83D\uDCA1 Sugest\xf5es de Economia"}),(0,o.jsx)(X,{transactions:i})]}),(0,o.jsx)("section",{children:(0,o.jsx)(O,{transactions:i})})]}),(0,o.jsx)("div",{style:{position:"sticky",top:"calc(64px + ".concat(y.YK.xl,")")},children:(0,o.jsx)(D,{onTransactionAdded:m})})]})})]}):null}}},e=>{e.O(0,[428,300,382,441,255,358],()=>e(e.s=36430)),_N_E=e.O()}]);