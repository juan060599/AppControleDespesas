(self.webpackChunk_N_E=self.webpackChunk_N_E||[]).push([[662],{5917:(e,t,n)=>{"use strict";n.d(t,{A:()=>r});let r=(0,n(71847).A)("Check",[["path",{d:"M20 6 9 17l-5-5",key:"1gmf2c"}]])},6132:(e,t,n)=>{"use strict";n.d(t,{A:()=>r});let r=(0,n(71847).A)("CircleAlert",[["circle",{cx:"12",cy:"12",r:"10",key:"1mglay"}],["line",{x1:"12",x2:"12",y1:"8",y2:"12",key:"1pkeuh"}],["line",{x1:"12",x2:"12.01",y1:"16",y2:"16",key:"4dfq90"}]])},6191:(e,t,n)=>{"use strict";n.d(t,{A:()=>r});let r=(0,n(71847).A)("Plus",[["path",{d:"M5 12h14",key:"1ays0h"}],["path",{d:"M12 5v14",key:"s699le"}]])},9540:(e,t,n)=>{"use strict";n.d(t,{A:()=>r});let r=(0,n(71847).A)("Menu",[["line",{x1:"4",x2:"20",y1:"12",y2:"12",key:"1e0a9i"}],["line",{x1:"4",x2:"20",y1:"6",y2:"6",key:"1owob3"}],["line",{x1:"4",x2:"20",y1:"18",y2:"18",key:"yk5zj1"}]])},15870:(e,t,n)=>{"use strict";n.d(t,{A:()=>r});let r=(0,n(71847).A)("Settings",[["path",{d:"M12.22 2h-.44a2 2 0 0 0-2 2v.18a2 2 0 0 1-1 1.73l-.43.25a2 2 0 0 1-2 0l-.15-.08a2 2 0 0 0-2.73.73l-.22.38a2 2 0 0 0 .73 2.73l.15.1a2 2 0 0 1 1 1.72v.51a2 2 0 0 1-1 1.74l-.15.09a2 2 0 0 0-.73 2.73l.22.38a2 2 0 0 0 2.73.73l.15-.08a2 2 0 0 1 2 0l.43.25a2 2 0 0 1 1 1.73V20a2 2 0 0 0 2 2h.44a2 2 0 0 0 2-2v-.18a2 2 0 0 1 1-1.73l.43-.25a2 2 0 0 1 2 0l.15.08a2 2 0 0 0 2.73-.73l.22-.39a2 2 0 0 0-.73-2.73l-.15-.08a2 2 0 0 1-1-1.74v-.5a2 2 0 0 1 1-1.74l.15-.09a2 2 0 0 0 .73-2.73l-.22-.38a2 2 0 0 0-2.73-.73l-.15.08a2 2 0 0 1-2 0l-.43-.25a2 2 0 0 1-1-1.73V4a2 2 0 0 0-2-2z",key:"1qme2f"}],["circle",{cx:"12",cy:"12",r:"3",key:"1v7zrd"}]])},21190:(e,t,n)=>{"use strict";n.d(t,{A:()=>r});let r=(0,n(71847).A)("Pen",[["path",{d:"M21.174 6.812a1 1 0 0 0-3.986-3.987L3.842 16.174a2 2 0 0 0-.5.83l-1.321 4.352a.5.5 0 0 0 .623.622l4.353-1.32a2 2 0 0 0 .83-.497z",key:"1a8usu"}]])},35626:(e,t,n)=>{"use strict";n.d(t,{A:()=>r});let r=(0,n(71847).A)("ArrowLeft",[["path",{d:"m12 19-7-7 7-7",key:"1l729n"}],["path",{d:"M19 12H5",key:"x3x0zl"}]])},42348:(e,t,n)=>{"use strict";n.d(t,{A:()=>r});let r=(0,n(71847).A)("Loader",[["path",{d:"M12 2v4",key:"3427ic"}],["path",{d:"m16.2 7.8 2.9-2.9",key:"r700ao"}],["path",{d:"M18 12h4",key:"wj9ykh"}],["path",{d:"m16.2 16.2 2.9 2.9",key:"1bxg5t"}],["path",{d:"M12 18v4",key:"jadmvz"}],["path",{d:"m4.9 19.1 2.9-2.9",key:"bwix9q"}],["path",{d:"M2 12h4",key:"j09sii"}],["path",{d:"m4.9 4.9 2.9 2.9",key:"giyufr"}]])},60454:(e,t,n)=>{"use strict";n.r(t),n.d(t,{default:()=>K});var r=n(95155),a=n(12115),i=n(20063),o=n(75746),s=n(36382),l=n(24268),d=n(42348),c=n(71847);let p=(0,c.A)("Key",[["path",{d:"m15.5 7.5 2.3 2.3a1 1 0 0 0 1.4 0l2.1-2.1a1 1 0 0 0 0-1.4L19 4",key:"g0fldk"}],["path",{d:"m21 2-9.6 9.6",key:"1j0ho8"}],["circle",{cx:"7.5",cy:"15.5",r:"5.5",key:"yqb3hr"}]]);var m=n(5917),u=n(6132);let x=(0,c.A)("EyeOff",[["path",{d:"M10.733 5.076a10.744 10.744 0 0 1 11.205 6.575 1 1 0 0 1 0 .696 10.747 10.747 0 0 1-1.444 2.49",key:"ct8e1f"}],["path",{d:"M14.084 14.158a3 3 0 0 1-4.242-4.242",key:"151rxh"}],["path",{d:"M17.479 17.499a10.75 10.75 0 0 1-15.417-5.151 1 1 0 0 1 0-.696 10.75 10.75 0 0 1 4.446-5.143",key:"13bj9a"}],["path",{d:"m2 2 20 20",key:"1ooewy"}]]),y=(0,c.A)("Eye",[["path",{d:"M2.062 12.348a1 1 0 0 1 0-.696 10.75 10.75 0 0 1 19.876 0 1 1 0 0 1 0 .696 10.75 10.75 0 0 1-19.876 0",key:"1nclc0"}],["circle",{cx:"12",cy:"12",r:"3",key:"1v7zrd"}]]);function g(){let[e,t]=(0,a.useState)([]),[n,i]=(0,a.useState)(!0),[s,c]=(0,a.useState)(!1),[g,h]=(0,a.useState)(null),[j,b]=(0,a.useState)({}),[f,v]=(0,a.useState)({});(0,a.useEffect)(()=>{T()},[]);let T=async()=>{try{i(!0);let{data:e,error:n}=await (0,o._F)();if(n)return void h({type:"error",text:"Erro ao carregar chaves de API"});if(e){t(e);let n={};e.forEach(e=>{n[e.key_name]=e.key_value}),v(n)}}catch(e){h({type:"error",text:"Erro ao carregar chaves"})}finally{i(!1)}},k=async n=>{let r=f[n];if(!r||!r.trim())return void h({type:"error",text:"Chave n\xe3o pode ser vazia"});if("GEMINI_API_KEY"===n&&!r.startsWith("AIzaSy"))return void h({type:"error",text:'Chave Gemini inv\xe1lida. Deve come\xe7ar com "AIzaSy"'});if("STRIPE_PUBLIC_KEY"===n&&!r.startsWith("pk_"))return void h({type:"error",text:'Chave Stripe p\xfablica inv\xe1lida. Deve come\xe7ar com "pk_"'});if("STRIPE_SECRET_KEY"===n&&!r.startsWith("sk_"))return void h({type:"error",text:'Chave Stripe secreta inv\xe1lida. Deve come\xe7ar com "sk_"'});c(!0);try{let{error:a}=await (0,o.XW)(n,r);if(a)return void h({type:"error",text:"Erro ao salvar ".concat(n)});t(e.map(e=>e.key_name===n?{...e,key_value:r}:e)),h({type:"success",text:"✅ ".concat(n," salva com sucesso!")}),setTimeout(()=>h(null),3e3)}catch(e){h({type:"error",text:"Erro ao salvar chave"})}finally{c(!1)}};return n?(0,r.jsxs)("div",{style:{padding:l.YK.lg,backgroundColor:l.Tj.background.light,borderRadius:"12px",border:"1px solid ".concat(l.Tj.primary[100]),display:"flex",alignItems:"center",justifyContent:"center",gap:l.YK.md},children:[(0,r.jsx)(d.A,{size:20,style:{animation:"spin 1s linear infinite"}}),(0,r.jsx)("p",{style:{margin:0,color:l.Tj.secondary[600]},children:"Carregando chaves..."}),(0,r.jsx)("style",{children:"@keyframes spin { to { transform: rotate(360deg); } }"})]}):(0,r.jsxs)("section",{style:{padding:l.YK.lg,backgroundColor:l.Tj.background.light,borderRadius:"12px",border:"1px solid ".concat(l.Tj.primary[100])},children:[(0,r.jsxs)("h3",{style:{...l.Il.h3,margin:"0 0 ".concat(l.YK.md," 0"),color:l.Tj.secondary[900],display:"flex",alignItems:"center",gap:l.YK.sm},children:[(0,r.jsx)(p,{size:24}),"Chaves de API"]}),g&&(0,r.jsxs)("div",{style:{padding:l.YK.md,marginBottom:l.YK.md,backgroundColor:"success"===g.type?l.Tj.status.success+"15":"error"===g.type?l.Tj.status.error+"15":l.Tj.status.info+"15",border:"1px solid ".concat("success"===g.type?l.Tj.status.success:"error"===g.type?l.Tj.status.error:l.Tj.status.info),borderRadius:"6px",display:"flex",alignItems:"center",gap:l.YK.sm,color:"success"===g.type?l.Tj.status.success:"error"===g.type?l.Tj.status.error:l.Tj.status.info},children:["success"===g.type?(0,r.jsx)(m.A,{size:20}):(0,r.jsx)(u.A,{size:20}),(0,r.jsx)("p",{style:{margin:0,...l.Il.small},children:g.text})]}),(0,r.jsx)("div",{style:{display:"flex",flexDirection:"column",gap:l.YK.lg},children:e.map(e=>(0,r.jsxs)("div",{style:{padding:l.YK.md,backgroundColor:l.Tj.background.lighter,borderRadius:"8px",border:"1px solid ".concat(l.Tj.primary[100])},children:[(0,r.jsx)("label",{style:{...l.Il.small,color:l.Tj.secondary[700],fontWeight:"bold",display:"block",marginBottom:l.YK.xs},children:e.key_name}),(0,r.jsx)("p",{style:{...l.Il.small,margin:"0 0 ".concat(l.YK.md," 0"),color:l.Tj.secondary[500]},children:e.description}),(0,r.jsxs)("div",{style:{display:"flex",gap:l.YK.sm,alignItems:"center"},children:[(0,r.jsxs)("div",{style:{flex:1,position:"relative"},children:[(0,r.jsx)("input",{type:j[e.key_name]?"text":"password",value:f[e.key_name]||"",onChange:t=>v({...f,[e.key_name]:t.target.value}),placeholder:"Insira sua ".concat(e.key_name),style:{width:"100%",padding:l.YK.md,paddingRight:l.YK.xl+24,border:"1px solid ".concat(l.Tj.primary[200]),borderRadius:"6px",fontSize:l.Il.body.fontSize,fontFamily:"monospace",boxSizing:"border-box"}}),(0,r.jsx)("button",{onClick:()=>{var t;return t=e.key_name,void b({...j,[t]:!j[t]})},style:{position:"absolute",right:l.YK.sm,top:"50%",transform:"translateY(-50%)",background:"transparent",border:"none",cursor:"pointer",color:l.Tj.primary[500],padding:l.YK.xs},children:j[e.key_name]?(0,r.jsx)(x,{size:18}):(0,r.jsx)(y,{size:18})})]}),(0,r.jsxs)("button",{onClick:()=>k(e.key_name),disabled:s,style:{padding:"".concat(l.YK.sm," ").concat(l.YK.md),backgroundColor:l.Tj.primary[500],color:"#fff",border:"none",borderRadius:"6px",fontWeight:"bold",cursor:s?"not-allowed":"pointer",opacity:s?.6:1,transition:l.bm.normal,display:"flex",alignItems:"center",gap:l.YK.xs,whiteSpace:"nowrap"},children:[s?(0,r.jsx)(d.A,{size:16,style:{animation:"spin 1s linear infinite"}}):(0,r.jsx)(m.A,{size:16}),"Salvar"]})]})]},e.key_name))}),(0,r.jsxs)("div",{style:{marginTop:l.YK.lg,padding:l.YK.md,backgroundColor:l.Tj.status.info+"15",borderRadius:"8px",border:"1px solid ".concat(l.Tj.status.info)},children:[(0,r.jsx)("p",{style:{...l.Il.small,margin:"0 0 ".concat(l.YK.sm," 0"),color:l.Tj.secondary[700],fontWeight:"bold"},children:"ℹ️ Como obter suas chaves:"}),(0,r.jsxs)("ul",{style:{margin:0,paddingLeft:l.YK.lg,color:l.Tj.secondary[600]},children:[(0,r.jsxs)("li",{style:{marginBottom:l.YK.xs},children:[(0,r.jsx)("strong",{children:"Gemini API:"})," V\xe1 a"," ",(0,r.jsx)("a",{href:"https://ai.google.dev/tutorials/setup",target:"_blank",rel:"noopener noreferrer",style:{color:l.Tj.primary[500],textDecoration:"underline"},children:"Google AI Studio"})]}),(0,r.jsxs)("li",{style:{marginBottom:l.YK.xs},children:[(0,r.jsx)("strong",{children:"Stripe:"})," V\xe1 a"," ",(0,r.jsx)("a",{href:"https://dashboard.stripe.com/apikeys",target:"_blank",rel:"noopener noreferrer",style:{color:l.Tj.primary[500],textDecoration:"underline"},children:"Dashboard Stripe"})]}),(0,r.jsx)("li",{children:'Copie a chave e cole no campo acima, depois clique em "Salvar"'})]})]})]})}let h=(0,c.A)("TriangleAlert",[["path",{d:"m21.73 18-8-14a2 2 0 0 0-3.48 0l-8 14A2 2 0 0 0 4 21h16a2 2 0 0 0 1.73-3",key:"wmoenq"}],["path",{d:"M12 9v4",key:"juzpu7"}],["path",{d:"M12 17h.01",key:"p32p05"}]]);var j=n(71360);function b(e){let{onDeleteSuccess:t}=e,[n,i]=(0,a.useState)(!1),[s,c]=(0,a.useState)(null),[p,m]=(0,a.useState)(!1),[u,x]=(0,a.useState)(""),y=async()=>{if("DELETAR TUDO"!==u)return void c({type:"error",text:'Digite "DELETAR TUDO" para confirmar'});i(!0);try{let e=await (0,o.HW)();if(!e){c({type:"error",text:"Usu\xe1rio n\xe3o autenticado"}),i(!1);return}let{error:n}=await (0,o.m)(e.id);n?c({type:"error",text:"Erro ao deletar: ".concat(n.message)}):(c({type:"success",text:"✅ Todos os lan\xe7amentos foram deletados!"}),m(!1),x(""),setTimeout(()=>{null==t||t()},1500))}catch(e){c({type:"error",text:"Erro: ".concat(e instanceof Error?e.message:"Desconhecido")})}finally{i(!1)}};return(0,r.jsxs)("div",{style:{padding:l.YK.lg,backgroundColor:l.Tj.status.error+"10",border:"2px solid ".concat(l.Tj.status.error),borderRadius:l.Vq.lg,marginTop:l.YK.xl},children:[(0,r.jsxs)("div",{style:{display:"flex",alignItems:"center",gap:l.YK.md,marginBottom:l.YK.md},children:[(0,r.jsx)(h,{size:32,color:l.Tj.status.error}),(0,r.jsxs)("div",{children:[(0,r.jsx)("h3",{style:{...l.Il.h3,margin:0,color:l.Tj.status.error},children:"⚠️ Zona de Perigo"}),(0,r.jsx)("p",{style:{...l.Il.small,margin:"".concat(l.YK.xs," 0 0 0"),color:l.Tj.secondary[600]},children:"A\xe7\xf5es irrevers\xedveis - tenha cuidado!"})]})]}),p?(0,r.jsxs)("div",{style:{padding:l.YK.lg,backgroundColor:"white",border:"1px solid ".concat(l.Tj.status.error),borderRadius:l.Vq.md},children:[(0,r.jsx)("p",{style:{...l.Il.body,margin:"0 0 ".concat(l.YK.md," 0"),color:l.Tj.secondary[900],fontWeight:"bold"},children:"⚠️ Esta a\xe7\xe3o \xe9 IRREVERS\xcdVEL!"}),(0,r.jsxs)("p",{style:{...l.Il.small,margin:"0 0 ".concat(l.YK.md," 0"),color:l.Tj.secondary[600]},children:["Todos os seus lan\xe7amentos ser\xe3o deletados permanentemente. Digite ",(0,r.jsx)("strong",{children:'"DELETAR TUDO"'})," para confirmar:"]}),(0,r.jsx)("input",{type:"text",value:u,onChange:e=>x(e.target.value.toUpperCase()),placeholder:'Digite "DELETAR TUDO"',style:{width:"100%",padding:"".concat(l.YK.sm," ").concat(l.YK.md),border:"2px solid ".concat(l.Tj.status.error),borderRadius:l.Vq.md,fontSize:"14px",fontWeight:"bold",marginBottom:l.YK.md,color:l.Tj.secondary[900]}}),s&&(0,r.jsx)("div",{style:{padding:l.YK.md,backgroundColor:"error"===s.type?l.Tj.status.error+"15":l.Tj.status.success+"15",border:"1px solid ".concat("error"===s.type?l.Tj.status.error:l.Tj.status.success),borderRadius:l.Vq.md,marginBottom:l.YK.md},children:(0,r.jsx)("p",{style:{...l.Il.small,margin:0,color:l.Tj.secondary[900]},children:s.text})}),(0,r.jsxs)("div",{style:{display:"flex",gap:l.YK.md},children:[(0,r.jsxs)("button",{onClick:y,disabled:n||"DELETAR TUDO"!==u,style:{flex:1,padding:"".concat(l.YK.sm," ").concat(l.YK.md),backgroundColor:"DELETAR TUDO"===u?l.Tj.status.error:l.Tj.secondary[200],color:"DELETAR TUDO"===u?"white":l.Tj.secondary[600],border:"none",borderRadius:l.Vq.md,fontWeight:"bold",cursor:n||"DELETAR TUDO"!==u?"not-allowed":"pointer",opacity:n||"DELETAR TUDO"!==u?.6:1,display:"flex",alignItems:"center",justifyContent:"center",gap:l.YK.sm,transition:l.bm.normal},children:[n&&(0,r.jsx)(d.A,{size:18,style:{animation:"spin 1s linear infinite"}}),n?"Deletando...":"Confirmar Exclus\xe3o"]}),(0,r.jsx)("button",{onClick:()=>{m(!1),x(""),c(null)},disabled:n,style:{flex:1,padding:"".concat(l.YK.sm," ").concat(l.YK.md),backgroundColor:l.Tj.primary[100],color:l.Tj.primary[600],border:"1px solid ".concat(l.Tj.primary[200]),borderRadius:l.Vq.md,fontWeight:"bold",cursor:n?"not-allowed":"pointer",opacity:n?.6:1,transition:l.bm.normal},onMouseEnter:e=>{n||(e.target.style.backgroundColor=l.Tj.primary[50])},onMouseLeave:e=>{e.target.style.backgroundColor=l.Tj.primary[100]},children:"Cancelar"})]})]}):(0,r.jsxs)("button",{onClick:()=>m(!0),style:{width:"100%",padding:"".concat(l.YK.md," ").concat(l.YK.lg),backgroundColor:l.Tj.status.error,color:"white",border:"none",borderRadius:l.Vq.md,fontWeight:"bold",cursor:"pointer",display:"flex",alignItems:"center",justifyContent:"center",gap:l.YK.sm,transition:l.bm.normal},onMouseEnter:e=>{e.target.style.backgroundColor=l.Tj.status.error,e.target.style.opacity="0.9"},onMouseLeave:e=>{e.target.style.backgroundColor=l.Tj.status.error,e.target.style.opacity="1"},children:[(0,r.jsx)(j.A,{size:20}),"Deletar Todos os Lan\xe7amentos"]})]})}var f=n(6191);let v=(0,c.A)("Save",[["path",{d:"M15.2 3a2 2 0 0 1 1.4.6l3.8 3.8a2 2 0 0 1 .6 1.4V19a2 2 0 0 1-2 2H5a2 2 0 0 1-2-2V5a2 2 0 0 1 2-2z",key:"1c8476"}],["path",{d:"M17 21v-7a1 1 0 0 0-1-1H8a1 1 0 0 0-1 1v7",key:"1ydtos"}],["path",{d:"M7 3v4a1 1 0 0 0 1 1h7",key:"t51u73"}]]);var T=n(65229),k=n(21190);function w(e){let{userId:t,onLimitsUpdated:n}=e,[i,s]=(0,a.useState)([]),[d,c]=(0,a.useState)(!0),[p,m]=(0,a.useState)(""),[u,x]=(0,a.useState)(""),[y,g]=(0,a.useState)(!1),[h,b]=(0,a.useState)(null),[w,C]=(0,a.useState)(null),[K,Y]=(0,a.useState)(""),[z,A]=(0,a.useState)([]);(0,a.useEffect)(()=>{S()},[t]);let S=async()=>{try{c(!0);let{data:e}=await (0,o.fe)(t);e&&s(e);let{data:n}=await (0,o.I0)(t);if(n){let e=Array.from(new Set(n.map(e=>e.category)));A(e)}}catch(e){console.error("Erro ao carregar dados:",e)}finally{c(!1)}},E=async()=>{if(!p.trim()||!u.trim())return void b({type:"error",text:"Preencha categoria e limite"});if(isNaN(parseFloat(u))||0>=parseFloat(u))return void b({type:"error",text:"Limite deve ser um n\xfamero v\xe1lido"});g(!0);try{let{error:e}=await (0,o.ud)(t,p,parseFloat(u));if(e)return void b({type:"error",text:"Erro ao salvar limite"});b({type:"success",text:"✅ Limite para ".concat(p," salvo!")}),m(""),x(""),setTimeout(()=>b(null),2e3),await S(),null==n||n()}catch(e){b({type:"error",text:"Erro ao salvar"})}finally{g(!1)}},I=async e=>{if(!K.trim()||isNaN(parseFloat(K))||0>=parseFloat(K))return void b({type:"error",text:"Valor inv\xe1lido"});g(!0);try{let r=i.find(t=>t.id===e);if(!r)return;let{error:a}=await (0,o.ud)(t,r.category,parseFloat(K));if(a)return void b({type:"error",text:"Erro ao atualizar"});C(null),b({type:"success",text:"✅ Limite atualizado!"}),setTimeout(()=>b(null),2e3),await S(),null==n||n()}catch(e){b({type:"error",text:"Erro"})}finally{g(!1)}},D=async e=>{let t=i.find(t=>t.id===e);if(t&&window.confirm("Deletar limite de ".concat(t.category,"?")))try{let{error:t}=await (0,o.$L)(e);if(t)return void b({type:"error",text:"Erro ao deletar"});b({type:"success",text:"✅ Limite removido!"}),setTimeout(()=>b(null),2e3),await S(),null==n||n()}catch(e){b({type:"error",text:"Erro"})}};return d?(0,r.jsx)("div",{style:{padding:l.YK.lg,backgroundColor:l.Tj.background.light,borderRadius:"12px",textAlign:"center"},children:(0,r.jsx)("p",{style:{color:l.Tj.secondary[600]},children:"Carregando..."})}):(0,r.jsxs)("section",{style:{padding:l.YK.lg,backgroundColor:l.Tj.background.light,borderRadius:"12px",border:"1px solid ".concat(l.Tj.primary[100])},children:[(0,r.jsx)("h3",{style:{...l.Il.h3,margin:"0 0 ".concat(l.YK.md," 0"),color:l.Tj.secondary[900]},children:"\uD83D\uDCCA Limites por Categoria"}),h&&(0,r.jsx)("div",{style:{padding:l.YK.md,marginBottom:l.YK.md,backgroundColor:"success"===h.type?l.Tj.status.success+"15":l.Tj.status.error+"15",border:"1px solid ".concat("success"===h.type?l.Tj.status.success:l.Tj.status.error),borderRadius:"6px",color:"success"===h.type?l.Tj.status.success:l.Tj.status.error},children:h.text}),(0,r.jsxs)("div",{style:{padding:l.YK.md,backgroundColor:l.Tj.background.lighter,borderRadius:"8px",marginBottom:l.YK.lg,border:"1px solid ".concat(l.Tj.primary[100])},children:[(0,r.jsx)("p",{style:{...l.Il.small,margin:"0 0 ".concat(l.YK.md," 0"),color:l.Tj.secondary[700],fontWeight:"bold"},children:"Adicionar novo limite"}),(0,r.jsxs)("div",{style:{display:"grid",gridTemplateColumns:"1fr 1fr auto",gap:l.YK.md,alignItems:"end"},children:[(0,r.jsxs)("div",{children:[(0,r.jsx)("label",{style:{...l.Il.small,color:l.Tj.secondary[700],display:"block",marginBottom:l.YK.xs},children:"Categoria"}),(0,r.jsxs)("select",{value:p,onChange:e=>m(e.target.value),style:{width:"100%",padding:l.YK.md,border:"1px solid ".concat(l.Tj.primary[200]),borderRadius:"6px",fontSize:l.Il.body.fontSize,fontFamily:"inherit",boxSizing:"border-box"},children:[(0,r.jsx)("option",{value:"",children:"Selecione uma categoria"}),z.map(e=>(0,r.jsx)("option",{value:e,children:e},e)),(0,r.jsx)("option",{value:"custom",children:"Outra (digitar)"})]}),"custom"===p&&(0,r.jsx)("input",{type:"text",placeholder:"Nome da categoria",value:"custom"===p?"":p,onChange:e=>m(e.target.value),style:{width:"100%",padding:l.YK.md,marginTop:l.YK.xs,border:"1px solid ".concat(l.Tj.primary[200]),borderRadius:"6px",fontSize:l.Il.body.fontSize,fontFamily:"inherit",boxSizing:"border-box"}})]}),(0,r.jsxs)("div",{children:[(0,r.jsx)("label",{style:{...l.Il.small,color:l.Tj.secondary[700],display:"block",marginBottom:l.YK.xs},children:"Limite (R$)"}),(0,r.jsx)("input",{type:"number",value:u,onChange:e=>x(e.target.value),placeholder:"0.00",step:"0.01",min:"0",style:{width:"100%",padding:l.YK.md,border:"1px solid ".concat(l.Tj.primary[200]),borderRadius:"6px",fontSize:l.Il.body.fontSize,fontFamily:"monospace",boxSizing:"border-box"}})]}),(0,r.jsxs)("button",{onClick:E,disabled:y,style:{padding:"".concat(l.YK.md," ").concat(l.YK.lg),backgroundColor:l.Tj.primary[500],color:"#fff",border:"none",borderRadius:"6px",fontWeight:"bold",cursor:y?"not-allowed":"pointer",opacity:y?.6:1,display:"flex",alignItems:"center",gap:l.YK.sm,whiteSpace:"nowrap"},children:[(0,r.jsx)(f.A,{size:18}),"Adicionar"]})]})]}),i.length>0?(0,r.jsx)("div",{style:{display:"flex",flexDirection:"column",gap:l.YK.md},children:i.map(e=>(0,r.jsxs)("div",{style:{padding:l.YK.md,backgroundColor:l.Tj.background.lighter,borderRadius:"8px",border:"1px solid ".concat(l.Tj.primary[100]),display:"flex",alignItems:"center",gap:l.YK.md},children:[(0,r.jsxs)("div",{style:{flex:1},children:[(0,r.jsx)("p",{style:{...l.Il.body,margin:0,fontWeight:"bold",color:l.Tj.secondary[900]},children:e.category}),w===e.id?(0,r.jsxs)("div",{style:{display:"flex",gap:l.YK.sm,marginTop:l.YK.xs},children:[(0,r.jsx)("input",{type:"number",value:K,onChange:e=>Y(e.target.value),step:"0.01",min:"0",style:{padding:l.YK.sm,border:"1px solid ".concat(l.Tj.primary[200]),borderRadius:"4px",fontSize:l.Il.body.fontSize,fontFamily:"monospace"}}),(0,r.jsxs)("button",{onClick:()=>I(e.id),style:{padding:"".concat(l.YK.xs," ").concat(l.YK.sm),backgroundColor:l.Tj.status.success,color:"#fff",border:"none",borderRadius:"4px",cursor:"pointer",display:"flex",alignItems:"center",gap:l.YK.xs},children:[(0,r.jsx)(v,{size:16}),"Salvar"]}),(0,r.jsxs)("button",{onClick:()=>C(null),style:{padding:"".concat(l.YK.xs," ").concat(l.YK.sm),backgroundColor:l.Tj.status.error,color:"#fff",border:"none",borderRadius:"4px",cursor:"pointer",display:"flex",alignItems:"center",gap:l.YK.xs},children:[(0,r.jsx)(T.A,{size:16}),"Cancelar"]})]}):(0,r.jsxs)("p",{style:{...l.Il.small,margin:"".concat(l.YK.xs," 0 0 0"),color:l.Tj.secondary[600]},children:["R$ ",e.limit_amount.toFixed(2)]})]}),w!==e.id&&(0,r.jsxs)("div",{style:{display:"flex",gap:l.YK.sm},children:[(0,r.jsx)("button",{onClick:()=>{C(e.id),Y(e.limit_amount.toString())},style:{padding:l.YK.sm,backgroundColor:l.Tj.primary[100],border:"1px solid ".concat(l.Tj.primary[200]),borderRadius:"6px",cursor:"pointer",color:l.Tj.primary[600],display:"flex",alignItems:"center",gap:l.YK.xs},children:(0,r.jsx)(k.A,{size:16})}),(0,r.jsx)("button",{onClick:()=>D(e.id),style:{padding:l.YK.sm,backgroundColor:l.Tj.status.error+"20",border:"1px solid ".concat(l.Tj.status.error),borderRadius:"6px",cursor:"pointer",color:l.Tj.status.error,display:"flex",alignItems:"center",gap:l.YK.xs},children:(0,r.jsx)(j.A,{size:16})})]})]},e.id))}):(0,r.jsx)("p",{style:{...l.Il.small,color:l.Tj.secondary[500],textAlign:"center",padding:l.YK.lg,margin:0},children:"Nenhum limite configurado ainda"})]})}var C=n(35626);function K(){let[e,t]=(0,a.useState)(null),[n,d]=(0,a.useState)("cliente"),[c,p]=(0,a.useState)(!0),[m,u]=(0,a.useState)(0),[x,y]=(0,a.useState)(""),[h,j]=(0,a.useState)("cliente"),[f,v]=(0,a.useState)(""),T=(0,i.useRouter)();(0,a.useEffect)(()=>{(async()=>{try{let e=await (0,o.HW)();if(!e)return void T.push("/signin");t(e);let{role:n}=await (0,o.uG)(e.id);d(n)}catch(e){T.push("/signin")}finally{p(!1)}})()},[T,m]);let k=async()=>{window.confirm("Tem certeza que deseja sair?")&&(await (0,o.signOut)(),T.push("/signin"))},K=async()=>{if(!x.trim())return void v("❌ Por favor, insira um email");try{var e,t;v("⏳ Atualizando...");let{data:{users:n},error:r}=await (null==(t=window.supabase.auth.admin)||null==(e=t.listUsers)?void 0:e.call(t))||{data:{users:[]},error:null};if(!n||0===n.length){let e=await fetch("/api/update-user-role",{method:"POST",headers:{"Content-Type":"application/json"},body:JSON.stringify({email:x,role:h})}),t=await e.json();if(!e.ok)return void v("❌ ".concat(t.error||"Erro ao atualizar"));v("✅ Role de ".concat(x,' atualizado para "').concat(h,'"')),y(""),j("cliente"),u(e=>e+1)}}catch(e){v("❌ Erro: ".concat(e instanceof Error?e.message:"Desconhecido"))}};return c?(0,r.jsxs)("div",{style:{minHeight:"100vh",background:l.Tj.background.lighter,width:"100%",overflow:"hidden"},children:[(0,r.jsx)(s.A,{userName:(null==e?void 0:e.email)||"Usu\xe1rio",onLogout:k}),(0,r.jsxs)("main",{style:{width:"100%",maxWidth:"100%",margin:"0 auto",padding:"12px",boxSizing:"border-box"},children:[(0,r.jsx)("style",{children:"\n            @media (min-width: 480px) {\n              main {\n                padding: 16px;\n              }\n            }\n            @media (min-width: 768px) {\n              main {\n                padding: 24px;\n                max-width: 1200px;\n              }\n            }\n          "}),(0,r.jsx)("p",{style:{color:l.Tj.secondary[500],textAlign:"center"},children:"Carregando..."})]})]}):(0,r.jsxs)("div",{style:{minHeight:"100vh",background:l.Tj.background.lighter,width:"100%",overflow:"hidden"},children:[(0,r.jsx)(s.A,{userName:(null==e?void 0:e.email)||"Usu\xe1rio",onLogout:k}),(0,r.jsxs)("main",{style:{width:"100%",maxWidth:"100%",margin:"0 auto",padding:"12px",boxSizing:"border-box"},children:[(0,r.jsx)("style",{children:"\n          .settings-main {\n            width: 100%;\n            max-width: 100%;\n            margin: 0 auto;\n            padding: 12px;\n            box-sizing: border-box;\n            overflow: hidden;\n          }\n\n          @media (min-width: 480px) {\n            .settings-main {\n              padding: 16px;\n            }\n          }\n\n          @media (min-width: 768px) {\n            .settings-main {\n              padding: 24px;\n              max-width: 1200px;\n              margin: 0 auto;\n            }\n          }\n\n          .back-button {\n            display: flex;\n            align-items: center;\n            gap: 8px;\n            padding: 8px 12px;\n            background-color: transparent;\n            border: 1px solid #ddd;\n            border-radius: 6px;\n            cursor: pointer;\n            font-weight: bold;\n            margin-bottom: 16px;\n            transition: all 0.3s ease;\n            font-size: 14px;\n          }\n\n          @media (min-width: 480px) {\n            .back-button {\n              font-size: 15px;\n            }\n          }\n\n          .settings-title {\n            font-size: 22px;\n            font-weight: bold;\n            margin: 0 0 16px 0;\n            margin-bottom: 20px;\n          }\n\n          @media (min-width: 480px) {\n            .settings-title {\n              font-size: 28px;\n              margin-bottom: 24px;\n            }\n          }\n\n          @media (min-width: 768px) {\n            .settings-title {\n              font-size: 32px;\n              margin-bottom: 32px;\n            }\n          }\n\n          .settings-sections {\n            display: grid;\n            grid-template-columns: 1fr;\n            gap: 16px;\n            width: 100%;\n          }\n\n          @media (min-width: 480px) {\n            .settings-sections {\n              gap: 20px;\n            }\n          }\n\n          @media (min-width: 768px) {\n            .settings-sections {\n              grid-template-columns: repeat(2, 1fr);\n              gap: 24px;\n            }\n          }\n\n          .settings-card {\n            padding: 16px;\n            background-color: #f5f5f5;\n            border-radius: 12px;\n            border: 1px solid #e0e0e0;\n            width: 100%;\n            box-sizing: border-box;\n          }\n\n          @media (min-width: 480px) {\n            .settings-card {\n              padding: 20px;\n            }\n          }\n\n          @media (min-width: 768px) {\n            .settings-card {\n              padding: 24px;\n            }\n          }\n\n          .settings-card h3 {\n            font-size: 16px;\n            font-weight: bold;\n            margin: 0 0 12px 0;\n          }\n\n          @media (min-width: 480px) {\n            .settings-card h3 {\n              font-size: 18px;\n              margin-bottom: 16px;\n            }\n          }\n\n          .settings-input, .settings-select {\n            width: 100%;\n            padding: 12px;\n            border: 1px solid #ddd;\n            border-radius: 6px;\n            font-size: 14px;\n            box-sizing: border-box;\n            margin-bottom: 12px;\n          }\n\n          @media (min-width: 480px) {\n            .settings-input, .settings-select {\n              font-size: 15px;\n              padding: 14px;\n              margin-bottom: 16px;\n            }\n          }\n\n          .settings-button {\n            width: 100%;\n            padding: 12px;\n            background-color: #ffa500;\n            color: white;\n            border: none;\n            border-radius: 6px;\n            font-weight: bold;\n            cursor: pointer;\n            transition: all 0.3s ease;\n            font-size: 14px;\n          }\n\n          @media (min-width: 480px) {\n            .settings-button {\n              padding: 14px;\n              font-size: 15px;\n            }\n          }\n\n          .settings-label {\n            font-size: 12px;\n            font-weight: bold;\n            display: block;\n            margin-bottom: 6px;\n            color: #333;\n          }\n\n          @media (min-width: 480px) {\n            .settings-label {\n              font-size: 13px;\n              margin-bottom: 8px;\n            }\n          }\n\n          .info-section {\n            margin-bottom: 12px;\n          }\n\n          @media (min-width: 480px) {\n            .info-section {\n              margin-bottom: 16px;\n            }\n          }\n\n          .info-label {\n            font-size: 12px;\n            color: #666;\n            margin: 0 0 4px 0;\n          }\n\n          @media (min-width: 480px) {\n            .info-label {\n              font-size: 13px;\n              margin-bottom: 6px;\n            }\n          }\n\n          .info-value {\n            font-size: 14px;\n            font-weight: bold;\n            color: #333;\n            margin: 0;\n            word-break: break-all;\n          }\n\n          @media (min-width: 480px) {\n            .info-value {\n              font-size: 15px;\n            }\n          }\n\n          .admin-section {\n            background-color: #fff3cd;\n            border-color: #ffc107;\n          }\n\n          .category-limits-wrapper {\n            margin-top: 20px;\n            width: 100%;\n          }\n\n          @media (min-width: 480px) {\n            .category-limits-wrapper {\n              margin-top: 24px;\n            }\n          }\n\n          @media (min-width: 768px) {\n            .category-limits-wrapper {\n              margin-top: 32px;\n            }\n          }\n\n          .danger-zone-wrapper {\n            margin-top: 20px;\n            width: 100%;\n          }\n\n          @media (min-width: 480px) {\n            .danger-zone-wrapper {\n              margin-top: 24px;\n            }\n          }\n\n          @media (min-width: 768px) {\n            .danger-zone-wrapper {\n              margin-top: 32px;\n            }\n          }\n        "}),(0,r.jsxs)("div",{className:"settings-main",children:[(0,r.jsxs)("button",{onClick:()=>T.back(),className:"back-button",style:{color:l.Tj.primary[500]},onMouseEnter:e=>{e.target.style.backgroundColor=l.Tj.primary[50]},onMouseLeave:e=>{e.target.style.backgroundColor="transparent"},children:[(0,r.jsx)(C.A,{size:18}),"Voltar"]}),(0,r.jsx)("h1",{className:"settings-title",style:{color:l.Tj.secondary[900]},children:"⚙️ Configura\xe7\xf5es"}),(0,r.jsxs)("div",{className:"settings-sections",children:["admin"===n&&(0,r.jsx)("section",{style:{gridColumn:"span 1"},children:(0,r.jsx)(g,{})}),(0,r.jsxs)("section",{className:"settings-card",style:{borderColor:l.Tj.primary[100],backgroundColor:l.Tj.background.light},children:[(0,r.jsx)("h3",{style:{color:l.Tj.secondary[900]},children:"\uD83D\uDC64 Informa\xe7\xf5es da Conta"}),(0,r.jsxs)("div",{style:{display:"flex",flexDirection:"column",gap:"12px"},children:[(0,r.jsxs)("div",{className:"info-section",children:[(0,r.jsx)("p",{className:"info-label",style:{color:l.Tj.secondary[500]},children:"Email"}),(0,r.jsx)("p",{className:"info-value",style:{color:l.Tj.secondary[900]},children:null==e?void 0:e.email})]}),(0,r.jsxs)("div",{className:"info-section",children:[(0,r.jsx)("p",{className:"info-label",style:{color:l.Tj.secondary[500]},children:"Tipo de Usu\xe1rio"}),(0,r.jsx)("p",{className:"info-value",style:{color:"admin"===n?l.Tj.status.warning:l.Tj.status.success},children:"admin"===n?"\uD83D\uDC51 Administrador":"\uD83D\uDC64 Cliente"})]}),(0,r.jsxs)("div",{className:"info-section",children:[(0,r.jsx)("p",{className:"info-label",style:{color:l.Tj.secondary[500]},children:"ID do Usu\xe1rio"}),(0,r.jsx)("p",{className:"info-value",style:{color:l.Tj.secondary[700],fontFamily:"monospace",fontSize:"12px"},children:null==e?void 0:e.id})]})]})]}),"admin"===n&&(0,r.jsxs)("section",{className:"settings-card admin-section",style:{gridColumn:"span 1"},children:[(0,r.jsx)("h3",{style:{color:l.Tj.secondary[900]},children:"\uD83D\uDC51 Painel de Admin"}),(0,r.jsx)("p",{style:{fontSize:"12px",margin:"0 0 12px 0",color:l.Tj.secondary[600]},children:"Altere o tipo de usu\xe1rio (admin ou cliente) pelo email"}),(0,r.jsxs)("div",{style:{display:"flex",flexDirection:"column",gap:"12px"},children:[(0,r.jsxs)("div",{children:[(0,r.jsx)("label",{className:"settings-label",children:"Email do Usu\xe1rio"}),(0,r.jsx)("input",{type:"email",value:x,onChange:e=>y(e.target.value),placeholder:"usuario@example.com",className:"settings-input"})]}),(0,r.jsxs)("div",{children:[(0,r.jsx)("label",{className:"settings-label",children:"Novo Tipo"}),(0,r.jsxs)("select",{value:h,onChange:e=>j(e.target.value),className:"settings-select",children:[(0,r.jsx)("option",{value:"cliente",children:"\uD83D\uDC64 Cliente"}),(0,r.jsx)("option",{value:"admin",children:"\uD83D\uDC51 Administrador"})]})]}),(0,r.jsx)("button",{onClick:K,className:"settings-button",style:{backgroundColor:l.Tj.status.warning},onMouseEnter:e=>{e.target.style.opacity="0.9"},onMouseLeave:e=>{e.target.style.opacity="1"},children:"Atualizar Tipo de Usu\xe1rio"}),f&&(0,r.jsx)("p",{style:{fontSize:"12px",margin:0,color:f.includes("✅")?l.Tj.status.success:l.Tj.status.error},children:f})]})]})]}),(0,r.jsx)("div",{className:"category-limits-wrapper",children:(0,r.jsx)(w,{userId:e.id,onLimitsUpdated:()=>u(e=>e+1)})}),(0,r.jsx)("div",{className:"danger-zone-wrapper",children:(0,r.jsx)(b,{onDeleteSuccess:()=>{u(e=>e+1),setTimeout(()=>{T.push("/dashboard")},1500)}})})]})]})]})}},63089:(e,t,n)=>{Promise.resolve().then(n.bind(n,60454))},65229:(e,t,n)=>{"use strict";n.d(t,{A:()=>r});let r=(0,n(71847).A)("X",[["path",{d:"M18 6 6 18",key:"1bl5f8"}],["path",{d:"m6 6 12 12",key:"d8bk6v"}]])},71360:(e,t,n)=>{"use strict";n.d(t,{A:()=>r});let r=(0,n(71847).A)("Trash2",[["path",{d:"M3 6h18",key:"d0wm0j"}],["path",{d:"M19 6v14c0 1-1 2-2 2H7c-1 0-2-1-2-2V6",key:"4alrt4"}],["path",{d:"M8 6V4c0-1 1-2 2-2h4c1 0 2 1 2 2v2",key:"v07s0e"}],["line",{x1:"10",x2:"10",y1:"11",y2:"17",key:"1uufr5"}],["line",{x1:"14",x2:"14",y1:"11",y2:"17",key:"xtxkd"}]])},84926:(e,t,n)=>{"use strict";n.d(t,{A:()=>r});let r=(0,n(71847).A)("LogOut",[["path",{d:"M9 21H5a2 2 0 0 1-2-2V5a2 2 0 0 1 2-2h4",key:"1uf3rs"}],["polyline",{points:"16 17 21 12 16 7",key:"1gabdz"}],["line",{x1:"21",x2:"9",y1:"12",y2:"12",key:"1uyos4"}]])},85998:(e,t,n)=>{"use strict";n.d(t,{A:()=>r});let r=(0,n(71847).A)("Bell",[["path",{d:"M10.268 21a2 2 0 0 0 3.464 0",key:"vwvbt9"}],["path",{d:"M3.262 15.326A1 1 0 0 0 4 17h16a1 1 0 0 0 .74-1.673C19.41 13.956 18 12.499 18 8A6 6 0 0 0 6 8c0 4.499-1.411 5.956-2.738 7.326",key:"11g9vi"}]])}},e=>{e.O(0,[428,382,441,255,358],()=>e(e.s=63089)),_N_E=e.O()}]);