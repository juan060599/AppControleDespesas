(self.webpackChunk_N_E=self.webpackChunk_N_E||[]).push([[662],{5917:(e,r,t)=>{"use strict";t.d(r,{A:()=>a});let a=(0,t(71847).A)("Check",[["path",{d:"M20 6 9 17l-5-5",key:"1gmf2c"}]])},6132:(e,r,t)=>{"use strict";t.d(r,{A:()=>a});let a=(0,t(71847).A)("CircleAlert",[["circle",{cx:"12",cy:"12",r:"10",key:"1mglay"}],["line",{x1:"12",x2:"12",y1:"8",y2:"12",key:"1pkeuh"}],["line",{x1:"12",x2:"12.01",y1:"16",y2:"16",key:"4dfq90"}]])},6191:(e,r,t)=>{"use strict";t.d(r,{A:()=>a});let a=(0,t(71847).A)("Plus",[["path",{d:"M5 12h14",key:"1ays0h"}],["path",{d:"M12 5v14",key:"s699le"}]])},9540:(e,r,t)=>{"use strict";t.d(r,{A:()=>a});let a=(0,t(71847).A)("Menu",[["line",{x1:"4",x2:"20",y1:"12",y2:"12",key:"1e0a9i"}],["line",{x1:"4",x2:"20",y1:"6",y2:"6",key:"1owob3"}],["line",{x1:"4",x2:"20",y1:"18",y2:"18",key:"yk5zj1"}]])},15870:(e,r,t)=>{"use strict";t.d(r,{A:()=>a});let a=(0,t(71847).A)("Settings",[["path",{d:"M12.22 2h-.44a2 2 0 0 0-2 2v.18a2 2 0 0 1-1 1.73l-.43.25a2 2 0 0 1-2 0l-.15-.08a2 2 0 0 0-2.73.73l-.22.38a2 2 0 0 0 .73 2.73l.15.1a2 2 0 0 1 1 1.72v.51a2 2 0 0 1-1 1.74l-.15.09a2 2 0 0 0-.73 2.73l.22.38a2 2 0 0 0 2.73.73l.15-.08a2 2 0 0 1 2 0l.43.25a2 2 0 0 1 1 1.73V20a2 2 0 0 0 2 2h.44a2 2 0 0 0 2-2v-.18a2 2 0 0 1 1-1.73l.43-.25a2 2 0 0 1 2 0l.15.08a2 2 0 0 0 2.73-.73l.22-.39a2 2 0 0 0-.73-2.73l-.15-.08a2 2 0 0 1-1-1.74v-.5a2 2 0 0 1 1-1.74l.15-.09a2 2 0 0 0 .73-2.73l-.22-.38a2 2 0 0 0-2.73-.73l-.15.08a2 2 0 0 1-2 0l-.43-.25a2 2 0 0 1-1-1.73V4a2 2 0 0 0-2-2z",key:"1qme2f"}],["circle",{cx:"12",cy:"12",r:"3",key:"1v7zrd"}]])},21190:(e,r,t)=>{"use strict";t.d(r,{A:()=>a});let a=(0,t(71847).A)("Pen",[["path",{d:"M21.174 6.812a1 1 0 0 0-3.986-3.987L3.842 16.174a2 2 0 0 0-.5.83l-1.321 4.352a.5.5 0 0 0 .623.622l4.353-1.32a2 2 0 0 0 .83-.497z",key:"1a8usu"}]])},35626:(e,r,t)=>{"use strict";t.d(r,{A:()=>a});let a=(0,t(71847).A)("ArrowLeft",[["path",{d:"m12 19-7-7 7-7",key:"1l729n"}],["path",{d:"M19 12H5",key:"x3x0zl"}]])},42348:(e,r,t)=>{"use strict";t.d(r,{A:()=>a});let a=(0,t(71847).A)("Loader",[["path",{d:"M12 2v4",key:"3427ic"}],["path",{d:"m16.2 7.8 2.9-2.9",key:"r700ao"}],["path",{d:"M18 12h4",key:"wj9ykh"}],["path",{d:"m16.2 16.2 2.9 2.9",key:"1bxg5t"}],["path",{d:"M12 18v4",key:"jadmvz"}],["path",{d:"m4.9 19.1 2.9-2.9",key:"bwix9q"}],["path",{d:"M2 12h4",key:"j09sii"}],["path",{d:"m4.9 4.9 2.9 2.9",key:"giyufr"}]])},60454:(e,r,t)=>{"use strict";t.r(r),t.d(r,{default:()=>C});var a=t(95155),o=t(12115),s=t(20063),i=t(75746),l=t(36382),n=t(24268),d=t(42348),c=t(71847);let u=(0,c.A)("Key",[["path",{d:"m15.5 7.5 2.3 2.3a1 1 0 0 0 1.4 0l2.1-2.1a1 1 0 0 0 0-1.4L19 4",key:"g0fldk"}],["path",{d:"m21 2-9.6 9.6",key:"1j0ho8"}],["circle",{cx:"7.5",cy:"15.5",r:"5.5",key:"yqb3hr"}]]);var p=t(5917),y=t(6132);let m=(0,c.A)("EyeOff",[["path",{d:"M10.733 5.076a10.744 10.744 0 0 1 11.205 6.575 1 1 0 0 1 0 .696 10.747 10.747 0 0 1-1.444 2.49",key:"ct8e1f"}],["path",{d:"M14.084 14.158a3 3 0 0 1-4.242-4.242",key:"151rxh"}],["path",{d:"M17.479 17.499a10.75 10.75 0 0 1-15.417-5.151 1 1 0 0 1 0-.696 10.75 10.75 0 0 1 4.446-5.143",key:"13bj9a"}],["path",{d:"m2 2 20 20",key:"1ooewy"}]]),x=(0,c.A)("Eye",[["path",{d:"M2.062 12.348a1 1 0 0 1 0-.696 10.75 10.75 0 0 1 19.876 0 1 1 0 0 1 0 .696 10.75 10.75 0 0 1-19.876 0",key:"1nclc0"}],["circle",{cx:"12",cy:"12",r:"3",key:"1v7zrd"}]]);function g(){let[e,r]=(0,o.useState)([]),[t,s]=(0,o.useState)(!0),[l,c]=(0,o.useState)(!1),[g,h]=(0,o.useState)(null),[j,b]=(0,o.useState)({}),[f,T]=(0,o.useState)({});(0,o.useEffect)(()=>{v()},[]);let v=async()=>{try{s(!0);let{data:e,error:t}=await (0,i._F)();if(t)return void h({type:"error",text:"Erro ao carregar chaves de API"});if(e){r(e);let t={};e.forEach(e=>{t[e.key_name]=e.key_value}),T(t)}}catch(e){h({type:"error",text:"Erro ao carregar chaves"})}finally{s(!1)}},k=async t=>{let a=f[t];if(!a||!a.trim())return void h({type:"error",text:"Chave n\xe3o pode ser vazia"});if("GEMINI_API_KEY"===t&&!a.startsWith("AIzaSy"))return void h({type:"error",text:'Chave Gemini inv\xe1lida. Deve come\xe7ar com "AIzaSy"'});if("STRIPE_PUBLIC_KEY"===t&&!a.startsWith("pk_"))return void h({type:"error",text:'Chave Stripe p\xfablica inv\xe1lida. Deve come\xe7ar com "pk_"'});if("STRIPE_SECRET_KEY"===t&&!a.startsWith("sk_"))return void h({type:"error",text:'Chave Stripe secreta inv\xe1lida. Deve come\xe7ar com "sk_"'});c(!0);try{let{error:o}=await (0,i.XW)(t,a);if(o)return void h({type:"error",text:"Erro ao salvar ".concat(t)});r(e.map(e=>e.key_name===t?{...e,key_value:a}:e)),h({type:"success",text:"✅ ".concat(t," salva com sucesso!")}),setTimeout(()=>h(null),3e3)}catch(e){h({type:"error",text:"Erro ao salvar chave"})}finally{c(!1)}};return t?(0,a.jsxs)("div",{style:{padding:n.YK.lg,backgroundColor:n.Tj.background.light,borderRadius:"12px",border:"1px solid ".concat(n.Tj.primary[100]),display:"flex",alignItems:"center",justifyContent:"center",gap:n.YK.md},children:[(0,a.jsx)(d.A,{size:20,style:{animation:"spin 1s linear infinite"}}),(0,a.jsx)("p",{style:{margin:0,color:n.Tj.secondary[600]},children:"Carregando chaves..."}),(0,a.jsx)("style",{children:"@keyframes spin { to { transform: rotate(360deg); } }"})]}):(0,a.jsxs)("section",{style:{padding:n.YK.lg,backgroundColor:n.Tj.background.light,borderRadius:"12px",border:"1px solid ".concat(n.Tj.primary[100])},children:[(0,a.jsxs)("h3",{style:{...n.Il.h3,margin:"0 0 ".concat(n.YK.md," 0"),color:n.Tj.secondary[900],display:"flex",alignItems:"center",gap:n.YK.sm},children:[(0,a.jsx)(u,{size:24}),"Chaves de API"]}),g&&(0,a.jsxs)("div",{style:{padding:n.YK.md,marginBottom:n.YK.md,backgroundColor:"success"===g.type?n.Tj.status.success+"15":"error"===g.type?n.Tj.status.error+"15":n.Tj.status.info+"15",border:"1px solid ".concat("success"===g.type?n.Tj.status.success:"error"===g.type?n.Tj.status.error:n.Tj.status.info),borderRadius:"6px",display:"flex",alignItems:"center",gap:n.YK.sm,color:"success"===g.type?n.Tj.status.success:"error"===g.type?n.Tj.status.error:n.Tj.status.info},children:["success"===g.type?(0,a.jsx)(p.A,{size:20}):(0,a.jsx)(y.A,{size:20}),(0,a.jsx)("p",{style:{margin:0,...n.Il.small},children:g.text})]}),(0,a.jsx)("div",{style:{display:"flex",flexDirection:"column",gap:n.YK.lg},children:e.map(e=>(0,a.jsxs)("div",{style:{padding:n.YK.md,backgroundColor:n.Tj.background.lighter,borderRadius:"8px",border:"1px solid ".concat(n.Tj.primary[100])},children:[(0,a.jsx)("label",{style:{...n.Il.small,color:n.Tj.secondary[700],fontWeight:"bold",display:"block",marginBottom:n.YK.xs},children:e.key_name}),(0,a.jsx)("p",{style:{...n.Il.small,margin:"0 0 ".concat(n.YK.md," 0"),color:n.Tj.secondary[500]},children:e.description}),(0,a.jsxs)("div",{style:{display:"flex",gap:n.YK.sm,alignItems:"center"},children:[(0,a.jsxs)("div",{style:{flex:1,position:"relative"},children:[(0,a.jsx)("input",{type:j[e.key_name]?"text":"password",value:f[e.key_name]||"",onChange:r=>T({...f,[e.key_name]:r.target.value}),placeholder:"Insira sua ".concat(e.key_name),style:{width:"100%",padding:n.YK.md,paddingRight:n.YK.xl+24,border:"1px solid ".concat(n.Tj.primary[200]),borderRadius:"6px",fontSize:n.Il.body.fontSize,fontFamily:"monospace",boxSizing:"border-box"}}),(0,a.jsx)("button",{onClick:()=>{var r;return r=e.key_name,void b({...j,[r]:!j[r]})},style:{position:"absolute",right:n.YK.sm,top:"50%",transform:"translateY(-50%)",background:"transparent",border:"none",cursor:"pointer",color:n.Tj.primary[500],padding:n.YK.xs},children:j[e.key_name]?(0,a.jsx)(m,{size:18}):(0,a.jsx)(x,{size:18})})]}),(0,a.jsxs)("button",{onClick:()=>k(e.key_name),disabled:l,style:{padding:"".concat(n.YK.sm," ").concat(n.YK.md),backgroundColor:n.Tj.primary[500],color:"#fff",border:"none",borderRadius:"6px",fontWeight:"bold",cursor:l?"not-allowed":"pointer",opacity:l?.6:1,transition:n.bm.normal,display:"flex",alignItems:"center",gap:n.YK.xs,whiteSpace:"nowrap"},children:[l?(0,a.jsx)(d.A,{size:16,style:{animation:"spin 1s linear infinite"}}):(0,a.jsx)(p.A,{size:16}),"Salvar"]})]})]},e.key_name))}),(0,a.jsxs)("div",{style:{marginTop:n.YK.lg,padding:n.YK.md,backgroundColor:n.Tj.status.info+"15",borderRadius:"8px",border:"1px solid ".concat(n.Tj.status.info)},children:[(0,a.jsx)("p",{style:{...n.Il.small,margin:"0 0 ".concat(n.YK.sm," 0"),color:n.Tj.secondary[700],fontWeight:"bold"},children:"ℹ️ Como obter suas chaves:"}),(0,a.jsxs)("ul",{style:{margin:0,paddingLeft:n.YK.lg,color:n.Tj.secondary[600]},children:[(0,a.jsxs)("li",{style:{marginBottom:n.YK.xs},children:[(0,a.jsx)("strong",{children:"Gemini API:"})," V\xe1 a"," ",(0,a.jsx)("a",{href:"https://ai.google.dev/tutorials/setup",target:"_blank",rel:"noopener noreferrer",style:{color:n.Tj.primary[500],textDecoration:"underline"},children:"Google AI Studio"})]}),(0,a.jsxs)("li",{style:{marginBottom:n.YK.xs},children:[(0,a.jsx)("strong",{children:"Stripe:"})," V\xe1 a"," ",(0,a.jsx)("a",{href:"https://dashboard.stripe.com/apikeys",target:"_blank",rel:"noopener noreferrer",style:{color:n.Tj.primary[500],textDecoration:"underline"},children:"Dashboard Stripe"})]}),(0,a.jsx)("li",{children:'Copie a chave e cole no campo acima, depois clique em "Salvar"'})]})]})]})}let h=(0,c.A)("TriangleAlert",[["path",{d:"m21.73 18-8-14a2 2 0 0 0-3.48 0l-8 14A2 2 0 0 0 4 21h16a2 2 0 0 0 1.73-3",key:"wmoenq"}],["path",{d:"M12 9v4",key:"juzpu7"}],["path",{d:"M12 17h.01",key:"p32p05"}]]);var j=t(71360);function b(e){let{onDeleteSuccess:r}=e,[t,s]=(0,o.useState)(!1),[l,c]=(0,o.useState)(null),[u,p]=(0,o.useState)(!1),[y,m]=(0,o.useState)(""),x=async()=>{if("DELETAR TUDO"!==y)return void c({type:"error",text:'Digite "DELETAR TUDO" para confirmar'});s(!0);try{let e=await (0,i.HW)();if(!e){c({type:"error",text:"Usu\xe1rio n\xe3o autenticado"}),s(!1);return}let{error:t}=await (0,i.m)(e.id);t?c({type:"error",text:"Erro ao deletar: ".concat(t.message)}):(c({type:"success",text:"✅ Todos os lan\xe7amentos foram deletados!"}),p(!1),m(""),setTimeout(()=>{null==r||r()},1500))}catch(e){c({type:"error",text:"Erro: ".concat(e instanceof Error?e.message:"Desconhecido")})}finally{s(!1)}};return(0,a.jsxs)("div",{style:{padding:n.YK.lg,backgroundColor:n.Tj.status.error+"10",border:"2px solid ".concat(n.Tj.status.error),borderRadius:n.Vq.lg,marginTop:n.YK.xl},children:[(0,a.jsxs)("div",{style:{display:"flex",alignItems:"center",gap:n.YK.md,marginBottom:n.YK.md},children:[(0,a.jsx)(h,{size:32,color:n.Tj.status.error}),(0,a.jsxs)("div",{children:[(0,a.jsx)("h3",{style:{...n.Il.h3,margin:0,color:n.Tj.status.error},children:"⚠️ Zona de Perigo"}),(0,a.jsx)("p",{style:{...n.Il.small,margin:"".concat(n.YK.xs," 0 0 0"),color:n.Tj.secondary[600]},children:"A\xe7\xf5es irrevers\xedveis - tenha cuidado!"})]})]}),u?(0,a.jsxs)("div",{style:{padding:n.YK.lg,backgroundColor:"white",border:"1px solid ".concat(n.Tj.status.error),borderRadius:n.Vq.md},children:[(0,a.jsx)("p",{style:{...n.Il.body,margin:"0 0 ".concat(n.YK.md," 0"),color:n.Tj.secondary[900],fontWeight:"bold"},children:"⚠️ Esta a\xe7\xe3o \xe9 IRREVERS\xcdVEL!"}),(0,a.jsxs)("p",{style:{...n.Il.small,margin:"0 0 ".concat(n.YK.md," 0"),color:n.Tj.secondary[600]},children:["Todos os seus lan\xe7amentos ser\xe3o deletados permanentemente. Digite ",(0,a.jsx)("strong",{children:'"DELETAR TUDO"'})," para confirmar:"]}),(0,a.jsx)("input",{type:"text",value:y,onChange:e=>m(e.target.value.toUpperCase()),placeholder:'Digite "DELETAR TUDO"',style:{width:"100%",padding:"".concat(n.YK.sm," ").concat(n.YK.md),border:"2px solid ".concat(n.Tj.status.error),borderRadius:n.Vq.md,fontSize:"14px",fontWeight:"bold",marginBottom:n.YK.md,color:n.Tj.secondary[900]}}),l&&(0,a.jsx)("div",{style:{padding:n.YK.md,backgroundColor:"error"===l.type?n.Tj.status.error+"15":n.Tj.status.success+"15",border:"1px solid ".concat("error"===l.type?n.Tj.status.error:n.Tj.status.success),borderRadius:n.Vq.md,marginBottom:n.YK.md},children:(0,a.jsx)("p",{style:{...n.Il.small,margin:0,color:n.Tj.secondary[900]},children:l.text})}),(0,a.jsxs)("div",{style:{display:"flex",gap:n.YK.md},children:[(0,a.jsxs)("button",{onClick:x,disabled:t||"DELETAR TUDO"!==y,style:{flex:1,padding:"".concat(n.YK.sm," ").concat(n.YK.md),backgroundColor:"DELETAR TUDO"===y?n.Tj.status.error:n.Tj.secondary[200],color:"DELETAR TUDO"===y?"white":n.Tj.secondary[600],border:"none",borderRadius:n.Vq.md,fontWeight:"bold",cursor:t||"DELETAR TUDO"!==y?"not-allowed":"pointer",opacity:t||"DELETAR TUDO"!==y?.6:1,display:"flex",alignItems:"center",justifyContent:"center",gap:n.YK.sm,transition:n.bm.normal},children:[t&&(0,a.jsx)(d.A,{size:18,style:{animation:"spin 1s linear infinite"}}),t?"Deletando...":"Confirmar Exclus\xe3o"]}),(0,a.jsx)("button",{onClick:()=>{p(!1),m(""),c(null)},disabled:t,style:{flex:1,padding:"".concat(n.YK.sm," ").concat(n.YK.md),backgroundColor:n.Tj.primary[100],color:n.Tj.primary[600],border:"1px solid ".concat(n.Tj.primary[200]),borderRadius:n.Vq.md,fontWeight:"bold",cursor:t?"not-allowed":"pointer",opacity:t?.6:1,transition:n.bm.normal},onMouseEnter:e=>{t||(e.target.style.backgroundColor=n.Tj.primary[50])},onMouseLeave:e=>{e.target.style.backgroundColor=n.Tj.primary[100]},children:"Cancelar"})]})]}):(0,a.jsxs)("button",{onClick:()=>p(!0),style:{width:"100%",padding:"".concat(n.YK.md," ").concat(n.YK.lg),backgroundColor:n.Tj.status.error,color:"white",border:"none",borderRadius:n.Vq.md,fontWeight:"bold",cursor:"pointer",display:"flex",alignItems:"center",justifyContent:"center",gap:n.YK.sm,transition:n.bm.normal},onMouseEnter:e=>{e.target.style.backgroundColor=n.Tj.status.error,e.target.style.opacity="0.9"},onMouseLeave:e=>{e.target.style.backgroundColor=n.Tj.status.error,e.target.style.opacity="1"},children:[(0,a.jsx)(j.A,{size:20}),"Deletar Todos os Lan\xe7amentos"]})]})}var f=t(6191);let T=(0,c.A)("Save",[["path",{d:"M15.2 3a2 2 0 0 1 1.4.6l3.8 3.8a2 2 0 0 1 .6 1.4V19a2 2 0 0 1-2 2H5a2 2 0 0 1-2-2V5a2 2 0 0 1 2-2z",key:"1c8476"}],["path",{d:"M17 21v-7a1 1 0 0 0-1-1H8a1 1 0 0 0-1 1v7",key:"1ydtos"}],["path",{d:"M7 3v4a1 1 0 0 0 1 1h7",key:"t51u73"}]]);var v=t(65229),k=t(21190);function K(e){let{userId:r,onLimitsUpdated:t}=e,[s,l]=(0,o.useState)([]),[d,c]=(0,o.useState)(!0),[u,p]=(0,o.useState)(""),[y,m]=(0,o.useState)(""),[x,g]=(0,o.useState)(!1),[h,b]=(0,o.useState)(null),[K,Y]=(0,o.useState)(null),[C,A]=(0,o.useState)(""),[I,S]=(0,o.useState)([]);(0,o.useEffect)(()=>{E()},[r]);let E=async()=>{try{c(!0);let{data:e}=await (0,i.fe)(r);e&&l(e);let{data:t}=await (0,i.I0)(r);if(t){let e=Array.from(new Set(t.map(e=>e.category)));S(e)}}catch(e){console.error("Erro ao carregar dados:",e)}finally{c(!1)}},w=async()=>{if(!u.trim()||!y.trim())return void b({type:"error",text:"Preencha categoria e limite"});if(isNaN(parseFloat(y))||0>=parseFloat(y))return void b({type:"error",text:"Limite deve ser um n\xfamero v\xe1lido"});g(!0);try{let{error:e}=await (0,i.ud)(r,u,parseFloat(y));if(e)return void b({type:"error",text:"Erro ao salvar limite"});b({type:"success",text:"✅ Limite para ".concat(u," salvo!")}),p(""),m(""),setTimeout(()=>b(null),2e3),await E(),null==t||t()}catch(e){b({type:"error",text:"Erro ao salvar"})}finally{g(!1)}},z=async e=>{if(!C.trim()||isNaN(parseFloat(C))||0>=parseFloat(C))return void b({type:"error",text:"Valor inv\xe1lido"});g(!0);try{let a=s.find(r=>r.id===e);if(!a)return;let{error:o}=await (0,i.ud)(r,a.category,parseFloat(C));if(o)return void b({type:"error",text:"Erro ao atualizar"});Y(null),b({type:"success",text:"✅ Limite atualizado!"}),setTimeout(()=>b(null),2e3),await E(),null==t||t()}catch(e){b({type:"error",text:"Erro"})}finally{g(!1)}},R=async e=>{let r=s.find(r=>r.id===e);if(r&&window.confirm("Deletar limite de ".concat(r.category,"?")))try{let{error:r}=await (0,i.$L)(e);if(r)return void b({type:"error",text:"Erro ao deletar"});b({type:"success",text:"✅ Limite removido!"}),setTimeout(()=>b(null),2e3),await E(),null==t||t()}catch(e){b({type:"error",text:"Erro"})}};return d?(0,a.jsx)("div",{style:{padding:n.YK.lg,backgroundColor:n.Tj.background.light,borderRadius:"12px",textAlign:"center"},children:(0,a.jsx)("p",{style:{color:n.Tj.secondary[600]},children:"Carregando..."})}):(0,a.jsxs)("section",{style:{padding:n.YK.lg,backgroundColor:n.Tj.background.light,borderRadius:"12px",border:"1px solid ".concat(n.Tj.primary[100])},children:[(0,a.jsx)("h3",{style:{...n.Il.h3,margin:"0 0 ".concat(n.YK.md," 0"),color:n.Tj.secondary[900]},children:"\uD83D\uDCCA Limites por Categoria"}),h&&(0,a.jsx)("div",{style:{padding:n.YK.md,marginBottom:n.YK.md,backgroundColor:"success"===h.type?n.Tj.status.success+"15":n.Tj.status.error+"15",border:"1px solid ".concat("success"===h.type?n.Tj.status.success:n.Tj.status.error),borderRadius:"6px",color:"success"===h.type?n.Tj.status.success:n.Tj.status.error},children:h.text}),(0,a.jsxs)("div",{style:{padding:n.YK.md,backgroundColor:n.Tj.background.lighter,borderRadius:"8px",marginBottom:n.YK.lg,border:"1px solid ".concat(n.Tj.primary[100])},children:[(0,a.jsx)("p",{style:{...n.Il.small,margin:"0 0 ".concat(n.YK.md," 0"),color:n.Tj.secondary[700],fontWeight:"bold"},children:"Adicionar novo limite"}),(0,a.jsxs)("div",{style:{display:"grid",gridTemplateColumns:"1fr 1fr auto",gap:n.YK.md,alignItems:"end"},children:[(0,a.jsxs)("div",{children:[(0,a.jsx)("label",{style:{...n.Il.small,color:n.Tj.secondary[700],display:"block",marginBottom:n.YK.xs},children:"Categoria"}),(0,a.jsxs)("select",{value:u,onChange:e=>p(e.target.value),style:{width:"100%",padding:n.YK.md,border:"1px solid ".concat(n.Tj.primary[200]),borderRadius:"6px",fontSize:n.Il.body.fontSize,fontFamily:"inherit",boxSizing:"border-box"},children:[(0,a.jsx)("option",{value:"",children:"Selecione uma categoria"}),I.map(e=>(0,a.jsx)("option",{value:e,children:e},e)),(0,a.jsx)("option",{value:"custom",children:"Outra (digitar)"})]}),"custom"===u&&(0,a.jsx)("input",{type:"text",placeholder:"Nome da categoria",value:"custom"===u?"":u,onChange:e=>p(e.target.value),style:{width:"100%",padding:n.YK.md,marginTop:n.YK.xs,border:"1px solid ".concat(n.Tj.primary[200]),borderRadius:"6px",fontSize:n.Il.body.fontSize,fontFamily:"inherit",boxSizing:"border-box"}})]}),(0,a.jsxs)("div",{children:[(0,a.jsx)("label",{style:{...n.Il.small,color:n.Tj.secondary[700],display:"block",marginBottom:n.YK.xs},children:"Limite (R$)"}),(0,a.jsx)("input",{type:"number",value:y,onChange:e=>m(e.target.value),placeholder:"0.00",step:"0.01",min:"0",style:{width:"100%",padding:n.YK.md,border:"1px solid ".concat(n.Tj.primary[200]),borderRadius:"6px",fontSize:n.Il.body.fontSize,fontFamily:"monospace",boxSizing:"border-box"}})]}),(0,a.jsxs)("button",{onClick:w,disabled:x,style:{padding:"".concat(n.YK.md," ").concat(n.YK.lg),backgroundColor:n.Tj.primary[500],color:"#fff",border:"none",borderRadius:"6px",fontWeight:"bold",cursor:x?"not-allowed":"pointer",opacity:x?.6:1,display:"flex",alignItems:"center",gap:n.YK.sm,whiteSpace:"nowrap"},children:[(0,a.jsx)(f.A,{size:18}),"Adicionar"]})]})]}),s.length>0?(0,a.jsx)("div",{style:{display:"flex",flexDirection:"column",gap:n.YK.md},children:s.map(e=>(0,a.jsxs)("div",{style:{padding:n.YK.md,backgroundColor:n.Tj.background.lighter,borderRadius:"8px",border:"1px solid ".concat(n.Tj.primary[100]),display:"flex",alignItems:"center",gap:n.YK.md},children:[(0,a.jsxs)("div",{style:{flex:1},children:[(0,a.jsx)("p",{style:{...n.Il.body,margin:0,fontWeight:"bold",color:n.Tj.secondary[900]},children:e.category}),K===e.id?(0,a.jsxs)("div",{style:{display:"flex",gap:n.YK.sm,marginTop:n.YK.xs},children:[(0,a.jsx)("input",{type:"number",value:C,onChange:e=>A(e.target.value),step:"0.01",min:"0",style:{padding:n.YK.sm,border:"1px solid ".concat(n.Tj.primary[200]),borderRadius:"4px",fontSize:n.Il.body.fontSize,fontFamily:"monospace"}}),(0,a.jsxs)("button",{onClick:()=>z(e.id),style:{padding:"".concat(n.YK.xs," ").concat(n.YK.sm),backgroundColor:n.Tj.status.success,color:"#fff",border:"none",borderRadius:"4px",cursor:"pointer",display:"flex",alignItems:"center",gap:n.YK.xs},children:[(0,a.jsx)(T,{size:16}),"Salvar"]}),(0,a.jsxs)("button",{onClick:()=>Y(null),style:{padding:"".concat(n.YK.xs," ").concat(n.YK.sm),backgroundColor:n.Tj.status.error,color:"#fff",border:"none",borderRadius:"4px",cursor:"pointer",display:"flex",alignItems:"center",gap:n.YK.xs},children:[(0,a.jsx)(v.A,{size:16}),"Cancelar"]})]}):(0,a.jsxs)("p",{style:{...n.Il.small,margin:"".concat(n.YK.xs," 0 0 0"),color:n.Tj.secondary[600]},children:["R$ ",e.limit_amount.toFixed(2)]})]}),K!==e.id&&(0,a.jsxs)("div",{style:{display:"flex",gap:n.YK.sm},children:[(0,a.jsx)("button",{onClick:()=>{Y(e.id),A(e.limit_amount.toString())},style:{padding:n.YK.sm,backgroundColor:n.Tj.primary[100],border:"1px solid ".concat(n.Tj.primary[200]),borderRadius:"6px",cursor:"pointer",color:n.Tj.primary[600],display:"flex",alignItems:"center",gap:n.YK.xs},children:(0,a.jsx)(k.A,{size:16})}),(0,a.jsx)("button",{onClick:()=>R(e.id),style:{padding:n.YK.sm,backgroundColor:n.Tj.status.error+"20",border:"1px solid ".concat(n.Tj.status.error),borderRadius:"6px",cursor:"pointer",color:n.Tj.status.error,display:"flex",alignItems:"center",gap:n.YK.xs},children:(0,a.jsx)(j.A,{size:16})})]})]},e.id))}):(0,a.jsx)("p",{style:{...n.Il.small,color:n.Tj.secondary[500],textAlign:"center",padding:n.YK.lg,margin:0},children:"Nenhum limite configurado ainda"})]})}var Y=t(35626);function C(){let[e,r]=(0,o.useState)(null),[t,d]=(0,o.useState)("cliente"),[c,u]=(0,o.useState)(!0),[p,y]=(0,o.useState)(0),[m,x]=(0,o.useState)(""),[h,j]=(0,o.useState)("cliente"),[f,T]=(0,o.useState)(""),v=(0,s.useRouter)();(0,o.useEffect)(()=>{(async()=>{try{let e=await (0,i.HW)();if(!e)return void v.push("/signin");r(e);let{role:t}=await (0,i.uG)(e.id);d(t)}catch(e){v.push("/signin")}finally{u(!1)}})()},[v,p]);let k=async()=>{window.confirm("Tem certeza que deseja sair?")&&(await (0,i.signOut)(),v.push("/signin"))},C=async()=>{if(!m.trim())return void T("❌ Por favor, insira um email");try{var e,r;T("⏳ Atualizando...");let{data:{users:t},error:a}=await (null==(r=window.supabase.auth.admin)||null==(e=r.listUsers)?void 0:e.call(r))||{data:{users:[]},error:null};if(!t||0===t.length){let e=await fetch("/api/update-user-role",{method:"POST",headers:{"Content-Type":"application/json"},body:JSON.stringify({email:m,role:h})}),r=await e.json();if(!e.ok)return void T("❌ ".concat(r.error||"Erro ao atualizar"));T("✅ Role de ".concat(m,' atualizado para "').concat(h,'"')),x(""),j("cliente"),y(e=>e+1)}}catch(e){T("❌ Erro: ".concat(e instanceof Error?e.message:"Desconhecido"))}};return c?(0,a.jsxs)("div",{style:{minHeight:"100vh",background:n.Tj.background.lighter},children:[(0,a.jsx)(l.A,{userName:(null==e?void 0:e.email)||"Usu\xe1rio",onLogout:k}),(0,a.jsx)("main",{style:{maxWidth:"1200px",margin:"0 auto",padding:n.YK.xl},children:(0,a.jsx)("p",{style:{color:n.Tj.secondary[500],textAlign:"center"},children:"Carregando..."})})]}):(0,a.jsxs)("div",{style:{minHeight:"100vh",background:n.Tj.background.lighter},children:[(0,a.jsx)(l.A,{userName:(null==e?void 0:e.email)||"Usu\xe1rio",onLogout:k}),(0,a.jsxs)("main",{style:{maxWidth:"1200px",margin:"0 auto",padding:n.YK.xl},children:[(0,a.jsxs)("button",{onClick:()=>v.back(),style:{display:"flex",alignItems:"center",gap:n.YK.sm,padding:"".concat(n.YK.sm," ").concat(n.YK.md),backgroundColor:"transparent",border:"1px solid ".concat(n.Tj.primary[200]),borderRadius:"6px",cursor:"pointer",color:n.Tj.primary[500],fontWeight:"bold",marginBottom:n.YK.lg,transition:"all 0.3s ease"},onMouseEnter:e=>{e.target.style.backgroundColor=n.Tj.primary[50]},onMouseLeave:e=>{e.target.style.backgroundColor="transparent"},children:[(0,a.jsx)(Y.A,{size:20}),"Voltar"]}),(0,a.jsx)("h1",{style:{...n.Il.h1,margin:"0 0 ".concat(n.YK.lg," 0"),color:n.Tj.secondary[900]},children:"⚙️ Configura\xe7\xf5es"}),(0,a.jsxs)("div",{style:{display:"grid",gridTemplateColumns:"repeat(auto-fit, minmax(400px, 1fr))",gap:n.YK.xl},children:["admin"===t&&(0,a.jsx)("section",{children:(0,a.jsx)(g,{})}),(0,a.jsxs)("section",{style:{padding:n.YK.lg,backgroundColor:n.Tj.background.light,borderRadius:"12px",border:"1px solid ".concat(n.Tj.primary[100])},children:[(0,a.jsx)("h3",{style:{...n.Il.h3,margin:"0 0 ".concat(n.YK.md," 0"),color:n.Tj.secondary[900]},children:"\uD83D\uDC64 Informa\xe7\xf5es da Conta"}),(0,a.jsxs)("div",{style:{display:"flex",flexDirection:"column",gap:n.YK.md},children:[(0,a.jsxs)("div",{children:[(0,a.jsx)("p",{style:{...n.Il.small,margin:0,color:n.Tj.secondary[500],marginBottom:n.YK.xs},children:"Email"}),(0,a.jsx)("p",{style:{...n.Il.body,margin:0,color:n.Tj.secondary[900],fontWeight:"bold"},children:null==e?void 0:e.email})]}),(0,a.jsxs)("div",{children:[(0,a.jsx)("p",{style:{...n.Il.small,margin:0,color:n.Tj.secondary[500],marginBottom:n.YK.xs},children:"Tipo de Usu\xe1rio"}),(0,a.jsx)("p",{style:{...n.Il.body,margin:0,color:"admin"===t?n.Tj.status.warning:n.Tj.status.success,fontWeight:"bold"},children:"admin"===t?"\uD83D\uDC51 Administrador":"\uD83D\uDC64 Cliente"})]}),(0,a.jsxs)("div",{children:[(0,a.jsx)("p",{style:{...n.Il.small,margin:0,color:n.Tj.secondary[500],marginBottom:n.YK.xs},children:"ID do Usu\xe1rio"}),(0,a.jsx)("p",{style:{...n.Il.small,margin:0,color:n.Tj.secondary[700],fontFamily:"monospace",wordBreak:"break-all"},children:null==e?void 0:e.id})]})]})]}),"admin"===t&&(0,a.jsxs)("section",{style:{padding:n.YK.lg,backgroundColor:n.Tj.status.warning+"15",borderRadius:"12px",border:"1px solid ".concat(n.Tj.status.warning)},children:[(0,a.jsx)("h3",{style:{...n.Il.h3,margin:"0 0 ".concat(n.YK.md," 0"),color:n.Tj.secondary[900]},children:"\uD83D\uDC51 Painel de Admin"}),(0,a.jsx)("p",{style:{...n.Il.small,margin:"0 0 ".concat(n.YK.md," 0"),color:n.Tj.secondary[600]},children:"Altere o tipo de usu\xe1rio (admin ou cliente) pelo email"}),(0,a.jsxs)("div",{style:{display:"flex",flexDirection:"column",gap:n.YK.md},children:[(0,a.jsxs)("div",{children:[(0,a.jsx)("label",{style:{...n.Il.small,color:n.Tj.secondary[700],fontWeight:"bold",display:"block",marginBottom:n.YK.xs},children:"Email do Usu\xe1rio"}),(0,a.jsx)("input",{type:"email",value:m,onChange:e=>x(e.target.value),placeholder:"usuario@example.com",style:{width:"100%",padding:n.YK.md,border:"1px solid ".concat(n.Tj.primary[200]),borderRadius:"6px",fontSize:n.Il.body.fontSize,fontFamily:"inherit",boxSizing:"border-box"}})]}),(0,a.jsxs)("div",{children:[(0,a.jsx)("label",{style:{...n.Il.small,color:n.Tj.secondary[700],fontWeight:"bold",display:"block",marginBottom:n.YK.xs},children:"Novo Tipo"}),(0,a.jsxs)("select",{value:h,onChange:e=>j(e.target.value),style:{width:"100%",padding:n.YK.md,border:"1px solid ".concat(n.Tj.primary[200]),borderRadius:"6px",fontSize:n.Il.body.fontSize,fontFamily:"inherit",boxSizing:"border-box"},children:[(0,a.jsx)("option",{value:"cliente",children:"\uD83D\uDC64 Cliente"}),(0,a.jsx)("option",{value:"admin",children:"\uD83D\uDC51 Administrador"})]})]}),(0,a.jsx)("button",{onClick:C,style:{padding:n.YK.md,backgroundColor:n.Tj.status.warning,color:"#fff",border:"none",borderRadius:"6px",fontWeight:"bold",cursor:"pointer",transition:"all 0.3s ease"},onMouseEnter:e=>{e.target.style.opacity="0.9"},onMouseLeave:e=>{e.target.style.opacity="1"},children:"Atualizar Tipo de Usu\xe1rio"}),f&&(0,a.jsx)("p",{style:{...n.Il.small,margin:0,color:f.includes("✅")?n.Tj.status.success:n.Tj.status.error},children:f})]})]})]}),(0,a.jsx)("div",{style:{marginTop:n.YK.xl},children:(0,a.jsx)(K,{userId:e.id,onLimitsUpdated:()=>y(e=>e+1)})}),(0,a.jsx)(b,{onDeleteSuccess:()=>{y(e=>e+1),setTimeout(()=>{v.push("/dashboard")},1500)}})]})]})}},63089:(e,r,t)=>{Promise.resolve().then(t.bind(t,60454))},65229:(e,r,t)=>{"use strict";t.d(r,{A:()=>a});let a=(0,t(71847).A)("X",[["path",{d:"M18 6 6 18",key:"1bl5f8"}],["path",{d:"m6 6 12 12",key:"d8bk6v"}]])},71360:(e,r,t)=>{"use strict";t.d(r,{A:()=>a});let a=(0,t(71847).A)("Trash2",[["path",{d:"M3 6h18",key:"d0wm0j"}],["path",{d:"M19 6v14c0 1-1 2-2 2H7c-1 0-2-1-2-2V6",key:"4alrt4"}],["path",{d:"M8 6V4c0-1 1-2 2-2h4c1 0 2 1 2 2v2",key:"v07s0e"}],["line",{x1:"10",x2:"10",y1:"11",y2:"17",key:"1uufr5"}],["line",{x1:"14",x2:"14",y1:"11",y2:"17",key:"xtxkd"}]])},84926:(e,r,t)=>{"use strict";t.d(r,{A:()=>a});let a=(0,t(71847).A)("LogOut",[["path",{d:"M9 21H5a2 2 0 0 1-2-2V5a2 2 0 0 1 2-2h4",key:"1uf3rs"}],["polyline",{points:"16 17 21 12 16 7",key:"1gabdz"}],["line",{x1:"21",x2:"9",y1:"12",y2:"12",key:"1uyos4"}]])},85998:(e,r,t)=>{"use strict";t.d(r,{A:()=>a});let a=(0,t(71847).A)("Bell",[["path",{d:"M10.268 21a2 2 0 0 0 3.464 0",key:"vwvbt9"}],["path",{d:"M3.262 15.326A1 1 0 0 0 4 17h16a1 1 0 0 0 .74-1.673C19.41 13.956 18 12.499 18 8A6 6 0 0 0 6 8c0 4.499-1.411 5.956-2.738 7.326",key:"11g9vi"}]])}},e=>{e.O(0,[428,382,441,255,358],()=>e(e.s=63089)),_N_E=e.O()}]);