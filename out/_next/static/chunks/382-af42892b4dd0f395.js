"use strict";(self.webpackChunk_N_E=self.webpackChunk_N_E||[]).push([[382],{24268:(n,e,t)=>{t.d(e,{Eo:()=>r,Il:()=>o,Tj:()=>i,Vq:()=>s,YK:()=>a,bm:()=>c});let i={primary:{50:"#f0f5ff",100:"#e0ebff",200:"#c1d7ff",300:"#a2c3ff",400:"#83afff",500:"#3b82f6",600:"#2563eb",700:"#1d4ed8",800:"#1e40af",900:"#1e3a8a"},secondary:{50:"#f9fafb",100:"#f3f4f6",200:"#e5e7eb",300:"#d1d5db",400:"#9ca3af",500:"#6b7280",600:"#4b5563",700:"#374151",800:"#1f2937",900:"#111827"},status:{success:"#10b981",warning:"#f59e0b",error:"#ef4444",info:"#0ea5e9"},background:{light:"#ffffff",lighter:"#f9fafb",gradient:"linear-gradient(135deg, #f0f5ff 0%, #ffffff 100%)"}},a={xs:"clamp(2px, 1vw, 4px)",sm:"clamp(6px, 1.5vw, 8px)",md:"clamp(12px, 2vw, 16px)",lg:"clamp(18px, 3vw, 24px)",xl:"clamp(24px, 4vw, 32px)",xxl:"clamp(32px, 5vw, 48px)"},o={h1:{fontSize:"clamp(28px, 6vw, 36px)",fontWeight:700,lineHeight:"1.2"},h2:{fontSize:"clamp(24px, 5vw, 28px)",fontWeight:700,lineHeight:"1.3"},h3:{fontSize:"clamp(18px, 4vw, 24px)",fontWeight:700,lineHeight:"1.4"},h4:{fontSize:"clamp(16px, 3vw, 20px)",fontWeight:600,lineHeight:"1.5"},body:{fontSize:"clamp(13px, 2vw, 14px)",fontWeight:400,lineHeight:"1.6"},small:{fontSize:"clamp(11px, 1.5vw, 12px)",fontWeight:400,lineHeight:"1.5"},label:{fontSize:"clamp(12px, 1.5vw, 13px)",fontWeight:600,lineHeight:"1.5"}},r={sm:"0 2px 8px rgba(0, 0, 0, 0.04)",md:"0 10px 24px rgba(0, 0, 0, 0.08)",lg:"0 20px 40px rgba(0, 0, 0, 0.12)",xl:"0 30px 60px rgba(0, 0, 0, 0.15)",blue:"0 8px 24px rgba(59, 130, 246, 0.3)"},s={sm:"6px",md:"8px",lg:"12px",xl:"16px",full:"50%"},c={fast:"all 0.2s ease",normal:"all 0.3s ease",slow:"all 0.5s ease"},l={background:i.background.light,borderRadius:s.xl,boxShadow:r.md,border:"1px solid ".concat(i.primary[100]),padding:a.xl,transition:c.normal};"linear-gradient(135deg, ".concat(i.primary[500]," 0%, ").concat(i.primary[600]," 100%)"),i.background.light,s.lg,c.normal,r.blue,"linear-gradient(135deg, ".concat(i.primary[600]," 0%, ").concat(i.primary[700]," 100%)"),r.lg,i.secondary[200],s.lg,i.background.light,c.normal,i.primary[500],i.primary[50],i.secondary[300],a.md},36382:(n,e,t)=>{t.d(e,{A:()=>g});var i=t(95155),a=t(9540),o=t(15870),r=t(84926),s=t(12115),c=t(52619),l=t.n(c),d=t(85998),p=t(65229),f=t(24268),m=t(75746);function x(n){let{userId:e}=n,[t,a]=(0,s.useState)(!1),[o,r]=(0,s.useState)([]),[c,l]=(0,s.useState)(!0),[x,g]=(0,s.useState)(!1);return(0,s.useEffect)(()=>{let n=()=>{g(window.innerWidth<768)};return n(),window.addEventListener("resize",n),()=>window.removeEventListener("resize",n)},[]),(0,s.useEffect)(()=>{let n=async()=>{try{let[n,t,i]=await Promise.all([(0,m.fe)(e),(0,m.xz)(e),(0,m.f)(e)]),a=n.data||[],o=t.data||{},s=i.data||{},c=[];a.forEach(n=>{let e=o[n.category]||0,t=e/n.limit_amount*100,i=s[n.category]||0;e>n.limit_amount?c.push({id:"".concat(n.id,"-exceeded"),type:"limit_exceeded",category:n.category,icon:"\uD83D\uDEA8",message:"Limite excedido em ".concat(n.category),details:"Gastou R$ ".concat(e.toFixed(2)," de R$ ").concat(n.limit_amount.toFixed(2)),severity:"high"}):t>=80&&c.push({id:"".concat(n.id,"-approaching"),type:"approaching_limit",category:n.category,icon:"⚠️",message:"Pr\xf3ximo ao limite em ".concat(n.category),details:"".concat(t.toFixed(0),"% do seu limite"),severity:"medium"}),e>1.2*i&&i>0&&c.push({id:"".concat(n.id,"-overspend"),type:"overspending_vs_last_month",category:n.category,icon:"\uD83D\uDCC8",message:"Gastou mais em ".concat(n.category),details:"+".concat(((e/i-1)*100).toFixed(0),"% comparado ao m\xeas anterior"),severity:"low"})}),r(c)}catch(n){console.error("Error loading alerts:",n)}finally{l(!1)}};n();let t=setInterval(n,6e4);return()=>clearInterval(t)},[e]),(0,i.jsxs)(i.Fragment,{children:[(0,i.jsx)("style",{children:"\n        .notification-bell-button {\n          position: relative;\n          width: 36px;\n          height: 36px;\n          background-color: #f5f5f5;\n          border: none;\n          border-radius: 8px;\n          cursor: pointer;\n          display: flex;\n          align-items: center;\n          justify-content: center;\n          transition: all 0.2s ease;\n          flex-shrink: 0;\n        }\n\n        @media (min-width: 480px) {\n          .notification-bell-button {\n            width: 40px;\n            height: 40px;\n          }\n        }\n\n        .notification-bell-button:hover {\n          background-color: #efefef;\n        }\n\n        .notification-badge {\n          position: absolute;\n          top: -8px;\n          right: -8px;\n          background-color: #ef5350;\n          color: white;\n          font-size: 10px;\n          font-weight: bold;\n          border-radius: 50%;\n          width: 20px;\n          height: 20px;\n          display: flex;\n          align-items: center;\n          justify-content: center;\n          border: 2px solid white;\n          line-height: 1;\n        }\n\n        @media (min-width: 480px) {\n          .notification-badge {\n            top: -10px;\n            right: -10px;\n            font-size: 11px;\n            width: 22px;\n            height: 22px;\n          }\n        }\n\n        .notification-overlay {\n          position: fixed;\n          inset: 0;\n          background-color: rgba(0, 0, 0, 0.5);\n          z-index: 999;\n          animation: fadeIn 0.2s ease;\n        }\n\n        @keyframes fadeIn {\n          from {\n            opacity: 0;\n          }\n          to {\n            opacity: 1;\n          }\n        }\n\n        .notification-panel {\n          position: fixed;\n          bottom: 0;\n          left: 0;\n          right: 0;\n          width: 100%;\n          max-height: 80vh;\n          background-color: white;\n          border-radius: 16px 16px 0 0;\n          box-shadow: 0 -4px 16px rgba(0, 0, 0, 0.15);\n          z-index: 1000;\n          display: flex;\n          flex-direction: column;\n          animation: slideUp 0.3s ease;\n        }\n\n        @keyframes slideUp {\n          from {\n            transform: translateY(100%);\n          }\n          to {\n            transform: translateY(0);\n          }\n        }\n\n        @media (min-width: 768px) {\n          .notification-overlay {\n            display: none;\n          }\n\n          .notification-panel {\n            position: absolute;\n            bottom: auto;\n            top: calc(100% + 8px);\n            left: auto;\n            right: 0;\n            width: 320px;\n            max-height: 400px;\n            border-radius: 8px;\n            box-shadow: 0 4px 16px rgba(0, 0, 0, 0.1);\n            animation: slideDown 0.3s ease;\n          }\n\n          @keyframes slideDown {\n            from {\n              opacity: 0;\n              transform: translateY(-10px);\n            }\n            to {\n              opacity: 1;\n              transform: translateY(0);\n            }\n          }\n        }\n\n        .notification-header {\n          padding: 16px;\n          border-bottom: 1px solid #f0f0f0;\n          display: flex;\n          justify-content: space-between;\n          align-items: center;\n          position: sticky;\n          top: 0;\n          background-color: white;\n          border-radius: 16px 16px 0 0;\n        }\n\n        @media (min-width: 480px) {\n          .notification-header {\n            padding: 18px;\n          }\n        }\n\n        @media (min-width: 768px) {\n          .notification-header {\n            border-radius: 8px 8px 0 0;\n          }\n        }\n\n        .notification-header-title {\n          font-size: 16px;\n          font-weight: bold;\n          color: #333;\n          margin: 0;\n        }\n\n        @media (min-width: 480px) {\n          .notification-header-title {\n            font-size: 17px;\n          }\n        }\n\n        .notification-close-btn {\n          background: none;\n          border: none;\n          cursor: pointer;\n          color: #999;\n          padding: 0;\n          display: flex;\n          align-items: center;\n          justify-content: center;\n          width: 28px;\n          height: 28px;\n          flex-shrink: 0;\n        }\n\n        .notification-list {\n          flex: 1;\n          overflow-y: auto;\n          padding: 12px;\n        }\n\n        @media (min-width: 480px) {\n          .notification-list {\n            padding: 14px;\n          }\n        }\n\n        @media (min-width: 768px) {\n          .notification-list {\n            max-height: 300px;\n          }\n        }\n\n        .notification-item {\n          padding: 12px;\n          margin-bottom: 8px;\n          background-color: #f9f9f9;\n          border-left: 4px solid #ffc107;\n          border-radius: 6px;\n          cursor: default;\n        }\n\n        @media (min-width: 480px) {\n          .notification-item {\n            padding: 14px;\n            margin-bottom: 10px;\n          }\n        }\n\n        .notification-item.severity-high {\n          border-left-color: #ef5350;\n          background-color: #ffebee;\n        }\n\n        .notification-item.severity-medium {\n          border-left-color: #ffc107;\n          background-color: #fffde7;\n        }\n\n        .notification-item.severity-low {\n          border-left-color: #66bb6a;\n          background-color: #f1f8e9;\n        }\n\n        .notification-item-icon {\n          font-size: 20px;\n          margin-right: 8px;\n          display: inline-block;\n        }\n\n        .notification-item-message {\n          font-size: 13px;\n          font-weight: bold;\n          color: #333;\n          margin: 0 0 4px 0;\n        }\n\n        @media (min-width: 480px) {\n          .notification-item-message {\n            font-size: 14px;\n            margin-bottom: 6px;\n          }\n        }\n\n        .notification-item-details {\n          font-size: 12px;\n          color: #666;\n          margin: 0;\n        }\n\n        @media (min-width: 480px) {\n          .notification-item-details {\n            font-size: 13px;\n          }\n        }\n\n        .notification-empty {\n          padding: 32px 16px;\n          text-align: center;\n          color: #999;\n          font-size: 14px;\n        }\n\n        @media (min-width: 480px) {\n          .notification-empty {\n            padding: 40px 20px;\n            font-size: 15px;\n          }\n        }\n\n        .notification-loading {\n          padding: 24px;\n          text-align: center;\n          color: #999;\n          font-size: 13px;\n        }\n\n        @media (min-width: 480px) {\n          .notification-loading {\n            padding: 28px;\n            font-size: 14px;\n          }\n        }\n      "}),(0,i.jsxs)("button",{className:"notification-bell-button",onClick:()=>a(!t),style:{color:f.Tj.primary[500]},title:"Notifica\xe7\xf5es",children:[(0,i.jsx)(d.A,{size:18}),o.length>0&&(0,i.jsx)("div",{className:"notification-badge",children:o.length>9?"9+":o.length})]}),t&&(0,i.jsxs)(i.Fragment,{children:[x&&(0,i.jsx)("div",{className:"notification-overlay",onClick:n=>{n.target===n.currentTarget&&a(!1)}}),(0,i.jsxs)("div",{className:"notification-panel",children:[(0,i.jsxs)("div",{className:"notification-header",children:[(0,i.jsx)("h3",{className:"notification-header-title",children:"\uD83D\uDD14 Notifica\xe7\xf5es"}),(0,i.jsx)("button",{className:"notification-close-btn",onClick:()=>a(!1),title:"Fechar notifica\xe7\xf5es",children:(0,i.jsx)(p.A,{size:20})})]}),(0,i.jsx)("div",{className:"notification-list",children:c?(0,i.jsx)("div",{className:"notification-loading",children:"Carregando notifica\xe7\xf5es..."}):0===o.length?(0,i.jsx)("div",{className:"notification-empty",children:"✨ Nenhuma notifica\xe7\xe3o no momento"}):o.map(n=>(0,i.jsxs)("div",{className:"notification-item severity-".concat(n.severity),children:[(0,i.jsx)("span",{className:"notification-item-icon",children:n.icon}),(0,i.jsx)("p",{className:"notification-item-message",children:n.message}),(0,i.jsx)("p",{className:"notification-item-details",children:n.details})]},n.id))})]})]})]})}function g(n){let{userName:e,onLogout:t}=n,[c,d]=(0,s.useState)(!1),[p,g]=(0,s.useState)("");(0,s.useEffect)(()=>{(async()=>{let n=await (0,m.HW)();n&&g(n.id)})()},[]);let u=async()=>{confirm("Tem certeza que deseja sair?")&&t()};return(0,i.jsxs)("header",{style:{background:f.Tj.background.light,borderBottom:"1px solid ".concat(f.Tj.primary[100]),boxShadow:f.Eo.sm,position:"sticky",top:0,zIndex:100,width:"100%"},children:[(0,i.jsx)("style",{children:"\n        * {\n          box-sizing: border-box;\n        }\n\n        .header-wrapper {\n          width: 100%;\n          padding: 12px;\n          display: flex;\n          justify-content: space-between;\n          align-items: center;\n          gap: 12px;\n        }\n\n        @media (min-width: 480px) {\n          .header-wrapper {\n            padding: 14px 16px;\n          }\n        }\n\n        @media (min-width: 768px) {\n          .header-wrapper {\n            padding: 16px 24px;\n          }\n        }\n\n        /* Logo */\n        .logo-section {\n          display: flex;\n          align-items: center;\n          gap: 8px;\n          flex-shrink: 0;\n        }\n\n        .logo-icon {\n          width: 32px;\n          height: 32px;\n          background: linear-gradient(135deg, #3b82f6 0%, #2563eb 100%);\n          border-radius: 8px;\n          display: flex;\n          align-items: center;\n          justify-content: center;\n          flex-shrink: 0;\n        }\n\n        .logo-text {\n          font-size: 16px;\n          font-weight: 700;\n          color: #111827;\n          white-space: nowrap;\n        }\n\n        @media (min-width: 480px) {\n          .logo-text {\n            font-size: 18px;\n          }\n        }\n\n        /* Center - User Info */\n        .user-section {\n          flex: 1;\n          display: flex;\n          align-items: center;\n          justify-content: center;\n          text-align: center;\n          min-width: 0;\n        }\n\n        .user-text {\n          font-size: 12px;\n          color: #374151;\n          margin: 0;\n          line-height: 1.3;\n        }\n\n        .user-text strong {\n          display: block;\n          font-size: 13px;\n          font-weight: 600;\n          color: #111827;\n        }\n\n        @media (min-width: 480px) {\n          .user-text {\n            font-size: 13px;\n          }\n          .user-text strong {\n            font-size: 14px;\n          }\n        }\n\n        /* Right - Actions */\n        .actions-section {\n          display: flex;\n          gap: 6px;\n          align-items: center;\n          flex-shrink: 0;\n        }\n\n        @media (min-width: 480px) {\n          .actions-section {\n            gap: 8px;\n          }\n        }\n\n        .action-button {\n          width: 36px;\n          height: 36px;\n          border-radius: 8px;\n          background: none;\n          border: 1px solid #e5e7eb;\n          display: flex;\n          align-items: center;\n          justify-content: center;\n          cursor: pointer;\n          transition: all 0.2s;\n          color: #374151;\n          flex-shrink: 0;\n        }\n\n        .action-button:hover {\n          background: #f9fafb;\n          border-color: #d1d5db;\n        }\n\n        .action-button svg {\n          width: 18px;\n          height: 18px;\n        }\n\n        @media (min-width: 480px) {\n          .action-button {\n            width: 40px;\n            height: 40px;\n          }\n          .action-button svg {\n            width: 20px;\n            height: 20px;\n          }\n        }\n\n        /* Mobile Menu */\n        .mobile-menu {\n          position: absolute;\n          top: 100%;\n          right: 0;\n          background: white;\n          border-bottom: 1px solid #e5e7eb;\n          width: 100%;\n          display: none;\n          flex-direction: column;\n          z-index: 50;\n        }\n\n        .mobile-menu.open {\n          display: flex;\n        }\n\n        .menu-item {\n          padding: 12px 16px;\n          border-bottom: 1px solid #f3f4f6;\n          display: flex;\n          align-items: center;\n          gap: 12px;\n          font-size: 13px;\n          color: #374151;\n          cursor: pointer;\n          transition: background 0.2s;\n          text-decoration: none;\n        }\n\n        .menu-item:hover {\n          background: #f9fafb;\n        }\n\n        .menu-item svg {\n          width: 18px;\n          height: 18px;\n          flex-shrink: 0;\n        }\n\n        .menu-item.danger {\n          color: #ef4444;\n        }\n      "}),(0,i.jsxs)("div",{className:"header-wrapper",children:[(0,i.jsxs)("div",{className:"logo-section",children:[(0,i.jsx)("div",{className:"logo-icon",children:(0,i.jsxs)("svg",{width:"18",height:"18",viewBox:"0 0 24 24",fill:"none",stroke:"white",strokeWidth:"2",children:[(0,i.jsx)("circle",{cx:"12",cy:"12",r:"1"}),(0,i.jsx)("circle",{cx:"19",cy:"12",r:"1"}),(0,i.jsx)("circle",{cx:"5",cy:"12",r:"1"}),(0,i.jsx)("path",{d:"M12 5v14m-7-7h14"})]})}),(0,i.jsx)("div",{className:"logo-text",children:"FinControl"})]}),(0,i.jsx)("div",{className:"user-section",children:(0,i.jsxs)("p",{className:"user-text",children:[(0,i.jsxs)("strong",{children:["Bem-vindo, ",e.split(" ")[0],"!"]}),"Seus dados est\xe3o seguros"]})}),(0,i.jsxs)("div",{className:"actions-section",children:[p&&(0,i.jsx)(x,{userId:p}),(0,i.jsx)("button",{onClick:()=>d(!c),className:"action-button",title:"Menu",children:(0,i.jsx)(a.A,{size:20})})]})]}),(0,i.jsxs)("div",{className:"mobile-menu ".concat(c?"open":""),children:[(0,i.jsxs)(l(),{href:"/settings",className:"menu-item",children:[(0,i.jsx)(o.A,{size:18}),"Configura\xe7\xf5es"]}),(0,i.jsxs)("button",{onClick:u,className:"menu-item danger",style:{border:"none",background:"none",width:"100%",textAlign:"left"},children:[(0,i.jsx)(r.A,{size:18}),"Sair"]})]})]})}},75746:(n,e,t)=>{t.d(e,{EP:()=>E,tS:()=>N,yY:()=>p,m:()=>u,$L:()=>j,UI:()=>W,$S:()=>D,Uw:()=>g,_F:()=>w,M1:()=>h,fe:()=>_,f:()=>S,xz:()=>z,HW:()=>d,W1:()=>I,F3:()=>m,jo:()=>q,I0:()=>f,uG:()=>y,fE:()=>b,ud:()=>k,Jv:()=>c,CI:()=>l,Hh:()=>s,XW:()=>v,_y:()=>F,AF:()=>x});var i=t(92373);let a="https://rgxhxgigemncqkskaprj.supabase.co",o="sb_publishable_D9M6qWPxdZ_aZ52k0mKfCA_Sn9RJHZU";if(!a||!o)throw Error("Missing Supabase environment variables");let r=(0,i.UU)(a,o,{auth:{storage:{getItem:n=>{try{return localStorage.getItem(n)}catch(n){return null}},setItem:(n,e)=>{try{localStorage.setItem(n,e)}catch(n){}},removeItem:n=>{try{localStorage.removeItem(n)}catch(n){}}},autoRefreshToken:!0,persistSession:!0,detectSessionInUrl:!0}});async function s(n,e,t){let{data:i,error:a}=await r.auth.signUp({email:n,password:e,options:{data:{name:t}}});return{data:i,error:a}}async function c(n,e){let{data:t,error:i}=await r.auth.signInWithPassword({email:n,password:e});return{data:t,error:i}}async function l(){let{error:n}=await r.auth.signOut();return{error:n}}async function d(){var n;let{data:e}=await r.auth.getSession();return null==e||null==(n=e.session)?void 0:n.user}async function p(n){let{data:e,error:t}=await r.from("transactions").insert([n]).select();return{data:e,error:t}}async function f(n){let{data:e,error:t}=await r.from("transactions").select("*").eq("user_id",n).order("date",{ascending:!1});return{data:e,error:t}}function m(n){let e,t=new Date,i=t.getFullYear(),a=t.getMonth(),o=new Date;switch(n){case"current-month":default:e=new Date(i,a,1);break;case"last-month":e=new Date(i,a-1,1),o=new Date(i,a,0);break;case"last-3-months":e=new Date(i,a-3,1);break;case"last-6-months":e=new Date(i,a-6,1);break;case"last-year":e=new Date(i-1,a,1);break;case"all-time":e=new Date(2020,0,1)}return{startDate:e.toISOString().split("T")[0],endDate:o.toISOString().split("T")[0]}}async function x(n,e){let{data:t,error:i}=await r.from("transactions").update(e).eq("id",n).select();return{data:t,error:i}}async function g(n){let{error:e}=await r.from("transactions").delete().eq("id",n);return{error:e}}async function u(n){let{error:e}=await r.from("transactions").delete().eq("user_id",n);return{error:e}}async function h(n,e){let{data:t,error:i}=await r.from("analysis_usage").select("*").eq("user_id",n).eq("month",e).single();return{data:t,error:i}}async function b(n,e){let{data:t,error:i}=await r.from("analysis_usage").select("*").eq("user_id",n).eq("month",e).single();if(i&&"PGRST116"===i.code){let{data:t,error:i}=await r.from("analysis_usage").insert([{user_id:n,month:e,usage_count:1}]).select();return{data:t,error:i}}if(i)return{data:null,error:i};let{data:a,error:o}=await r.from("analysis_usage").update({usage_count:((null==t?void 0:t.usage_count)||0)+1}).eq("user_id",n).eq("month",e).select();return{data:a,error:o}}async function y(n){let{data:e,error:t}=await r.from("user_roles").select("role").eq("user_id",n).single();return{role:(null==e?void 0:e.role)||"cliente",error:t}}async function w(){let{data:n,error:e}=await r.from("api_keys").select("key_name, key_value, description");return{data:n,error:e}}async function v(n,e){let{data:t,error:i}=await r.from("api_keys").update({key_value:e,updated_at:new Date().toISOString()}).eq("key_name",n).select();return{data:t,error:i}}async function _(n){let{data:e,error:t}=await r.from("category_limits").select("*").eq("user_id",n).order("category",{ascending:!0});return{data:e,error:t}}async function k(n,e,t){let{data:i}=await r.from("category_limits").select("id").eq("user_id",n).eq("category",e).single();if(null==i?void 0:i.id){let{data:n,error:e}=await r.from("category_limits").update({limit_amount:t,updated_at:new Date().toISOString()}).eq("id",i.id).select();return{data:n,error:e}}{let{data:i,error:a}=await r.from("category_limits").insert([{user_id:n,category:e,limit_amount:t}]).select();return{data:i,error:a}}}async function j(n){let{error:e}=await r.from("category_limits").delete().eq("id",n);return{error:e}}async function z(n){let e=new Date,t=new Date(e.getFullYear(),e.getMonth(),1).toISOString().split("T")[0],{data:i,error:a}=await r.from("transactions").select("category, amount").eq("user_id",n).eq("type","expense").gte("date",t);if(a||!i)return{data:{},error:a};let o={};return i.forEach(n=>{o[n.category]=(o[n.category]||0)+n.amount}),{data:o,error:null}}async function S(n){let e=new Date,t=new Date(e.getFullYear(),e.getMonth(),1),i=new Date(t.getTime()-1),a=new Date(i.getFullYear(),i.getMonth(),1).toISOString().split("T")[0],o=t.toISOString().split("T")[0],{data:s,error:c}=await r.from("transactions").select("category, amount").eq("user_id",n).eq("type","expense").gte("date",a).lt("date",o);if(c||!s)return{data:{},error:c};let l={};return s.forEach(n=>{l[n.category]=(l[n.category]||0)+n.amount}),{data:l,error:null}}async function q(n){let{data:e,error:t}=await r.from("recurring_expenses").select("*").eq("user_id",n).eq("is_active",!0).order("next_charge_date",{ascending:!0});return{data:e,error:t}}async function N(n){let{data:e,error:t}=await r.from("recurring_expenses").insert([n]).select();return{data:e,error:t}}async function D(n){let{error:e}=await r.from("recurring_expenses").delete().eq("id",n);return{error:e}}async function I(n){let{data:e,error:t}=await r.from("financial_goals").select("*").eq("user_id",n).eq("is_active",!0).order("target_date",{ascending:!0});return{data:e,error:t}}async function E(n){let{data:e,error:t}=await r.from("financial_goals").insert([n]).select();return{data:e,error:t}}async function F(n,e){let{data:t,error:i}=await r.from("financial_goals").update(e).eq("id",n).select();return{data:t,error:i}}async function W(n){let{error:e}=await r.from("financial_goals").delete().eq("id",n);return{error:e}}}}]);